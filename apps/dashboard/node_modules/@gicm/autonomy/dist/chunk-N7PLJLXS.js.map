{"version":3,"sources":["../src/index.ts","../src/core/types.ts"],"sourcesContent":["/**\n * @gicm/autonomy - Level 2+ Autonomy System\n *\n * Provides bounded autonomous execution with human oversight:\n * - Risk classification and decision routing\n * - Auto-execution within safe boundaries\n * - Approval queue for higher-risk actions\n * - Complete audit trail\n */\n\nimport { EventEmitter } from \"eventemitter3\";\nimport type {\n  Action,\n  Decision,\n  ExecutionResult,\n  ApprovalRequest,\n  AutonomyConfig,\n  Boundaries,\n} from \"./core/types.js\";\nimport { createConfig, loadConfigFromEnv } from \"./core/config.js\";\nimport { DecisionRouter } from \"./decision/decision-router.js\";\nimport { AutoExecutor } from \"./execution/auto-executor.js\";\nimport { ApprovalQueue } from \"./approval/approval-queue.js\";\nimport { NotificationManager } from \"./approval/notification-manager.js\";\nimport { BatchApproval } from \"./approval/batch-approval.js\";\nimport { AuditLogger } from \"./audit/audit-logger.js\";\nimport { Logger } from \"./utils/logger.js\";\n\nexport interface AutonomyEngineEvents {\n  \"started\": () => void;\n  \"stopped\": () => void;\n  \"action:received\": (action: Action) => void;\n  \"decision:made\": (decision: Decision) => void;\n  \"execution:completed\": (result: ExecutionResult) => void;\n  \"execution:failed\": (result: ExecutionResult) => void;\n  \"approval:queued\": (request: ApprovalRequest) => void;\n  \"approval:granted\": (request: ApprovalRequest) => void;\n  \"approval:rejected\": (request: ApprovalRequest, reason: string) => void;\n  \"escalation\": (request: ApprovalRequest) => void;\n}\n\n/**\n * Main Autonomy Engine\n *\n * Orchestrates all autonomy components:\n * - Decision routing\n * - Auto-execution\n * - Approval queue\n * - Notifications\n * - Audit logging\n */\nexport class AutonomyEngine extends EventEmitter<AutonomyEngineEvents> {\n  private logger: Logger;\n  private config: AutonomyConfig;\n  private router: DecisionRouter;\n  private executor: AutoExecutor;\n  private approvalQueue: ApprovalQueue;\n  private batchApproval: BatchApproval;\n  private notifications: NotificationManager;\n  private audit: AuditLogger;\n  private running = false;\n\n  constructor(config?: Partial<AutonomyConfig>) {\n    super();\n    this.logger = new Logger(\"AutonomyEngine\");\n\n    // Merge config with env vars and defaults\n    const envConfig = loadConfigFromEnv();\n    this.config = createConfig({ ...envConfig, ...config });\n\n    // Initialize components\n    this.router = new DecisionRouter({\n      autonomyLevel: this.config.level as 1 | 2 | 3 | 4,\n      boundaries: this.config.boundaries,\n    });\n\n    this.executor = new AutoExecutor();\n\n    this.approvalQueue = new ApprovalQueue({\n      maxPendingItems: this.config.approval.maxPendingItems,\n      autoExpireHours: this.config.approval.autoExpireHours,\n    });\n\n    this.batchApproval = new BatchApproval(this.approvalQueue);\n\n    this.notifications = new NotificationManager({\n      channels: this.config.notifications.channels,\n      rateLimitPerMinute: this.config.notifications.rateLimitPerMinute,\n    });\n\n    this.audit = new AuditLogger({\n      retentionDays: this.config.audit.retentionDays,\n    });\n\n    // Wire up events\n    this.setupEventHandlers();\n  }\n\n  /**\n   * Start the autonomy engine\n   */\n  start(): void {\n    if (this.running) return;\n\n    this.running = true;\n    this.logger.info(\"Autonomy engine started\", {\n      level: this.config.level,\n      notificationsConfigured: this.notifications.isConfigured(),\n    });\n\n    this.emit(\"started\");\n  }\n\n  /**\n   * Stop the autonomy engine\n   */\n  stop(): void {\n    if (!this.running) return;\n\n    this.running = false;\n    this.approvalQueue.stop();\n    this.logger.info(\"Autonomy engine stopped\");\n\n    this.emit(\"stopped\");\n  }\n\n  /**\n   * Route an action through the autonomy system\n   */\n  async route(action: Action): Promise<Decision> {\n    if (!this.running) {\n      throw new Error(\"Autonomy engine not running\");\n    }\n\n    this.emit(\"action:received\", action);\n    this.audit.logActionReceived(action);\n\n    // Route through decision system\n    const decision = await this.router.route(action);\n\n    this.audit.logRiskAssessed(action, decision);\n    this.audit.logDecisionMade(decision);\n    this.emit(\"decision:made\", decision);\n\n    // Handle based on outcome\n    switch (decision.outcome) {\n      case \"auto_execute\":\n        await this.handleAutoExecute(decision);\n        break;\n\n      case \"queue_approval\":\n        await this.handleQueueApproval(decision);\n        break;\n\n      case \"escalate\":\n        await this.handleEscalate(decision);\n        break;\n\n      case \"reject\":\n        this.logger.info(`Rejected: ${action.type}`, { reason: decision.reason });\n        this.audit.logBoundaryViolation(action, [decision.reason]);\n        break;\n    }\n\n    return decision;\n  }\n\n  /**\n   * Approve a pending request\n   */\n  async approve(\n    requestId: string,\n    approvedBy = \"human\",\n    feedback?: string\n  ): Promise<ApprovalRequest | null> {\n    const request = this.approvalQueue.approve(requestId, approvedBy, feedback);\n\n    if (request) {\n      this.audit.logApproved(request);\n      this.emit(\"approval:granted\", request);\n\n      // Notify\n      await this.notifications.notifyApprovalDecision(request, true);\n\n      // Execute the approved action\n      await this.handleAutoExecute(request.decision);\n    }\n\n    return request;\n  }\n\n  /**\n   * Reject a pending request\n   */\n  async reject(\n    requestId: string,\n    reason: string,\n    rejectedBy = \"human\"\n  ): Promise<ApprovalRequest | null> {\n    const request = this.approvalQueue.reject(requestId, reason, rejectedBy);\n\n    if (request) {\n      this.audit.logRejected(request, reason);\n      this.emit(\"approval:rejected\", request, reason);\n\n      // Notify\n      await this.notifications.notifyApprovalDecision(request, false, reason);\n    }\n\n    return request;\n  }\n\n  /**\n   * Get pending approval queue\n   */\n  getQueue(): ApprovalRequest[] {\n    return this.approvalQueue.getPending();\n  }\n\n  /**\n   * Get batch approval interface\n   */\n  getBatch(): BatchApproval {\n    return this.batchApproval;\n  }\n\n  /**\n   * Get current boundaries\n   */\n  getBoundaries(): Boundaries {\n    return this.router.getBoundaryChecker().getBoundaries();\n  }\n\n  /**\n   * Update boundaries at runtime\n   */\n  updateBoundaries(updates: Partial<Boundaries>): void {\n    this.router.updateBoundaries(updates);\n    this.logger.info(\"Boundaries updated\");\n  }\n\n  /**\n   * Get usage statistics for today\n   */\n  getUsageToday() {\n    return this.router.getBoundaryChecker().getUsageToday();\n  }\n\n  /**\n   * Get queue statistics\n   */\n  getQueueStats() {\n    return this.approvalQueue.getStats();\n  }\n\n  /**\n   * Get audit entries\n   */\n  getAuditLog() {\n    return this.audit.getEntries();\n  }\n\n  /**\n   * Get executor stats\n   */\n  getExecutorStats() {\n    return this.executor.getStats();\n  }\n\n  /**\n   * Check if engine is running\n   */\n  isRunning(): boolean {\n    return this.running;\n  }\n\n  /**\n   * Get autonomy level\n   */\n  getLevel(): number {\n    return this.config.level;\n  }\n\n  /**\n   * Get full status\n   */\n  getStatus(): {\n    running: boolean;\n    level: number;\n    queue: ReturnType<ApprovalQueue[\"getStats\"]>;\n    usage: import(\"./core/types.js\").DailyUsage;\n    executor: ReturnType<AutoExecutor[\"getStats\"]>;\n    audit: ReturnType<AuditLogger[\"getStats\"]>;\n  } {\n    return {\n      running: this.running,\n      level: this.config.level,\n      queue: this.approvalQueue.getStats(),\n      usage: this.getUsageToday(),\n      executor: this.executor.getStats(),\n      audit: this.audit.getStats(),\n    };\n  }\n\n  // Private methods\n\n  private setupEventHandlers(): void {\n    // Router events\n    this.router.on(\"decision:auto_execute\", (decision) => {\n      this.logger.debug(`Auto-execute: ${decision.action.type}`);\n    });\n\n    this.router.on(\"boundary:violation\", (action, violations) => {\n      this.audit.logBoundaryViolation(action, violations);\n    });\n\n    // Approval queue events\n    this.approvalQueue.on(\"item:escalated\", async (request) => {\n      this.audit.logEscalated(request);\n      this.emit(\"escalation\", request);\n      await this.notifications.notifyEscalation(request);\n    });\n\n    // Executor events\n    this.executor.on(\"execution:completed\", (result) => {\n      this.audit.logExecuted(result);\n      this.emit(\"execution:completed\", result);\n    });\n\n    this.executor.on(\"execution:failed\", (result) => {\n      this.audit.logExecutionFailed(result);\n      this.emit(\"execution:failed\", result);\n    });\n\n    this.executor.on(\"execution:rolled_back\", (actionId) => {\n      this.audit.logRolledBack(actionId, \"\");\n    });\n  }\n\n  private async handleAutoExecute(decision: Decision): Promise<void> {\n    this.logger.info(`Auto-executing: ${decision.action.type}`);\n\n    const result = await this.executor.execute(decision);\n\n    if (result.success) {\n      // Record usage\n      this.router.recordExecution(decision.action);\n    }\n  }\n\n  private async handleQueueApproval(decision: Decision): Promise<void> {\n    const request = this.approvalQueue.add(decision);\n\n    this.audit.logQueuedApproval(request);\n    this.emit(\"approval:queued\", request);\n\n    this.logger.info(`Queued for approval: ${decision.action.type}`, {\n      requestId: request.id,\n      priority: request.priority,\n    });\n\n    // Send notification\n    if (this.config.approval.notifyOnNewItem) {\n      await this.notifications.notifyApprovalNeeded(request);\n      this.approvalQueue.markNotificationSent(request.id, \"initial\");\n    }\n  }\n\n  private async handleEscalate(decision: Decision): Promise<void> {\n    // Queue with high priority and immediate notification\n    const request = this.approvalQueue.add(decision);\n\n    this.audit.logEscalated(request);\n    this.emit(\"escalation\", request);\n\n    this.logger.warn(`Escalated: ${decision.action.type}`, {\n      requestId: request.id,\n      riskLevel: decision.assessment.level,\n    });\n\n    // Send escalation notification immediately\n    await this.notifications.notifyEscalation(request);\n    this.approvalQueue.markNotificationSent(request.id, \"escalation\");\n  }\n}\n\n// Singleton instance\nlet instance: AutonomyEngine | null = null;\n\n/**\n * Get or create the autonomy engine singleton\n */\nexport function getAutonomy(config?: Partial<AutonomyConfig>): AutonomyEngine {\n  if (!instance) {\n    instance = new AutonomyEngine(config);\n    instance.start();\n  }\n  return instance;\n}\n\n/**\n * Reset the singleton (for testing)\n */\nexport function resetAutonomy(): void {\n  if (instance) {\n    instance.stop();\n    instance = null;\n  }\n}\n\n// Re-export all modules\nexport * from \"./core/types.js\";\nexport * from \"./core/config.js\";\nexport * from \"./core/constants.js\";\nexport * from \"./decision/index.js\";\nexport * from \"./execution/index.js\";\nexport * from \"./approval/index.js\";\nexport * from \"./audit/index.js\";\nexport * from \"./integration/index.js\";\nexport { Logger } from \"./utils/logger.js\";\n\n// Alias for backward compatibility\nexport { AutonomyEngine as AutonomySystem };\n","/**\n * Core Types for Level 2 Autonomy\n *\n * Zod schemas + TypeScript types for actions, decisions, boundaries\n */\n\nimport { z } from \"zod\";\n\n// ============================================================================\n// RISK & DECISION TYPES\n// ============================================================================\n\nexport const RiskLevelSchema = z.enum([\"safe\", \"low\", \"medium\", \"high\", \"critical\"]);\nexport type RiskLevel = z.infer<typeof RiskLevelSchema>;\n\nexport const DecisionOutcomeSchema = z.enum([\n  \"auto_execute\",    // Execute immediately without human review\n  \"queue_approval\",  // Add to approval queue for batch review\n  \"escalate\",        // Notify human immediately\n  \"reject\",          // Reject the action\n]);\nexport type DecisionOutcome = z.infer<typeof DecisionOutcomeSchema>;\n\nexport const ActionCategorySchema = z.enum([\n  \"trading\",         // Financial operations (DCA, swaps)\n  \"content\",         // Content creation (tweets, blogs)\n  \"build\",           // Code generation\n  \"deployment\",      // Publishing/deploying\n  \"configuration\",   // System settings\n]);\nexport type ActionCategory = z.infer<typeof ActionCategorySchema>;\n\nexport const EngineTypeSchema = z.enum([\n  \"money\",\n  \"growth\",\n  \"product\",\n  \"orchestrator\",\n]);\nexport type EngineType = z.infer<typeof EngineTypeSchema>;\n\nexport const UrgencySchema = z.enum([\"low\", \"normal\", \"high\", \"critical\"]);\nexport type Urgency = z.infer<typeof UrgencySchema>;\n\n// ============================================================================\n// ACTION SCHEMA\n// ============================================================================\n\nexport const ActionMetadataSchema = z.object({\n  estimatedValue: z.number().optional(),\n  reversible: z.boolean(),\n  urgency: UrgencySchema,\n  dependencies: z.array(z.string()).optional(),\n  linesChanged: z.number().optional(),\n  filesChanged: z.number().optional(),\n});\nexport type ActionMetadata = z.infer<typeof ActionMetadataSchema>;\n\nexport const ActionSchema = z.object({\n  id: z.string(),\n  engine: EngineTypeSchema,\n  category: ActionCategorySchema,\n  type: z.string(),\n  description: z.string(),\n  params: z.record(z.unknown()),\n  metadata: ActionMetadataSchema,\n  timestamp: z.number(),\n});\nexport type Action = z.infer<typeof ActionSchema>;\n\n// ============================================================================\n// RISK ASSESSMENT\n// ============================================================================\n\nexport const RiskFactorSchema = z.object({\n  name: z.string(),\n  weight: z.number().min(0).max(1),\n  value: z.number(),\n  threshold: z.number(),\n  exceeded: z.boolean(),\n  reason: z.string(),\n});\nexport type RiskFactor = z.infer<typeof RiskFactorSchema>;\n\nexport const RiskAssessmentSchema = z.object({\n  actionId: z.string(),\n  level: RiskLevelSchema,\n  score: z.number().min(0).max(100),\n  factors: z.array(RiskFactorSchema),\n  recommendation: DecisionOutcomeSchema,\n  constraints: z.array(z.string()),\n  timestamp: z.number(),\n});\nexport type RiskAssessment = z.infer<typeof RiskAssessmentSchema>;\n\n// ============================================================================\n// DECISION\n// ============================================================================\n\nexport const DecisionSchema = z.object({\n  id: z.string(),\n  actionId: z.string(),\n  action: ActionSchema,\n  assessment: RiskAssessmentSchema,\n  outcome: DecisionOutcomeSchema,\n  reason: z.string(),\n  policyId: z.string().optional(),\n  approvedBy: z.string().optional(),\n  approvedAt: z.number().optional(),\n  executedAt: z.number().optional(),\n  rollbackAvailable: z.boolean(),\n  timestamp: z.number(),\n});\nexport type Decision = z.infer<typeof DecisionSchema>;\n\n// ============================================================================\n// BOUNDARIES\n// ============================================================================\n\nexport const FinancialBoundariesSchema = z.object({\n  maxAutoExpense: z.number().default(50),\n  maxQueuedExpense: z.number().default(200),\n  maxDailySpend: z.number().default(100),\n  maxTradeSize: z.number().default(500),\n  maxDailyTradingLossPercent: z.number().default(5),\n  minTreasuryBalance: z.number().default(1000),\n});\nexport type FinancialBoundaries = z.infer<typeof FinancialBoundariesSchema>;\n\nexport const ContentBoundariesSchema = z.object({\n  maxAutoPostsPerDay: z.number().default(10),\n  maxAutoBlogsPerWeek: z.number().default(3),\n  requireReviewForTopics: z.array(z.string()).default([\"financial_advice\", \"controversial\"]),\n});\nexport type ContentBoundaries = z.infer<typeof ContentBoundariesSchema>;\n\nexport const DevelopmentBoundariesSchema = z.object({\n  maxAutoCommitLines: z.number().default(100),\n  maxAutoFilesChanged: z.number().default(5),\n  requireReviewForPaths: z.array(z.string()).default([\"src/core/\", \"src/config/\", \".env\"]),\n  autoDeployToStaging: z.boolean().default(true),\n  autoDeployToProduction: z.boolean().default(false),\n});\nexport type DevelopmentBoundaries = z.infer<typeof DevelopmentBoundariesSchema>;\n\nexport const TradingBoundariesSchema = z.object({\n  allowedBots: z.array(z.string()).default([\"dca\"]),\n  allowedTokens: z.array(z.string()).default([\"SOL\", \"USDC\"]),\n  maxPositionPercent: z.number().default(20),\n  requireApprovalForNewTokens: z.boolean().default(true),\n});\nexport type TradingBoundaries = z.infer<typeof TradingBoundariesSchema>;\n\nexport const TimeBoundariesSchema = z.object({\n  activeHoursStart: z.number().default(6),\n  activeHoursEnd: z.number().default(22),\n  quietHoursStart: z.number().default(23),\n  quietHoursEnd: z.number().default(6),\n});\nexport type TimeBoundaries = z.infer<typeof TimeBoundariesSchema>;\n\nexport const BoundariesSchema = z.object({\n  financial: FinancialBoundariesSchema,\n  content: ContentBoundariesSchema,\n  development: DevelopmentBoundariesSchema,\n  trading: TradingBoundariesSchema,\n  time: TimeBoundariesSchema,\n});\nexport type Boundaries = z.infer<typeof BoundariesSchema>;\n\n// ============================================================================\n// BOUNDARY CHECK RESULT\n// ============================================================================\n\nexport const DailyUsageSchema = z.object({\n  trades: z.number().default(0),\n  content: z.number().default(0),\n  builds: z.number().default(0),\n  spending: z.number().default(0),\n});\nexport type DailyUsage = z.infer<typeof DailyUsageSchema>;\n\nexport const BoundaryCheckResultSchema = z.object({\n  passed: z.boolean(),\n  violations: z.array(z.string()),\n  warnings: z.array(z.string()),\n  usageToday: DailyUsageSchema,\n});\nexport type BoundaryCheckResult = z.infer<typeof BoundaryCheckResultSchema>;\n\n// ============================================================================\n// APPROVAL\n// ============================================================================\n\nexport const ApprovalStatusSchema = z.enum([\"pending\", \"approved\", \"rejected\", \"expired\"]);\nexport type ApprovalStatus = z.infer<typeof ApprovalStatusSchema>;\n\nexport const ApprovalRequestSchema = z.object({\n  id: z.string(),\n  decision: DecisionSchema,\n  priority: z.number(),\n  urgency: UrgencySchema,\n  expiresAt: z.number(),\n  notificationsSent: z.array(z.string()),\n  status: ApprovalStatusSchema,\n  reviewedBy: z.string().optional(),\n  reviewedAt: z.number().optional(),\n  feedback: z.string().optional(),\n  createdAt: z.number(),\n});\nexport type ApprovalRequest = z.infer<typeof ApprovalRequestSchema>;\n\n// ============================================================================\n// EXECUTION\n// ============================================================================\n\nexport const ExecutionResultSchema = z.object({\n  actionId: z.string(),\n  decisionId: z.string(),\n  success: z.boolean(),\n  output: z.unknown().optional(),\n  error: z.string().optional(),\n  executedAt: z.number(),\n  duration: z.number(),\n  rolledBack: z.boolean().default(false),\n});\nexport type ExecutionResult = z.infer<typeof ExecutionResultSchema>;\n\nexport const RollbackCheckpointSchema = z.object({\n  id: z.string(),\n  actionId: z.string(),\n  decisionId: z.string(),\n  state: z.record(z.unknown()),\n  createdAt: z.number(),\n});\nexport type RollbackCheckpoint = z.infer<typeof RollbackCheckpointSchema>;\n\n// ============================================================================\n// AUDIT\n// ============================================================================\n\nexport const AuditEntryTypeSchema = z.enum([\n  \"action_received\",\n  \"risk_assessed\",\n  \"decision_made\",\n  \"queued_approval\",\n  \"approved\",\n  \"rejected\",\n  \"executed\",\n  \"execution_failed\",\n  \"rolled_back\",\n  \"boundary_violation\",\n  \"escalated\",\n]);\nexport type AuditEntryType = z.infer<typeof AuditEntryTypeSchema>;\n\nexport const AuditEntrySchema = z.object({\n  id: z.string(),\n  timestamp: z.number(),\n  type: AuditEntryTypeSchema,\n  actionId: z.string(),\n  decisionId: z.string().optional(),\n  data: z.record(z.unknown()),\n  hash: z.string(),\n  previousHash: z.string(),\n});\nexport type AuditEntry = z.infer<typeof AuditEntrySchema>;\n\n// ============================================================================\n// NOTIFICATION\n// ============================================================================\n\nexport const NotificationChannelTypeSchema = z.enum([\"discord\", \"telegram\", \"slack\", \"email\"]);\nexport type NotificationChannelType = z.infer<typeof NotificationChannelTypeSchema>;\n\nexport const NotificationChannelSchema = z.object({\n  type: NotificationChannelTypeSchema,\n  enabled: z.boolean(),\n  config: z.object({\n    webhookUrl: z.string().optional(),\n    botToken: z.string().optional(),\n    chatId: z.string().optional(),\n  }),\n});\nexport type NotificationChannel = z.infer<typeof NotificationChannelSchema>;\n\n// ============================================================================\n// CONFIG\n// ============================================================================\n\nexport const AutonomyConfigSchema = z.object({\n  enabled: z.boolean().default(true),\n  level: z.number().min(1).max(4).default(2),\n  boundaries: BoundariesSchema,\n  notifications: z.object({\n    channels: z.array(NotificationChannelSchema).default([]),\n    rateLimitPerMinute: z.number().default(10),\n  }),\n  approval: z.object({\n    maxPendingItems: z.number().default(50),\n    autoExpireHours: z.number().default(24),\n    notifyOnNewItem: z.boolean().default(true),\n  }),\n  audit: z.object({\n    retentionDays: z.number().default(90),\n    storageDir: z.string().default(\"./data/audit\"),\n  }),\n});\nexport type AutonomyConfig = z.infer<typeof AutonomyConfigSchema>;\n"],"mappings":"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","names":[]}