{"version":3,"sources":["../src/core/constants.ts"],"sourcesContent":["/**\n * Constants for Level 2 Autonomy\n *\n * Risk weights, thresholds, and category defaults\n */\n\nimport type { ActionCategory, RiskLevel } from \"./types.js\";\n\n// ============================================================================\n// RISK SCORING\n// ============================================================================\n\n/**\n * Risk factors and their weights (must sum to 1.0)\n */\nexport const RISK_FACTOR_WEIGHTS = {\n  financialValue: 0.35,      // How much money is involved\n  reversibility: 0.20,       // Can this be undone?\n  categoryRisk: 0.15,        // Base risk of this category\n  urgency: 0.15,             // Time sensitivity\n  externalVisibility: 0.15,  // Public-facing actions\n} as const;\n\n/**\n * Score thresholds for risk levels\n */\nexport const RISK_SCORE_THRESHOLDS = {\n  safe: 20,      // 0-20: auto-execute\n  low: 40,       // 21-40: auto with logging\n  medium: 60,    // 41-60: queue for batch\n  high: 80,      // 61-80: require approval\n  // 81-100: critical - escalate immediately\n} as const;\n\n/**\n * Base risk scores by category\n */\nexport const CATEGORY_BASE_RISK: Record<ActionCategory, number> = {\n  content: 15,       // Low risk - tweets, blogs\n  build: 35,         // Medium risk - code changes\n  trading: 55,       // Higher risk - money involved\n  deployment: 70,    // High risk - production changes\n  configuration: 85, // Very high risk - system settings\n};\n\n/**\n * Financial value thresholds for risk escalation\n */\nexport const FINANCIAL_RISK_THRESHOLDS = {\n  negligible: 10,    // Under $10 - no risk added\n  low: 50,           // $10-50 - +10 risk\n  medium: 100,       // $50-100 - +20 risk\n  high: 500,         // $100-500 - +35 risk\n  critical: 1000,    // Over $1000 - +50 risk\n} as const;\n\n// ============================================================================\n// DECISION ROUTING\n// ============================================================================\n\n/**\n * Default outcome by risk level for Level 2 autonomy\n */\nexport const RISK_LEVEL_OUTCOMES: Record<RiskLevel, string> = {\n  safe: \"auto_execute\",\n  low: \"auto_execute\",\n  medium: \"queue_approval\",\n  high: \"queue_approval\",\n  critical: \"escalate\",\n};\n\n/**\n * Categories that always require approval regardless of score\n */\nexport const ALWAYS_REQUIRE_APPROVAL: ActionCategory[] = [\n  \"deployment\",\n  \"configuration\",\n];\n\n/**\n * Action types that can always auto-execute (override category risk)\n */\nexport const SAFE_ACTION_TYPES = [\n  \"dca_buy\",\n  \"tweet_post\",\n  \"blog_draft\",\n  \"small_commit\",\n  \"log_activity\",\n] as const;\n\n/**\n * Action types that always require human approval\n */\nexport const DANGEROUS_ACTION_TYPES = [\n  \"deploy_production\",\n  \"delete_data\",\n  \"transfer_funds\",\n  \"change_api_keys\",\n  \"modify_permissions\",\n] as const;\n\n// ============================================================================\n// APPROVAL QUEUE\n// ============================================================================\n\n/**\n * Priority multipliers by urgency\n */\nexport const URGENCY_PRIORITY: Record<string, number> = {\n  low: 1,\n  normal: 2,\n  high: 5,\n  critical: 10,\n};\n\n/**\n * Escalation rules\n */\nexport const ESCALATION_RULES = {\n  ageHoursBeforeEscalation: 12,\n  ageHoursBeforeAutoReject: 48,\n  criticalRiskAutoEscalate: true,\n  highValueAutoEscalate: 200, // USD\n} as const;\n\n// ============================================================================\n// RATE LIMITS\n// ============================================================================\n\nexport const RATE_LIMITS = {\n  maxActionsPerMinute: 30,\n  maxNotificationsPerMinute: 10,\n  maxAutoExecutionsPerHour: 100,\n  cooldownAfterFailureMs: 60000, // 1 minute cooldown after failed action\n} as const;\n\n// ============================================================================\n// AUDIT\n// ============================================================================\n\nexport const AUDIT_CONFIG = {\n  hashAlgorithm: \"sha256\",\n  retentionDays: 90,\n  maxEntriesInMemory: 1000,\n} as const;\n"],"mappings":";AAeO,IAAM,sBAAsB;AAAA,EACjC,gBAAgB;AAAA;AAAA,EAChB,eAAe;AAAA;AAAA,EACf,cAAc;AAAA;AAAA,EACd,SAAS;AAAA;AAAA,EACT,oBAAoB;AAAA;AACtB;AAKO,IAAM,wBAAwB;AAAA,EACnC,MAAM;AAAA;AAAA,EACN,KAAK;AAAA;AAAA,EACL,QAAQ;AAAA;AAAA,EACR,MAAM;AAAA;AAAA;AAER;AAKO,IAAM,qBAAqD;AAAA,EAChE,SAAS;AAAA;AAAA,EACT,OAAO;AAAA;AAAA,EACP,SAAS;AAAA;AAAA,EACT,YAAY;AAAA;AAAA,EACZ,eAAe;AAAA;AACjB;AAKO,IAAM,4BAA4B;AAAA,EACvC,YAAY;AAAA;AAAA,EACZ,KAAK;AAAA;AAAA,EACL,QAAQ;AAAA;AAAA,EACR,MAAM;AAAA;AAAA,EACN,UAAU;AAAA;AACZ;AASO,IAAM,sBAAiD;AAAA,EAC5D,MAAM;AAAA,EACN,KAAK;AAAA,EACL,QAAQ;AAAA,EACR,MAAM;AAAA,EACN,UAAU;AACZ;AAKO,IAAM,0BAA4C;AAAA,EACvD;AAAA,EACA;AACF;AAKO,IAAM,oBAAoB;AAAA,EAC/B;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;AAKO,IAAM,yBAAyB;AAAA,EACpC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;AASO,IAAM,mBAA2C;AAAA,EACtD,KAAK;AAAA,EACL,QAAQ;AAAA,EACR,MAAM;AAAA,EACN,UAAU;AACZ;AAKO,IAAM,mBAAmB;AAAA,EAC9B,0BAA0B;AAAA,EAC1B,0BAA0B;AAAA,EAC1B,0BAA0B;AAAA,EAC1B,uBAAuB;AAAA;AACzB;AAMO,IAAM,cAAc;AAAA,EACzB,qBAAqB;AAAA,EACrB,2BAA2B;AAAA,EAC3B,0BAA0B;AAAA,EAC1B,wBAAwB;AAAA;AAC1B;AAMO,IAAM,eAAe;AAAA,EAC1B,eAAe;AAAA,EACf,eAAe;AAAA,EACf,oBAAoB;AACtB;","names":[]}