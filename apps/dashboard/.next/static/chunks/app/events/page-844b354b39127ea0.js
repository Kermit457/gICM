(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[38],{59581:function(e,t,r){Promise.resolve().then(r.bind(r,53002))},53002:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return B}});var n=r(82363),c=r(38954),s=r(86746),a=r(4897),o=r(89738),l=r(16818),i=r(68254),d=r(17490),u=r(11033),g=r(40922),m=r(12851),x=r(81277),b=r(47302),h=r(7601),v=r(35250),p=r(56086),f=r(90935),y=r(60195),N=r(82720);let j={brain:{icon:s.Z,color:"text-purple-400"},money:{icon:a.Z,color:"text-green-400"},growth:{icon:o.Z,color:"text-blue-400"},product:{icon:l.Z,color:"text-orange-400"},hunter:{icon:i.Z,color:"text-gicm-primary"},autonomy:{icon:d.Z,color:"text-yellow-400"}},S={action:{color:"text-gicm-primary",bgColor:"bg-gicm-primary/10"},decision:{color:"text-purple-400",bgColor:"bg-purple-500/10"},discovery:{color:"text-blue-400",bgColor:"bg-blue-500/10"},error:{color:"text-red-400",bgColor:"bg-red-500/10"},success:{color:"text-green-400",bgColor:"bg-green-500/10"},info:{color:"text-gray-400",bgColor:"bg-gray-500/10"}};function w(e){let{category:t}=e;switch(t){case"error":return(0,n.jsx)(u.Z,{className:"w-4 h-4"});case"success":return(0,n.jsx)(g.Z,{className:"w-4 h-4"});case"action":return(0,n.jsx)(m.Z,{className:"w-4 h-4"});default:return(0,n.jsx)(x.Z,{className:"w-4 h-4"})}}function C(e){var t,r;let{event:s}=e,[a,o]=(0,c.useState)(!1),l=null!==(t=j[s.source])&&void 0!==t?t:{icon:m.Z,color:"text-gray-400"},i=null!==(r=S[s.category])&&void 0!==r?r:S.info,d=l.icon;return(0,n.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-lg overflow-hidden",children:[(0,n.jsxs)("div",{className:"p-4 flex items-start gap-4 cursor-pointer hover:bg-white/5 transition-colors",onClick:()=>o(!a),children:[(0,n.jsx)("div",{className:"p-2 rounded-lg ".concat(i.bgColor),children:(0,n.jsx)(d,{className:"w-5 h-5 ".concat(l.color)})}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,n.jsx)("span",{className:"text-xs px-2 py-0.5 rounded ".concat(i.bgColor," ").concat(i.color),children:s.category}),(0,n.jsx)("span",{className:"text-xs text-gray-500",children:s.source})]}),(0,n.jsx)("div",{className:"font-medium",children:s.type}),(0,n.jsxs)("div",{className:"text-sm text-gray-400 flex items-center gap-2 mt-1",children:[(0,n.jsx)(b.Z,{className:"w-3 h-3"}),function(e){let t=new Date(e),r=new Date().getTime()-t.getTime();return r<6e4?"Just now":r<36e5?"".concat(Math.floor(r/6e4),"m ago"):r<864e5?"".concat(Math.floor(r/36e5),"h ago"):t.toLocaleDateString()}(s.timestamp)," â€¢ ",new Date(s.timestamp).toLocaleTimeString()]})]}),(0,n.jsx)(h.Z,{className:"w-5 h-5 text-gray-500 transition-transform ".concat(a?"rotate-180":"")})]}),a&&(0,n.jsx)("div",{className:"px-4 pb-4 border-t border-gicm-border",children:(0,n.jsx)("div",{className:"mt-3 p-3 bg-black/30 rounded-lg font-mono text-xs overflow-x-auto",children:(0,n.jsx)("pre",{children:JSON.stringify(s.payload,null,2)})})})]})}function k(e){let{sources:t,categories:r,selectedSource:c,selectedCategory:s,onSourceChange:a,onCategoryChange:o}=e;return(0,n.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gicm-card border border-gicm-border rounded-lg",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 text-gray-400",children:[(0,n.jsx)(v.Z,{className:"w-4 h-4"}),(0,n.jsx)("span",{className:"text-sm",children:"Filters:"})]}),(0,n.jsxs)("select",{value:c,onChange:e=>a(e.target.value),className:"bg-white/5 border border-gicm-border rounded px-3 py-1.5 text-sm",children:[(0,n.jsx)("option",{value:"",children:"All Sources"}),t.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]}),(0,n.jsxs)("select",{value:s,onChange:e=>o(e.target.value),className:"bg-white/5 border border-gicm-border rounded px-3 py-1.5 text-sm",children:[(0,n.jsx)("option",{value:"",children:"All Categories"}),r.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]})}function E(e){let{events:t}=e,r=t.reduce((e,t)=>(e[t.source]=(e[t.source]||0)+1,e),{}),c=t.reduce((e,t)=>(e[t.category]=(e[t.category]||0)+1,e),{});return(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-lg p-4",children:[(0,n.jsx)("h4",{className:"text-sm text-gray-400 mb-3",children:"By Source"}),(0,n.jsx)("div",{className:"space-y-2",children:Object.entries(r).map(e=>{var t;let[r,c]=e,s=null!==(t=j[r])&&void 0!==t?t:{icon:m.Z,color:"text-gray-400"},a=s.icon;return(0,n.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(a,{className:"w-4 h-4 ".concat(s.color)}),(0,n.jsx)("span",{className:"capitalize",children:r})]}),(0,n.jsx)("span",{className:"font-medium",children:c})]},r)})})]}),(0,n.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-lg p-4",children:[(0,n.jsx)("h4",{className:"text-sm text-gray-400 mb-3",children:"By Category"}),(0,n.jsx)("div",{className:"space-y-2",children:Object.entries(c).map(e=>{var t;let[r,c]=e,s=null!==(t=S[r])&&void 0!==t?t:S.info;return(0,n.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(w,{category:r}),(0,n.jsx)("span",{className:"capitalize ".concat(s.color),children:r})]}),(0,n.jsx)("span",{className:"font-medium",children:c})]},r)})})]})]})}function B(){let[e,t]=(0,c.useState)(!1),[r,s]=(0,c.useState)(!0),[a,o]=(0,c.useState)([]),[l,i]=(0,c.useState)(""),[d,u]=(0,c.useState)(""),g=(0,c.useRef)(null),x=(0,y.s)({autoReconnect:!0,reconnectDelay:3e3,onEvent:e=>{o(t=>t.some(t=>t.id===e.id)?t:[e,...t].slice(0,100))}}),b=(0,c.useCallback)(async()=>{var e;s(!0);let t=await f.PK.getEvents(100);o(null!==(e=null==t?void 0:t.events)&&void 0!==e?e:[]),s(!1)},[]);(0,c.useEffect)(()=>(t(!0),b(),()=>{g.current&&clearInterval(g.current)}),[b]),(0,c.useEffect)(()=>{g.current&&clearInterval(g.current);let e=x.isConnected?3e4:5e3;return g.current=setInterval(b,e),()=>{g.current&&clearInterval(g.current)}},[x.isConnected,b]);let h=[...new Set(a.map(e=>e.source))],v=[...new Set(a.map(e=>e.category))],j=a.filter(e=>(!l||e.source===l)&&(!d||e.category===d));return e?(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-3",children:[(0,n.jsx)(m.Z,{className:"w-8 h-8 text-gicm-primary"}),"Event Stream"]}),(0,n.jsx)("p",{className:"text-gray-400 mt-1",children:"Real-time audit trail of all system events"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(N.Y,{status:x.status,isRealtime:x.isConnected,compact:!0}),(0,n.jsxs)("button",{onClick:()=>b(),className:"flex items-center gap-2 px-4 py-2 bg-white/5 hover:bg-white/10 rounded-lg transition-colors",children:[(0,n.jsx)(p.Z,{className:"w-4 h-4 ".concat(r?"animate-spin":"")}),"Refresh"]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,n.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-lg p-4",children:[(0,n.jsx)("div",{className:"text-sm text-gray-400 mb-1",children:"Total Events"}),(0,n.jsx)("div",{className:"text-2xl font-bold text-gicm-primary",children:a.length})]}),(0,n.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-lg p-4",children:[(0,n.jsx)("div",{className:"text-sm text-gray-400 mb-1",children:"Sources"}),(0,n.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:h.length})]}),(0,n.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-lg p-4",children:[(0,n.jsx)("div",{className:"text-sm text-gray-400 mb-1",children:"Categories"}),(0,n.jsx)("div",{className:"text-2xl font-bold text-purple-400",children:v.length})]}),(0,n.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-lg p-4",children:[(0,n.jsx)("div",{className:"text-sm text-gray-400 mb-1",children:"Filtered"}),(0,n.jsx)("div",{className:"text-2xl font-bold text-green-400",children:j.length})]})]}),(0,n.jsx)(E,{events:a}),(0,n.jsx)(k,{sources:h,categories:v,selectedSource:l,selectedCategory:d,onSourceChange:i,onCategoryChange:u}),(0,n.jsx)("div",{className:"space-y-3",children:0===j.length?(0,n.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-xl p-8 text-center",children:[(0,n.jsx)(m.Z,{className:"w-12 h-12 text-gray-500 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-400",children:"No events found"}),(0,n.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:0===a.length?"Start the Integration Hub to see events":"Try adjusting your filters"})]}):j.map(e=>(0,n.jsx)(C,{event:e},e.id))})]}):(0,n.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,n.jsx)("div",{className:"text-gray-500",children:"Loading Events..."})})}},82720:function(e,t,r){"use strict";r.d(t,{Y:function(){return o}});var n=r(82363),c=r(15189),s=r(63283);let a={connected:{icon:c.Z,label:"Real-time",color:"text-green-400",dot:"bg-green-400 animate-pulse",bg:"bg-green-500/10 border-green-500/30"},connecting:{icon:c.Z,label:"Connecting...",color:"text-yellow-400",dot:"bg-yellow-400 animate-pulse",bg:"bg-yellow-500/10 border-yellow-500/30"},disconnected:{icon:s.Z,label:"Offline",color:"text-gray-400",dot:"bg-gray-400",bg:"bg-gray-500/10 border-gray-500/30"},error:{icon:s.Z,label:"Error",color:"text-red-400",dot:"bg-red-400",bg:"bg-red-500/10 border-red-500/30"}};function o(e){let{status:t,isRealtime:r,compact:c=!1}=e,s=a[t]||a.disconnected,o=s.icon;return c?(0,n.jsxs)("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-full ".concat(s.bg," border"),children:[(0,n.jsx)("span",{className:"w-2 h-2 rounded-full ".concat(s.dot)}),(0,n.jsx)("span",{className:"text-xs font-medium ".concat(s.color),children:s.label})]}):(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg ".concat(s.bg," border"),children:[(0,n.jsx)(o,{className:"w-4 h-4 ".concat(s.color)}),(0,n.jsx)("span",{className:"text-xs font-medium ".concat(s.color),children:r?"Real-time":s.label})]})})}},60195:function(e,t,r){"use strict";r.d(t,{s:function(){return a}});var n=r(38954);let c=r(32608).env.NEXT_PUBLIC_WS_URL||"ws://localhost:3001/ws",s={autoReconnect:!0,reconnectDelay:3e3,maxReconnectAttempts:10,heartbeat:!0,heartbeatInterval:3e4,rooms:[],onEvent:()=>{},onMessage:()=>{},onStatusChange:()=>{}};function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={...s,...e},[r,a]=(0,n.useState)("disconnected"),[o,l]=(0,n.useState)([]),[i,d]=(0,n.useState)(null),[u,g]=(0,n.useState)(null),m=(0,n.useRef)(null),x=(0,n.useRef)(0),b=(0,n.useRef)(null),h=(0,n.useRef)(null),v=(0,n.useRef)(!0),p=(0,n.useCallback)(e=>{v.current&&(a(e),t.onStatusChange(e))},[t]),f=(0,n.useCallback)(()=>{h.current&&(clearInterval(h.current),h.current=null)},[]),y=(0,n.useCallback)(()=>{var e;f(),t.heartbeat&&(null===(e=m.current)||void 0===e?void 0:e.readyState)===WebSocket.OPEN&&(h.current=setInterval(()=>{var e;(null===(e=m.current)||void 0===e?void 0:e.readyState)===WebSocket.OPEN&&m.current.send(JSON.stringify({type:"ping"}))},t.heartbeatInterval))},[t.heartbeat,t.heartbeatInterval,f]),N=(0,n.useCallback)(()=>{b.current&&(clearTimeout(b.current),b.current=null),f(),m.current&&(m.current.close(),m.current=null),x.current=0,p("disconnected")},[f,p]),j=(0,n.useCallback)(()=>{var e,r;if((null===(e=m.current)||void 0===e?void 0:e.readyState)!==WebSocket.CONNECTING&&(null===(r=m.current)||void 0===r?void 0:r.readyState)!==WebSocket.OPEN){m.current&&m.current.close(),p("connecting"),g(null);try{let e=new WebSocket(c);m.current=e,e.onopen=()=>{v.current&&(x.current=0,p("connected"),y(),e.send(JSON.stringify({type:"subscribe",channels:["events","status","metrics"]})),t.rooms.length>0&&e.send(JSON.stringify({action:"subscribe",rooms:t.rooms})))},e.onmessage=e=>{if(v.current)try{let r=JSON.parse(e.data);if(d(r),t.onMessage(r),"event"===r.type&&r.payload){let e=r.payload;l(t=>[e,...t].slice(0,100)),t.onEvent(e)}}catch(e){console.warn("Failed to parse WebSocket message:",e)}},e.onerror=e=>{v.current&&(console.error("WebSocket error:",e),g("Connection error"),p("error"))},e.onclose=e=>{if(v.current){if(f(),1e3===e.code){p("disconnected");return}if(p("disconnected"),t.autoReconnect&&(0===t.maxReconnectAttempts||x.current<t.maxReconnectAttempts)){x.current++;let e=t.reconnectDelay*Math.min(x.current,5);b.current=setTimeout(()=>{v.current&&j()},e)}}}}catch(e){console.error("Failed to create WebSocket:",e),g(e instanceof Error?e.message:"Failed to connect"),p("error")}}},[t,p,y,f]),S=(0,n.useCallback)(e=>{var t;return(null===(t=m.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN&&(m.current.send(JSON.stringify(e)),!0)},[]),w=(0,n.useCallback)(()=>{l([])},[]),C=(0,n.useCallback)(e=>{var t;return(null===(t=m.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN&&e.length>0&&(m.current.send(JSON.stringify({action:"subscribe",rooms:e})),!0)},[]),k=(0,n.useCallback)(e=>{var t;return(null===(t=m.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN&&e.length>0&&(m.current.send(JSON.stringify({action:"unsubscribe",rooms:e})),!0)},[]);return(0,n.useEffect)(()=>(v.current=!0,j(),()=>{v.current=!1,N()}),[j,N]),{status:r,events:o,lastMessage:i,error:u,isConnected:"connected"===r,reconnectAttempts:x.current,connect:j,disconnect:N,send:S,clearEvents:w,subscribe:C,unsubscribe:k}}},90935:function(e,t,r){"use strict";r.d(t,{Lf:function(){return c},PK:function(){return o},yu:function(){return n}});let n="http://localhost:3100",c=n.replace(/^http/,"ws")+"/ws";async function s(e){try{let t=await fetch("".concat(n,"/api").concat(e),{signal:AbortSignal.timeout(5e3),cache:"no-store"});if(!t.ok)return null;return t.json()}catch(e){return null}}async function a(e,t){try{let r=await fetch("".concat(n,"/api").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:t?JSON.stringify(t):void 0,signal:AbortSignal.timeout(1e4)});if(!r.ok)return null;return r.json()}catch(e){return null}}let o={getStatus:()=>s("/status"),getBrain:()=>s("/brain/status"),getBrainStatus:()=>s("/brain/status"),getBrainStats:()=>s("/brain/stats"),getBrainRecent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return s("/brain/recent?limit=".concat(e))},getBrainPatterns:()=>s("/brain/patterns"),getBrainPredictions:()=>s("/brain/predictions"),searchBrain:e=>a("/brain/search",{query:e}),triggerIngest:e=>a("/brain/ingest",{source:e}),getBrainKnowledgeById:e=>s("/brain/knowledge/".concat(e)),getBrainKnowledgeByTopic:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return s("/brain/knowledge/topic/".concat(e,"?limit=").concat(t))},getBrainKnowledgeSimilar:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return s("/brain/knowledge/".concat(e,"/similar?limit=").concat(t))},getBrainPatternById:e=>s("/brain/patterns/".concat(e)),getBrainPredictionById:e=>s("/brain/predictions/".concat(e)),generateBrainPredictions:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return a("/brain/predictions/generate",{type:e,count:t})},getBrainIngestStats:()=>s("/brain/ingest/stats"),getTreasury:()=>s("/treasury"),getMoney:()=>s("/money/status"),getGrowth:()=>s("/growth/status"),getProduct:()=>s("/product/status"),getHunter:()=>s("/hunter/status"),getAutonomy:()=>s("/autonomy/status"),getPredictions:()=>s("/predictions/status"),getEvents:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1?arguments[1]:void 0;return s("/events?limit=".concat(e).concat(t?"&category=".concat(t):""))},getEnrichedEvents:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;return s("/events/enriched?limit=".concat(e).concat(t?"&category=".concat(t):"").concat(r?"&severity=".concat(r):""))},getEventCategories:()=>s("/events/categories"),startBrain:()=>a("/brain/start"),stopBrain:()=>a("/brain/stop"),triggerPhase:e=>a("/brain/phase",{phase:e}),runDiscovery:()=>a("/discovery/run"),generateContent:e=>a("/content/generate",{type:e})}}},function(e){e.O(0,[4455,6829,8854,1744],function(){return e(e.s=59581)}),_N_E=e.O()}]);