(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9106],{21913:function(e,t,s){Promise.resolve().then(s.bind(s,65957))},65957:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var a=s(82363),l=s(38954),r=s(89738),n=s(70328),i=s(30680),c=s(11374),d=s(56086),x=s(4897),m=s(45482),o=s(68254),h=s(12851),u=s(1289),p=s(47302),g=s(71644),y=s(18903),j=s(38532),f=s(1749),b=s(60195),v=s(82720);let N={totalValue:0,totalPnl:0,totalPnlPercent:0,dayPnl:0,dayPnlPercent:0,weekPnl:0,weekPnlPercent:0,winRate:0,totalTrades:0,avgTradeSize:0,bestTrade:0,worstTrade:0};function w(e){return new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}function P(e){let{title:t,value:s,change:l,changePercent:i,icon:c}=e,d=(null!=l?l:0)>=0;return(0,a.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)(c,{className:"w-5 h-5 text-gicm-primary"}),void 0!==l&&(0,a.jsxs)("span",{className:"flex items-center gap-1 text-sm ".concat(d?"text-green-400":"text-red-400"),children:[d?(0,a.jsx)(r.Z,{className:"w-4 h-4"}):(0,a.jsx)(n.Z,{className:"w-4 h-4"}),void 0!==i&&"".concat(i.toFixed(2),"%")]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:t}),(0,a.jsx)("p",{className:"text-2xl font-bold text-white mt-1",children:s}),void 0!==l&&(0,a.jsxs)("p",{className:"text-sm mt-1 ".concat(d?"text-green-400":"text-red-400"),children:[d?"+":"",w(l)]})]})}function k(){let[e,t]=(0,l.useState)("week"),[s,n]=(0,l.useState)(N),[k,T]=(0,l.useState)([]),[Z,S]=(0,l.useState)([]),[L,A]=(0,l.useState)([]),[D,M]=(0,l.useState)([]),[C,$]=(0,l.useState)(!0),[R,F]=(0,l.useState)(!1),z=(0,l.useRef)(null),E=(0,b.s)({autoReconnect:!0,reconnectDelay:3e3,onEvent:e=>{var t,s,a;((null===(t=e.type)||void 0===t?void 0:t.includes("trading"))||(null===(s=e.type)||void 0===s?void 0:s.includes("portfolio"))||(null===(a=e.type)||void 0===a?void 0:a.includes("trade")))&&V()}}),V=(0,l.useCallback)(async()=>{try{let[m,o,h,u,p]=await Promise.all([f.e.getStatus(),f.e.getPositions(),f.e.getTradesToday(),f.e.getPortfolioMetrics(),f.e.getDailyPnL(7)]);if(m||u){var e,t,s,a,l,r,i,c,d,x;F(!0);let o=null!==(e=null==u?void 0:u.totalValue)&&void 0!==e?e:0;n({totalValue:o,totalPnl:null!==(s=null!==(t=null==u?void 0:u.totalPnL)&&void 0!==t?t:null==m?void 0:m.totalPnL)&&void 0!==s?s:0,totalPnlPercent:null!==(a=null==m?void 0:m.winRate)&&void 0!==a?a:0,dayPnl:null!==(l=null==m?void 0:m.dailyPnL)&&void 0!==l?l:0,dayPnlPercent:(null==m?void 0:m.dailyPnL)&&o>0?m.dailyPnL/o*100:0,weekPnl:null!==(r=null==m?void 0:m.weeklyPnL)&&void 0!==r?r:0,weekPnlPercent:(null==m?void 0:m.weeklyPnL)&&o>0?m.weeklyPnL/o*100:0,winRate:null!==(c=null!==(i=null==m?void 0:m.winRate)&&void 0!==i?i:null==u?void 0:u.winRate)&&void 0!==c?c:0,totalTrades:null!==(d=null==m?void 0:m.positions)&&void 0!==d?d:0,avgTradeSize:null!==(x=null==u?void 0:u.avgTradeSize)&&void 0!==x?x:0,bestTrade:0,worstTrade:0})}if(o&&Array.isArray(o)&&o.length>0){let e=o.reduce((e,t)=>e+t.quantity*t.currentPrice,0),t=o.map(t=>({asset:t.token,value:t.quantity*t.currentPrice,percent:e>0?t.quantity*t.currentPrice/e*100:0,pnl:t.pnl,pnlPercent:t.pnlPercent}));T(t)}if(h&&Array.isArray(h)&&h.length>0){let e=h.map(e=>({id:e.id,timestamp:e.timestamp,type:e.type,asset:e.asset,amount:e.amount,price:e.price,total:e.total,pnl:e.pnl,pnlPercent:e.pnlPercent,status:e.status}));S(e)}if(p&&Array.isArray(p)&&p.length>0){let e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t=p.map(t=>({date:e[new Date(t.date).getDay()],pnl:t.pnl}));A(t);let s=0,a=p.map((e,t)=>(s+=e.pnl,{date:"D".concat(t+1),value:s}));M(a)}}catch(e){console.error("[Trading] Failed to fetch data:",e)}finally{$(!1)}},[]);(0,l.useEffect)(()=>(V(),()=>{z.current&&clearInterval(z.current)}),[V]),(0,l.useEffect)(()=>{z.current&&clearInterval(z.current);let e=E.isConnected?3e4:1e4;return z.current=setInterval(V,e),()=>{z.current&&clearInterval(z.current)}},[E.isConnected,V]);let _=Math.max(...L.map(e=>Math.abs(e.pnl)),1),I=Math.max(...D.map(e=>e.value),1);return(0,a.jsx)("div",{className:"min-h-screen bg-gicm-dark p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[(0,a.jsx)(i.Z,{className:"w-7 h-7 text-gicm-primary"}),"Trading Analytics"]}),(0,a.jsx)("p",{className:"text-gray-400 mt-1",children:"Portfolio performance, PnL tracking, and trade history"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"flex bg-gicm-card rounded-lg p-1",children:["day","week","month","all"].map(s=>(0,a.jsx)("button",{onClick:()=>t(s),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat(e===s?"bg-gicm-primary text-black":"text-gray-400 hover:text-white"),children:"all"===s?"All":s.charAt(0).toUpperCase()+s.slice(1)},s))}),(0,a.jsx)(v.Y,{status:E.status,isRealtime:E.isConnected,compact:!0}),R&&(0,a.jsxs)("div",{className:"flex items-center gap-2 px-2 py-1 bg-green-500/20 border border-green-500/30 rounded-lg",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),(0,a.jsx)("span",{className:"text-xs text-green-400 font-medium",children:"Data Live"})]}),(0,a.jsx)("button",{onClick:()=>{$(!0),V()},disabled:C,className:"p-2 hover:bg-gicm-card rounded-lg transition-colors disabled:opacity-50",children:C?(0,a.jsx)(c.Z,{className:"w-5 h-5 text-gray-400 animate-spin"}):(0,a.jsx)(d.Z,{className:"w-5 h-5 text-gray-400"})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[(0,a.jsx)(P,{title:"Portfolio Value",value:"$".concat(w(s.totalValue)),change:s.dayPnl,changePercent:s.dayPnlPercent,icon:x.Z}),(0,a.jsx)(P,{title:"Total PnL",value:"$".concat(w(s.totalPnl)),changePercent:s.totalPnlPercent,change:s.totalPnl,icon:m.Z}),(0,a.jsx)(P,{title:"Win Rate",value:"".concat(s.winRate,"%"),icon:o.Z}),(0,a.jsx)(P,{title:"Total Trades",value:s.totalTrades.toString(),icon:h.Z})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-xl p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(i.Z,{className:"w-5 h-5 text-gicm-primary"}),"Daily PnL"]}),(0,a.jsx)("div",{className:"h-48 flex items-end justify-between gap-2",children:L.map((e,t)=>{let s=Math.abs(e.pnl)/_*100,l=e.pnl>=0;return(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center",children:[(0,a.jsx)("div",{className:"w-full flex flex-col items-center justify-end h-40",children:(0,a.jsx)("div",{className:"w-full rounded-t transition-all ".concat(l?"bg-green-500/50 hover:bg-green-500":"bg-red-500/50 hover:bg-red-500"),style:{height:"".concat(s,"%")}})}),(0,a.jsx)("span",{className:"text-xs text-gray-500 mt-2",children:e.date}),(0,a.jsxs)("span",{className:"text-xs ".concat(l?"text-green-400":"text-red-400"),children:[l?"+":"",e.pnl]})]},t)})})]}),(0,a.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-xl p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(r.Z,{className:"w-5 h-5 text-gicm-primary"}),"Cumulative PnL"]}),(0,a.jsx)("div",{className:"h-48 flex items-end justify-between gap-2",children:D.map((e,t)=>{let s=e.value/I*100;return(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center",children:[(0,a.jsx)("div",{className:"w-full flex flex-col items-center justify-end h-40",children:(0,a.jsx)("div",{className:"w-full bg-gicm-primary/50 hover:bg-gicm-primary rounded-t transition-all",style:{height:"".concat(s,"%")}})}),(0,a.jsx)("span",{className:"text-xs text-gray-500 mt-2",children:e.date}),(0,a.jsxs)("span",{className:"text-xs text-gicm-primary",children:["$",e.value]})]},t)})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 bg-gicm-card border border-gicm-border rounded-xl p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"w-5 h-5 text-gicm-primary"}),"Asset Allocation"]}),(0,a.jsx)("div",{className:"space-y-4",children:k.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-gicm-primary/20 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-bold text-gicm-primary",children:e.asset[0]})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"font-medium text-white",children:e.asset}),(0,a.jsxs)("span",{className:"text-white",children:["$",w(e.value)]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"flex-1 h-2 bg-gicm-dark rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-gicm-primary rounded-full",style:{width:"".concat(e.percent,"%")}})}),(0,a.jsxs)("span",{className:"text-sm text-gray-400 w-12",children:[e.percent,"%"]}),(0,a.jsxs)("span",{className:"text-sm w-20 text-right ".concat(e.pnl>=0?"text-green-400":"text-red-400"),children:[e.pnl>=0?"+":"",e.pnlPercent.toFixed(1),"%"]})]})]})]},e.asset))})]}),(0,a.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-xl p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5 text-gicm-primary"}),"Trading Stats"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gicm-border",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Avg Trade Size"}),(0,a.jsxs)("span",{className:"text-white font-medium",children:["$",w(s.avgTradeSize)]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gicm-border",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Best Trade"}),(0,a.jsxs)("span",{className:"text-green-400 font-medium",children:["+$",w(s.bestTrade)]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gicm-border",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Worst Trade"}),(0,a.jsxs)("span",{className:"text-red-400 font-medium",children:["$",w(s.worstTrade)]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gicm-border",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Week PnL"}),(0,a.jsxs)("span",{className:s.weekPnl>=0?"text-green-400":"text-red-400",children:[s.weekPnl>=0?"+":"","$",w(s.weekPnl)]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center py-2",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Day PnL"}),(0,a.jsxs)("span",{className:s.dayPnl>=0?"text-green-400":"text-red-400",children:[s.dayPnl>=0?"+":"","$",w(s.dayPnl)]})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[(0,a.jsx)(p.Z,{className:"w-5 h-5 text-gicm-primary"}),"Recent Trades"]}),(0,a.jsxs)("button",{className:"flex items-center gap-2 px-3 py-1.5 text-sm text-gray-400 hover:text-white bg-white/5 rounded-lg transition-colors",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4"}),"Export"]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gicm-border",children:[(0,a.jsx)("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-400",children:"Time"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-400",children:"Type"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-400",children:"Asset"}),(0,a.jsx)("th",{className:"text-right py-3 px-4 text-sm font-medium text-gray-400",children:"Amount"}),(0,a.jsx)("th",{className:"text-right py-3 px-4 text-sm font-medium text-gray-400",children:"Price"}),(0,a.jsx)("th",{className:"text-right py-3 px-4 text-sm font-medium text-gray-400",children:"Total"}),(0,a.jsx)("th",{className:"text-right py-3 px-4 text-sm font-medium text-gray-400",children:"PnL"})]})}),(0,a.jsx)("tbody",{children:Z.map(e=>(0,a.jsxs)("tr",{className:"border-b border-gicm-border/50 hover:bg-white/5",children:[(0,a.jsx)("td",{className:"py-3 px-4 text-sm text-gray-400",children:function(e){let t=Date.now()-e;return t<36e5?"".concat(Math.floor(t/6e4),"m ago"):t<864e5?"".concat(Math.floor(t/36e5),"h ago"):new Date(e).toLocaleDateString()}(e.timestamp)}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("span",{className:"flex items-center gap-1 text-sm ".concat("buy"===e.type?"text-green-400":"text-red-400"),children:["buy"===e.type?(0,a.jsx)(y.Z,{className:"w-4 h-4"}):(0,a.jsx)(j.Z,{className:"w-4 h-4"}),e.type.toUpperCase()]})}),(0,a.jsx)("td",{className:"py-3 px-4 text-white font-medium",children:e.asset}),(0,a.jsx)("td",{className:"py-3 px-4 text-right text-white",children:w(e.amount)}),(0,a.jsxs)("td",{className:"py-3 px-4 text-right text-gray-400",children:["$",e.price<.01?e.price.toFixed(6):w(e.price)]}),(0,a.jsxs)("td",{className:"py-3 px-4 text-right text-white",children:["$",w(e.total)]}),(0,a.jsx)("td",{className:"py-3 px-4 text-right",children:void 0!==e.pnl?(0,a.jsxs)("span",{className:e.pnl>=0?"text-green-400":"text-red-400",children:[e.pnl>=0?"+":"","$",w(e.pnl)]}):(0,a.jsx)("span",{className:"text-gray-500",children:"-"})})]},e.id))})]})})]})]})})}},12851:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(13024).Z)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},30680:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(13024).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},71644:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(13024).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},68254:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(13024).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])}},function(e){e.O(0,[8855,6829,8854,1744],function(){return e(e.s=21913)}),_N_E=e.O()}]);