(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6843],{10516:function(e,t,s){Promise.resolve().then(s.bind(s,96583))},96583:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var a=s(82363),l=s(38954),n=s(89504),i=s(42421);let r="https://bscpftwzsgmuhxaceqhy.supabase.co",d="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJzY3BmdHd6c2dtdWh4YWNlcWh5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ0MDM5NTQsImV4cCI6MjA3OTk3OTk1NH0.UtD1uV94N8b2gaLV6H_4cZ_mcuHSxsC2DOyFXYhHqBA",c=r&&d?(0,n.eI)(r,d):null;function o(){let[e,t]=(0,l.useState)([]),[s,n]=(0,l.useState)(!0),[r,d]=(0,l.useState)(null);async function o(){if(!c){n(!1);return}n(!0);let{data:e}=await c.from("posts").select("*").order("created_at",{ascending:!1});t(e||[]),n(!1)}async function h(e){if(!c)return;let{error:t}=await c.from("posts").update({status:"published",published_at:new Date().toISOString()}).eq("id",e);if(t){alert("Failed to update status");return}try{let t=await fetch("/api/publish",{method:"POST",body:JSON.stringify({post_id:e,platforms:["devto","hashnode"]})}),s=await t.json();console.log("Syndication result:",s),alert("Published & Syndicated!")}catch(e){alert("Published locally, but syndication API failed.")}o()}async function u(e){let t=await fetch("/api/content/repurpose-thread",{method:"POST",body:JSON.stringify({post_id:e})}),s=await t.json();s.thread?d(s.thread):alert("Failed to generate thread")}return(0,l.useEffect)(()=>{o()},[]),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Content Management"}),(0,a.jsx)("button",{onClick:()=>o(),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Refresh"})]}),r&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl max-w-lg w-full p-6 max-h-[80vh] overflow-y-auto",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Generated Thread"}),(0,a.jsx)("div",{className:"space-y-4",children:r.map((e,t)=>(0,a.jsxs)("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200 text-sm",children:[(0,a.jsxs)("span",{className:"text-xs text-slate-400 font-mono mb-1 block",children:["Tweet ",t+1]}),e]},t))}),(0,a.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:()=>d(null),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Close"}),(0,a.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(r.join("\n\n---\n\n")),alert("Copied to clipboard!")},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Copy All"})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,a.jsx)("thead",{className:"bg-gray-50 text-gray-500 font-medium border-b border-gray-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4",children:"Title"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Type"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Created"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-100",children:e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 font-medium text-gray-900 max-w-md truncate",children:e.title}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.type})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)(x,{status:e.status})}),(0,a.jsx)("td",{className:"px-6 py-4 text-gray-500",children:(0,i.WU)(new Date(e.created_at),"MMM d, yyyy")}),(0,a.jsxs)("td",{className:"px-6 py-4 text-right space-x-2",children:[(0,a.jsx)("button",{onClick:()=>u(e.id),className:"text-blue-600 hover:text-blue-800 font-medium",children:"Thread"}),"published"!==e.status&&(0,a.jsx)("button",{onClick:()=>h(e.id),className:"text-green-600 hover:text-green-800 font-medium",children:"Publish"})]})]},e.id))})]})})]})}function x(e){let{status:t}=e,s={draft:"bg-yellow-100 text-yellow-800",review:"bg-purple-100 text-purple-800",published:"bg-green-100 text-green-800",archived:"bg-gray-100 text-gray-800"};return(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize ".concat(s[t]||s.draft),children:t})}}},function(e){e.O(0,[9504,2421,6829,8854,1744],function(){return e(e.s=10516)}),_N_E=e.O()}]);