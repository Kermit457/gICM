(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3744],{39610:function(e,t,s){Promise.resolve().then(s.bind(s,81243))},81243:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return O}});var a=s(82363),r=s(38954),i=s(13494),c=s(89738),n=s(70328),l=s(56086),o=s(30680),d=s(33823),x=s(71644),m=s(67888),h=s(46610),u=s(45482),g=s(54618),j=s(40487),p=s(47600),b=s(12232),f=s(6350),y=s(82227),N=s(45738),v=s(355),k=s(25913),w=s(5128),C=s(3157),S=s(76325),F=s(6216),T=s(24071),K=s(85222);let E="#00FF88",R="#22C55E",M="#F59E0B",D=["#00FF88","#3B82F6","#8B5CF6","#F59E0B","#EF4444"];function Z(e){let{title:t,value:s,subtitle:r,icon:i,trend:l,trendValue:o}=e;return(0,a.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-xl p-5",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsx)("div",{className:"p-2 bg-gicm-primary/10 rounded-lg",children:(0,a.jsx)(i,{className:"w-5 h-5 text-gicm-primary"})}),l&&o&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs font-medium ".concat("up"===l?"text-green-400":"down"===l?"text-red-400":"text-gray-400"),children:["up"===l?(0,a.jsx)(c.Z,{className:"w-3 h-3"}):"down"===l?(0,a.jsx)(n.Z,{className:"w-3 h-3"}):null,o]})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-white mb-1",children:s}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:t}),r&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:r})]})}function B(e){let{active:t,payload:s,label:r}=e;return t&&s?(0,a.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-lg p-3 shadow-xl",children:[(0,a.jsx)("p",{className:"text-xs text-gray-400 mb-2",children:r}),s.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color}}),(0,a.jsxs)("span",{className:"text-gray-300",children:[e.name,":"]}),(0,a.jsx)("span",{className:"text-white font-medium",children:"number"==typeof e.value&&e.name.includes("Cost")?"$".concat(e.value.toFixed(4)):e.value.toLocaleString()})]},t))]}):null}function O(){let[e,t]=(0,r.useState)("week"),[s,c]=(0,r.useState)(!0),[n,O]=(0,r.useState)(null),P=(0,r.useCallback)(e=>{let t="day"===e?1:"week"===e?7:30,s=[];for(let e=t-1;e>=0;e--){let t=new Date;t.setDate(t.getDate()-e),s.push({date:t.toLocaleDateString("en-US",{month:"short",day:"numeric"}),executions:Math.floor(20+80*Math.random()),tokens:Math.floor(5e3+15e3*Math.random()),cost:.01+.09*Math.random(),successRate:85+15*Math.random()})}let a=s.reduce((e,t)=>e+t.executions,0),r=s.reduce((e,t)=>e+t.tokens,0),i=s.reduce((e,t)=>e+t.cost,0);return{period:e,totalExecutions:a,successRate:s.reduce((e,t)=>e+t.successRate,0)/t,totalTokens:r,totalCost:i,avgDuration:2500+2e3*Math.random(),topPipelines:[{name:"Token Analysis",count:Math.floor(.35*a)},{name:"Whale Tracker",count:Math.floor(.25*a)},{name:"Security Audit",count:Math.floor(.2*a)},{name:"Content Gen",count:Math.floor(.12*a)},{name:"Other",count:Math.floor(.08*a)}],dailyStats:s}},[]),z=(0,r.useCallback)(async()=>{c(!0);try{let t=await fetch("".concat("http://localhost:3100","/api/analytics/summary?period=").concat(e));if(t.ok){let e=await t.json();if(e.ok){O(e.summary),c(!1);return}}}catch(e){console.error("Failed to fetch analytics:",e)}O(P(e)),c(!1)},[e,P]);return((0,r.useEffect)(()=>{z()},[z]),s)?(0,a.jsx)("div",{className:"min-h-screen bg-gicm-bg flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.Z,{className:"w-8 h-8 text-gicm-primary mx-auto mb-3 animate-spin"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Loading analytics..."})]})}):n?(0,a.jsxs)("div",{className:"min-h-screen bg-gicm-bg text-white",children:[(0,a.jsx)("div",{className:"border-b border-gicm-border bg-gicm-card/50 backdrop-blur-sm",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(i.default,{href:"/pipelines",className:"p-2 hover:bg-white/5 rounded-lg transition-colors",children:(0,a.jsx)(d.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-3",children:[(0,a.jsx)(o.Z,{className:"w-7 h-7 text-gicm-primary"}),"Pipeline Analytics"]}),(0,a.jsx)("p",{className:"text-gray-400 text-sm",children:"Cost tracking, token usage, and execution metrics"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex items-center gap-1 p-1 bg-black/30 border border-gicm-border rounded-lg",children:["day","week","month"].map(s=>(0,a.jsx)("button",{onClick:()=>t(s),className:"px-3 py-1.5 text-sm rounded-md transition-colors ".concat(e===s?"bg-gicm-primary text-black font-medium":"text-gray-400 hover:text-white"),children:s.charAt(0).toUpperCase()+s.slice(1)},s))}),(0,a.jsx)("button",{onClick:z,className:"p-2 hover:bg-white/5 rounded-lg transition-colors",children:(0,a.jsx)(l.Z,{className:"w-5 h-5 text-gray-400"})}),(0,a.jsxs)("button",{onClick:()=>{if(!n)return;let t=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="pipeline-analytics-".concat(e,"-").concat(Date.now(),".json"),a.click()},className:"flex items-center gap-2 px-3 py-2 border border-gicm-border rounded-lg text-gray-300 hover:bg-white/5 transition-colors",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"}),"Export"]})]})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[(0,a.jsx)(Z,{title:"Total Executions",value:n.totalExecutions.toLocaleString(),icon:m.Z,trend:"up",trendValue:"+12.5%"}),(0,a.jsx)(Z,{title:"Success Rate",value:"".concat(n.successRate.toFixed(1),"%"),icon:h.Z,trend:n.successRate>90?"up":"down",trendValue:n.successRate>90?"+2.3%":"-1.5%"}),(0,a.jsx)(Z,{title:"Total Tokens",value:"".concat((n.totalTokens/1e3).toFixed(1),"K"),subtitle:"~$".concat((3e-6*n.totalTokens).toFixed(4)),icon:o.Z,trend:"up",trendValue:"+8.2%"}),(0,a.jsx)(Z,{title:"Total Cost",value:"$".concat(n.totalCost.toFixed(2)),subtitle:"37% saved with PTC",icon:u.Z,trend:"down",trendValue:"-15.3%"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[(0,a.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-xl p-5",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Executions Over Time"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(g.h,{width:"100%",height:"100%",children:(0,a.jsxs)(j.T,{data:n.dailyStats,children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"execGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:E,stopOpacity:.3}),(0,a.jsx)("stop",{offset:"100%",stopColor:E,stopOpacity:0})]})}),(0,a.jsx)(p.q,{strokeDasharray:"3 3",stroke:"#333"}),(0,a.jsx)(b.K,{dataKey:"date",stroke:"#666",fontSize:12}),(0,a.jsx)(f.B,{stroke:"#666",fontSize:12}),(0,a.jsx)(y.u,{content:(0,a.jsx)(B,{})}),(0,a.jsx)(N.u,{type:"monotone",dataKey:"executions",name:"Executions",stroke:E,fill:"url(#execGradient)",strokeWidth:2})]})})})]}),(0,a.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-xl p-5",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Token Usage"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(g.h,{width:"100%",height:"100%",children:(0,a.jsxs)(v.v,{data:n.dailyStats,children:[(0,a.jsx)(p.q,{strokeDasharray:"3 3",stroke:"#333"}),(0,a.jsx)(b.K,{dataKey:"date",stroke:"#666",fontSize:12}),(0,a.jsx)(f.B,{stroke:"#666",fontSize:12,tickFormatter:e=>"".concat((e/1e3).toFixed(0),"K")}),(0,a.jsx)(y.u,{content:(0,a.jsx)(B,{})}),(0,a.jsx)(k.$,{dataKey:"tokens",name:"Tokens",fill:"#3B82F6",radius:[4,4,0,0]})]})})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 bg-gicm-card border border-gicm-border rounded-xl p-5",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Cost Trend"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(g.h,{width:"100%",height:"100%",children:(0,a.jsxs)(w.w,{data:n.dailyStats,children:[(0,a.jsx)(p.q,{strokeDasharray:"3 3",stroke:"#333"}),(0,a.jsx)(b.K,{dataKey:"date",stroke:"#666",fontSize:12}),(0,a.jsx)(f.B,{stroke:"#666",fontSize:12,tickFormatter:e=>"$".concat(e.toFixed(2))}),(0,a.jsx)(y.u,{content:(0,a.jsx)(B,{})}),(0,a.jsx)(C.x,{type:"monotone",dataKey:"cost",name:"Cost",stroke:M,strokeWidth:2,dot:{fill:M,r:3}})]})})})]}),(0,a.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-xl p-5",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top Pipelines"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(g.h,{width:"100%",height:"100%",children:(0,a.jsxs)(S.u,{children:[(0,a.jsx)(F.b,{data:n.topPipelines,dataKey:"count",nameKey:"name",cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:2,children:n.topPipelines.map((e,t)=>(0,a.jsx)(T.b,{fill:D[t%D.length]},"cell-".concat(t)))}),(0,a.jsx)(y.u,{}),(0,a.jsx)(K.D,{layout:"vertical",align:"right",verticalAlign:"middle",formatter:e=>(0,a.jsx)("span",{className:"text-gray-300 text-xs",children:e})})]})})})]})]}),(0,a.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-xl p-5",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Success Rate"}),(0,a.jsx)("div",{className:"h-48",children:(0,a.jsx)(g.h,{width:"100%",height:"100%",children:(0,a.jsxs)(j.T,{data:n.dailyStats,children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"successGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:R,stopOpacity:.3}),(0,a.jsx)("stop",{offset:"100%",stopColor:R,stopOpacity:0})]})}),(0,a.jsx)(p.q,{strokeDasharray:"3 3",stroke:"#333"}),(0,a.jsx)(b.K,{dataKey:"date",stroke:"#666",fontSize:12}),(0,a.jsx)(f.B,{stroke:"#666",fontSize:12,domain:[70,100],tickFormatter:e=>"".concat(e,"%")}),(0,a.jsx)(y.u,{content:(0,a.jsx)(B,{})}),(0,a.jsx)(N.u,{type:"monotone",dataKey:"successRate",name:"Success Rate",stroke:R,fill:"url(#successGradient)",strokeWidth:2})]})})})]}),(0,a.jsx)("div",{className:"mt-6 p-5 bg-gicm-primary/10 border border-gicm-primary/20 rounded-xl",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-gicm-primary mb-1",children:"PTC Token Savings"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Programmatic Tool Calling saves ~37% on tokens by avoiding LLM planning overhead. Direct tool orchestration means faster execution and lower costs."})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-3xl font-bold text-gicm-primary",children:["$",(n.totalCost/.63-n.totalCost).toFixed(2)]}),(0,a.jsxs)("p",{className:"text-sm text-gray-400",children:["saved this ",e]})]})]})})]})]}):(0,a.jsx)("div",{className:"min-h-screen bg-gicm-bg flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(o.Z,{className:"w-12 h-12 text-gray-500 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-gray-400",children:"No analytics data available"})]})})}}},function(e){e.O(0,[3277,6195,6829,8854,1744],function(){return e(e.s=39610)}),_N_E=e.O()}]);