(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4109],{53759:function(e,t,s){Promise.resolve().then(s.bind(s,67889))},67889:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var n=s(82363),a=s(38954),i=s(30680),r=s(56086),c=s(12851),l=s(40922),o=s(45482),d=s(47302),x=s(67888),u=s(89497),m=s(11033),h=s(89738),g=s(70328),p=s(90935);function y(){var e;let[t,s]=(0,a.useState)("week"),[g,y]=(0,a.useState)(null),[f,v]=(0,a.useState)(null),[j,N]=(0,a.useState)(!0),[k,w]=(0,a.useState)(null);async function Z(){N(!0),w(null);try{let[e,s]=await Promise.all([fetch("".concat(p.yu,"/api/analytics/summary?period=").concat(t)),fetch("".concat(p.yu,"/api/analytics/tokens?period=").concat(t))]);if(e.ok){let t=await e.json();y(t.summary)}if(s.ok){let e=await s.json();v(e)}}catch(e){w("Failed to fetch analytics. Make sure the Integration Hub is running.")}finally{N(!1)}}(0,a.useEffect)(()=>{Z()},[t]);let M=e=>e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(1),"K"):e.toFixed(0),C=e=>"$".concat(e.toFixed(4));return(0,n.jsx)("div",{className:"min-h-screen bg-gicm-bg text-white p-6",children:(0,n.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[(0,n.jsx)(i.Z,{className:"w-6 h-6 text-gicm-primary"}),"Pipeline Analytics"]}),(0,n.jsx)("p",{className:"text-gray-400 mt-1",children:"Cost tracking, success rates, and token usage"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("div",{className:"flex bg-gicm-card rounded-lg p-1",children:["day","week","month"].map(e=>(0,n.jsx)("button",{onClick:()=>s(e),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat(t===e?"bg-gicm-primary text-black":"text-gray-400 hover:text-white"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,n.jsx)("button",{onClick:Z,disabled:j,className:"p-2 rounded-lg bg-gicm-card hover:bg-white/10 transition-colors disabled:opacity-50",children:(0,n.jsx)(r.Z,{className:"w-5 h-5 ".concat(j?"animate-spin":"")})})]})]}),k&&(0,n.jsx)("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4 text-red-400",children:k}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,n.jsx)(b,{title:"Total Executions",value:g?M(g.totalExecutions):"-",icon:c.Z,trend:null==g?void 0:g.executionTrend,loading:j}),(0,n.jsx)(b,{title:"Success Rate",value:g?"".concat(g.successRate.toFixed(1),"%"):"-",icon:l.Z,iconColor:g&&g.successRate>=80?"text-green-400":"text-yellow-400",loading:j}),(0,n.jsx)(b,{title:"Total Cost",value:g?C(g.totalCost):"-",icon:o.Z,trend:null==g?void 0:g.costTrend,loading:j}),(0,n.jsx)(b,{title:"Avg Duration",value:g?(e=g.avgDuration)<1e3?"".concat(e,"ms"):e<6e4?"".concat((e/1e3).toFixed(1),"s"):"".concat((e/6e4).toFixed(1),"m"):"-",icon:d.Z,loading:j})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{className:"lg:col-span-2 bg-gicm-card rounded-xl border border-gicm-border p-6",children:[(0,n.jsxs)("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,n.jsx)(x.Z,{className:"w-5 h-5 text-gicm-primary"}),"Token Usage"]}),f?(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-sm text-gray-400",children:"Total Tokens"}),(0,n.jsx)("p",{className:"text-2xl font-bold",children:M(f.total.total)})]}),(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsx)("p",{className:"text-sm text-gray-400",children:"Input / Output"}),(0,n.jsxs)("p",{className:"text-sm",children:[(0,n.jsx)("span",{className:"text-blue-400",children:M(f.total.input)})," / ",(0,n.jsx)("span",{className:"text-green-400",children:M(f.total.output)})]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"Token Usage Trend"}),(0,n.jsx)("div",{className:"h-32 flex items-end gap-1",children:f.trend.map((e,t)=>{let s=Math.max(...f.trend.map(e=>e.tokens)),a=s>0?e.tokens/s*100:0;return(0,n.jsx)("div",{className:"flex-1 bg-gicm-primary/20 hover:bg-gicm-primary/40 rounded-t transition-colors group relative",style:{height:"".concat(Math.max(a,2),"%")},children:(0,n.jsxs)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 opacity-0 group-hover:opacity-100 transition-opacity bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap",children:[e.date,": ",M(e.tokens)]})},t)})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"By Tool"}),(0,n.jsx)("div",{className:"space-y-2",children:Object.entries(f.byTool).sort((e,t)=>{let[,s]=e,[,n]=t;return n.total-s.total}).slice(0,5).map(e=>{let[t,s]=e;return(0,n.jsxs)("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded",children:[(0,n.jsx)("span",{className:"text-sm font-mono",children:t}),(0,n.jsxs)("span",{className:"text-sm text-gray-400",children:[M(s.total)," tokens"]})]},t)})})]})]}):(0,n.jsx)("div",{className:"text-center text-gray-500 py-8",children:j?"Loading...":"No token data available"})]}),(0,n.jsxs)("div",{className:"bg-gicm-card rounded-xl border border-gicm-border p-6",children:[(0,n.jsxs)("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,n.jsx)(o.Z,{className:"w-5 h-5 text-gicm-primary"}),"Cost Breakdown"]}),g?(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"text-center p-4 bg-white/5 rounded-lg",children:[(0,n.jsx)("p",{className:"text-sm text-gray-400",children:"Total Cost"}),(0,n.jsx)("p",{className:"text-3xl font-bold text-gicm-primary",children:C(g.totalCost)}),(0,n.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Avg: ",C(g.totalExecutions>0?g.totalCost/g.totalExecutions:0)," per execution"]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"Cost Trend"}),(0,n.jsx)("div",{className:"h-24 flex items-end gap-1",children:g.costTrend.map((e,t)=>{let s=Math.max(...g.costTrend.map(e=>e.cost)),a=s>0?e.cost/s*100:0;return(0,n.jsx)("div",{className:"flex-1 bg-green-500/20 hover:bg-green-500/40 rounded-t transition-colors group relative",style:{height:"".concat(Math.max(a,2),"%")},children:(0,n.jsxs)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 opacity-0 group-hover:opacity-100 transition-opacity bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap",children:[e.date,": ",C(e.cost)]})},t)})})]}),(0,n.jsxs)("div",{className:"text-sm text-gray-400 border-t border-gicm-border pt-4 mt-4",children:[(0,n.jsx)("p",{className:"font-medium mb-2",children:"Estimated costs (Claude Sonnet):"}),(0,n.jsxs)("ul",{className:"space-y-1 text-xs",children:[(0,n.jsx)("li",{children:"Input: $0.003 / 1K tokens"}),(0,n.jsx)("li",{children:"Output: $0.015 / 1K tokens"}),(0,n.jsx)("li",{children:"API call: $0.001 base"})]})]})]}):(0,n.jsx)("div",{className:"text-center text-gray-500 py-8",children:j?"Loading...":"No cost data available"})]})]}),(0,n.jsxs)("div",{className:"bg-gicm-card rounded-xl border border-gicm-border p-6",children:[(0,n.jsxs)("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,n.jsx)(u.Z,{className:"w-5 h-5 text-gicm-primary"}),"Pipeline Performance"]}),g&&g.topPipelines.length>0?(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"border-b border-gicm-border",children:[(0,n.jsx)("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-400",children:"Pipeline"}),(0,n.jsx)("th",{className:"text-right py-3 px-4 text-sm font-medium text-gray-400",children:"Executions"}),(0,n.jsx)("th",{className:"text-right py-3 px-4 text-sm font-medium text-gray-400",children:"Success Rate"}),(0,n.jsx)("th",{className:"text-right py-3 px-4 text-sm font-medium text-gray-400",children:"Status"})]})}),(0,n.jsx)("tbody",{children:g.topPipelines.map(e=>(0,n.jsxs)("tr",{className:"border-b border-gicm-border/50 hover:bg-white/5",children:[(0,n.jsxs)("td",{className:"py-3 px-4",children:[(0,n.jsx)("span",{className:"font-medium",children:e.name}),(0,n.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:e.id})]}),(0,n.jsx)("td",{className:"text-right py-3 px-4",children:e.count}),(0,n.jsx)("td",{className:"text-right py-3 px-4",children:(0,n.jsxs)("span",{className:e.successRate>=80?"text-green-400":e.successRate>=50?"text-yellow-400":"text-red-400",children:[e.successRate.toFixed(1),"%"]})}),(0,n.jsx)("td",{className:"text-right py-3 px-4",children:e.successRate>=80?(0,n.jsx)(l.Z,{className:"w-5 h-5 text-green-400 inline"}):e.successRate>=50?(0,n.jsx)(c.Z,{className:"w-5 h-5 text-yellow-400 inline"}):(0,n.jsx)(m.Z,{className:"w-5 h-5 text-red-400 inline"})})]},e.id))})]})}):(0,n.jsx)("div",{className:"text-center text-gray-500 py-8",children:j?"Loading...":"No pipeline data available yet. Run some pipelines to see analytics."})]}),(0,n.jsxs)("div",{className:"bg-gicm-card rounded-xl border border-gicm-border p-6",children:[(0,n.jsxs)("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[(0,n.jsx)(h.Z,{className:"w-5 h-5 text-gicm-primary"}),"Execution Trend"]}),g&&g.executionTrend.length>0?(0,n.jsx)("div",{className:"h-48 flex items-end gap-2",children:g.executionTrend.map((e,t)=>{let s=Math.max(...g.executionTrend.map(e=>e.count)),a=s>0?e.count/s*100:0;return(0,n.jsxs)("div",{className:"flex-1 flex flex-col items-center",children:[(0,n.jsx)("div",{className:"w-full bg-gicm-primary/20 hover:bg-gicm-primary/40 rounded-t transition-colors group relative",style:{height:"".concat(Math.max(a,2),"%")},children:(0,n.jsxs)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 opacity-0 group-hover:opacity-100 transition-opacity bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap z-10",children:[(0,n.jsx)("p",{children:e.date}),(0,n.jsxs)("p",{children:[e.count," executions"]}),(0,n.jsxs)("p",{children:[e.successRate.toFixed(0),"% success"]})]})}),(0,n.jsx)("span",{className:"text-xs text-gray-500 mt-2",children:new Date(e.date).toLocaleDateString("en-US",{weekday:"short"})})]},t)})}):(0,n.jsx)("div",{className:"text-center text-gray-500 py-8",children:j?"Loading...":"No execution data available"})]})]})})}function b(e){var t,s,a,i,r,c,l,o;let{title:d,value:x,icon:u,iconColor:m="text-gicm-primary",trend:p,loading:y}=e,b=(null==p?void 0:p.length)?(null!==(c=null!==(r=null===(t=p[p.length-1])||void 0===t?void 0:t.cost)&&void 0!==r?r:null===(s=p[p.length-1])||void 0===s?void 0:s.count)&&void 0!==c?c:0)>(null!==(o=null!==(l=null===(a=p[0])||void 0===a?void 0:a.cost)&&void 0!==l?l:null===(i=p[0])||void 0===i?void 0:i.count)&&void 0!==o?o:0)?"up":"down":null;return(0,n.jsxs)("div",{className:"bg-gicm-card rounded-xl border border-gicm-border p-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsx)(u,{className:"w-6 h-6 ".concat(m)}),b&&("up"===b?(0,n.jsx)(h.Z,{className:"w-4 h-4 text-green-400"}):(0,n.jsx)(g.Z,{className:"w-4 h-4 text-red-400"}))]}),(0,n.jsx)("p",{className:"text-sm text-gray-400",children:d}),(0,n.jsx)("p",{className:"text-2xl font-bold mt-1",children:y?(0,n.jsx)("span",{className:"animate-pulse bg-white/10 rounded w-16 h-7 inline-block"}):x})]})}},90935:function(e,t,s){"use strict";s.d(t,{Lf:function(){return a},PK:function(){return c},yu:function(){return n}});let n="http://localhost:3100",a=n.replace(/^http/,"ws")+"/ws";async function i(e){try{let t=await fetch("".concat(n,"/api").concat(e),{signal:AbortSignal.timeout(5e3),cache:"no-store"});if(!t.ok)return null;return t.json()}catch(e){return null}}async function r(e,t){try{let s=await fetch("".concat(n,"/api").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:t?JSON.stringify(t):void 0,signal:AbortSignal.timeout(1e4)});if(!s.ok)return null;return s.json()}catch(e){return null}}let c={getStatus:()=>i("/status"),getBrain:()=>i("/brain/status"),getBrainStatus:()=>i("/brain/status"),getBrainStats:()=>i("/brain/stats"),getBrainRecent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return i("/brain/recent?limit=".concat(e))},getBrainPatterns:()=>i("/brain/patterns"),getBrainPredictions:()=>i("/brain/predictions"),searchBrain:e=>r("/brain/search",{query:e}),triggerIngest:e=>r("/brain/ingest",{source:e}),getBrainKnowledgeById:e=>i("/brain/knowledge/".concat(e)),getBrainKnowledgeByTopic:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return i("/brain/knowledge/topic/".concat(e,"?limit=").concat(t))},getBrainKnowledgeSimilar:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return i("/brain/knowledge/".concat(e,"/similar?limit=").concat(t))},getBrainPatternById:e=>i("/brain/patterns/".concat(e)),getBrainPredictionById:e=>i("/brain/predictions/".concat(e)),generateBrainPredictions:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return r("/brain/predictions/generate",{type:e,count:t})},getBrainIngestStats:()=>i("/brain/ingest/stats"),getTreasury:()=>i("/treasury"),getMoney:()=>i("/money/status"),getGrowth:()=>i("/growth/status"),getProduct:()=>i("/product/status"),getHunter:()=>i("/hunter/status"),getAutonomy:()=>i("/autonomy/status"),getPredictions:()=>i("/predictions/status"),getEvents:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1?arguments[1]:void 0;return i("/events?limit=".concat(e).concat(t?"&category=".concat(t):""))},getEnrichedEvents:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0;return i("/events/enriched?limit=".concat(e).concat(t?"&category=".concat(t):"").concat(s?"&severity=".concat(s):""))},getEventCategories:()=>i("/events/categories"),startBrain:()=>r("/brain/start"),stopBrain:()=>r("/brain/stop"),triggerPhase:e=>r("/brain/phase",{phase:e}),runDiscovery:()=>r("/discovery/run"),generateContent:e=>r("/content/generate",{type:e})}},13024:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var n=s(38954);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&s.indexOf(e)===t).join(" ")};var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,n.forwardRef)((e,t)=>{let{color:s="currentColor",size:a=24,strokeWidth:c=2,absoluteStrokeWidth:l,className:o="",children:d,iconNode:x,...u}=e;return(0,n.createElement)("svg",{ref:t,...r,width:a,height:a,stroke:s,strokeWidth:l?24*Number(c)/Number(a):c,className:i("lucide",o),...u},[...x.map(e=>{let[t,s]=e;return(0,n.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),l=(e,t)=>{let s=(0,n.forwardRef)((s,r)=>{let{className:l,...o}=s;return(0,n.createElement)(c,{ref:r,iconNode:t,className:i("lucide-".concat(a(e)),l),...o})});return s.displayName="".concat(e),s}},12851:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(13024).Z)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},30680:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(13024).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},40922:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(13024).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},11033:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(13024).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},47302:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(13024).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},89497:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(13024).Z)("Cpu",[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]])},45482:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(13024).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},56086:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(13024).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},70328:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(13024).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},89738:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(13024).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},67888:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(13024).Z)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])}},function(e){e.O(0,[6829,8854,1744],function(){return e(e.s=53759)}),_N_E=e.O()}]);