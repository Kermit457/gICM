(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5240],{60195:function(e,t,r){"use strict";r.d(t,{s:function(){return u}});var n=r(38954);let c=r(32608).env.NEXT_PUBLIC_WS_URL||"ws://localhost:3001/ws",o={autoReconnect:!0,reconnectDelay:3e3,maxReconnectAttempts:10,heartbeat:!0,heartbeatInterval:3e4,rooms:[],onEvent:()=>{},onMessage:()=>{},onStatusChange:()=>{}};function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={...o,...e},[r,u]=(0,n.useState)("disconnected"),[a,i]=(0,n.useState)([]),[l,s]=(0,n.useState)(null),[d,f]=(0,n.useState)(null),h=(0,n.useRef)(null),v=(0,n.useRef)(0),y=(0,n.useRef)(null),p=(0,n.useRef)(null),b=(0,n.useRef)(!0),k=(0,n.useCallback)(e=>{b.current&&(u(e),t.onStatusChange(e))},[t]),m=(0,n.useCallback)(()=>{p.current&&(clearInterval(p.current),p.current=null)},[]),g=(0,n.useCallback)(()=>{var e;m(),t.heartbeat&&(null===(e=h.current)||void 0===e?void 0:e.readyState)===WebSocket.OPEN&&(p.current=setInterval(()=>{var e;(null===(e=h.current)||void 0===e?void 0:e.readyState)===WebSocket.OPEN&&h.current.send(JSON.stringify({type:"ping"}))},t.heartbeatInterval))},[t.heartbeat,t.heartbeatInterval,m]),S=(0,n.useCallback)(()=>{y.current&&(clearTimeout(y.current),y.current=null),m(),h.current&&(h.current.close(),h.current=null),v.current=0,k("disconnected")},[m,k]),T=(0,n.useCallback)(()=>{var e,r;if((null===(e=h.current)||void 0===e?void 0:e.readyState)!==WebSocket.CONNECTING&&(null===(r=h.current)||void 0===r?void 0:r.readyState)!==WebSocket.OPEN){h.current&&h.current.close(),k("connecting"),f(null);try{let e=new WebSocket(c);h.current=e,e.onopen=()=>{b.current&&(v.current=0,k("connected"),g(),e.send(JSON.stringify({type:"subscribe",channels:["events","status","metrics"]})),t.rooms.length>0&&e.send(JSON.stringify({action:"subscribe",rooms:t.rooms})))},e.onmessage=e=>{if(b.current)try{let r=JSON.parse(e.data);if(s(r),t.onMessage(r),"event"===r.type&&r.payload){let e=r.payload;i(t=>[e,...t].slice(0,100)),t.onEvent(e)}}catch(e){console.warn("Failed to parse WebSocket message:",e)}},e.onerror=e=>{b.current&&(console.error("WebSocket error:",e),f("Connection error"),k("error"))},e.onclose=e=>{if(b.current){if(m(),1e3===e.code){k("disconnected");return}if(k("disconnected"),t.autoReconnect&&(0===t.maxReconnectAttempts||v.current<t.maxReconnectAttempts)){v.current++;let e=t.reconnectDelay*Math.min(v.current,5);y.current=setTimeout(()=>{b.current&&T()},e)}}}}catch(e){console.error("Failed to create WebSocket:",e),f(e instanceof Error?e.message:"Failed to connect"),k("error")}}},[t,k,g,m]),C=(0,n.useCallback)(e=>{var t;return(null===(t=h.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN&&(h.current.send(JSON.stringify(e)),!0)},[]),N=(0,n.useCallback)(()=>{i([])},[]),E=(0,n.useCallback)(e=>{var t;return(null===(t=h.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN&&e.length>0&&(h.current.send(JSON.stringify({action:"subscribe",rooms:e})),!0)},[]),w=(0,n.useCallback)(e=>{var t;return(null===(t=h.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN&&e.length>0&&(h.current.send(JSON.stringify({action:"unsubscribe",rooms:e})),!0)},[]);return(0,n.useEffect)(()=>(b.current=!0,T(),()=>{b.current=!1,S()}),[T,S]),{status:r,events:a,lastMessage:l,error:d,isConnected:"connected"===r,reconnectAttempts:v.current,connect:T,disconnect:S,send:C,clearEvents:N,subscribe:E,unsubscribe:w}}},35289:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(13024).Z)("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},11374:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(13024).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},43333:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(13024).Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},56086:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(13024).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},11960:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(13024).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},48630:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(13024).Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]])},32608:function(e){var t,r,n,c=e.exports={};function o(){throw Error("setTimeout has not been defined")}function u(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(e){r=u}}();var i=[],l=!1,s=-1;function d(){l&&n&&(l=!1,n.length?i=n.concat(i):s=-1,i.length&&f())}function f(){if(!l){var e=a(d);l=!0;for(var t=i.length;t;){for(n=i,i=[];++s<t;)n&&n[s].run();s=-1,t=i.length}n=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}c.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];i.push(new h(e,t)),1!==i.length||l||a(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=v,c.addListener=v,c.once=v,c.off=v,c.removeListener=v,c.removeAllListeners=v,c.emit=v,c.prependListener=v,c.prependOnceListener=v,c.listeners=function(e){return[]},c.binding=function(e){throw Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw Error("process.chdir is not supported")},c.umask=function(){return 0}}}]);