(()=>{var e={};e.id=4109,e.ids=[4109],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},51687:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>d}),s(19970),s(13263),s(38013);var a=s(66933),r=s(16006),i=s(294),n=s.n(i),l=s(46901),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);s.d(t,c);let d=["",{children:["analytics",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,19970)),"C:\\Users\\mirko\\OneDrive\\Desktop\\gICM\\apps\\dashboard\\app\\analytics\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,13263)),"C:\\Users\\mirko\\OneDrive\\Desktop\\gICM\\apps\\dashboard\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,38013,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\mirko\\OneDrive\\Desktop\\gICM\\apps\\dashboard\\app\\analytics\\page.tsx"],x="/analytics/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/analytics/page",pathname:"/analytics",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},61832:(e,t,s)=>{Promise.resolve().then(s.bind(s,38363))},38363:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>y});var a=s(52723),r=s(3789),i=s(72683),n=s(50527),l=s(81584),c=s(57432),d=s(71770),o=s(66969),x=s(66707),m=s(48279),h=s(91109),p=s(69175),g=s(78413),u=s(36722);function y(){var e;let[t,s]=(0,r.useState)("week"),[g,y]=(0,r.useState)(null),[j,v]=(0,r.useState)(null),[N,f]=(0,r.useState)(!0),[k,w]=(0,r.useState)(null);async function $(){f(!0),w(null);try{let[e,s]=await Promise.all([fetch(`${u.yu}/api/analytics/summary?period=${t}`),fetch(`${u.yu}/api/analytics/tokens?period=${t}`)]);if(e.ok){let t=await e.json();y(t.summary)}if(s.ok){let e=await s.json();v(e)}}catch(e){w("Failed to fetch analytics. Make sure the Integration Hub is running.")}finally{f(!1)}}let M=e=>e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toFixed(0),P=e=>`$${e.toFixed(4)}`;return a.jsx("div",{className:"min-h-screen bg-gicm-bg text-white p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx(i.Z,{className:"w-6 h-6 text-gicm-primary"}),"Pipeline Analytics"]}),a.jsx("p",{className:"text-gray-400 mt-1",children:"Cost tracking, success rates, and token usage"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex bg-gicm-card rounded-lg p-1",children:["day","week","month"].map(e=>a.jsx("button",{onClick:()=>s(e),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t===e?"bg-gicm-primary text-black":"text-gray-400 hover:text-white"}`,children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),a.jsx("button",{onClick:$,disabled:N,className:"p-2 rounded-lg bg-gicm-card hover:bg-white/10 transition-colors disabled:opacity-50",children:a.jsx(n.Z,{className:`w-5 h-5 ${N?"animate-spin":""}`})})]})]}),k&&a.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4 text-red-400",children:k}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(b,{title:"Total Executions",value:g?M(g.totalExecutions):"-",icon:l.Z,trend:g?.executionTrend,loading:N}),a.jsx(b,{title:"Success Rate",value:g?`${g.successRate.toFixed(1)}%`:"-",icon:c.Z,iconColor:g&&g.successRate>=80?"text-green-400":"text-yellow-400",loading:N}),a.jsx(b,{title:"Total Cost",value:g?P(g.totalCost):"-",icon:d.Z,trend:g?.costTrend,loading:N}),a.jsx(b,{title:"Avg Duration",value:g?(e=g.avgDuration)<1e3?`${e}ms`:e<6e4?`${(e/1e3).toFixed(1)}s`:`${(e/6e4).toFixed(1)}m`:"-",icon:o.Z,loading:N})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 bg-gicm-card rounded-xl border border-gicm-border p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[a.jsx(x.Z,{className:"w-5 h-5 text-gicm-primary"}),"Token Usage"]}),j?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-400",children:"Total Tokens"}),a.jsx("p",{className:"text-2xl font-bold",children:M(j.total.total)})]}),(0,a.jsxs)("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-400",children:"Input / Output"}),(0,a.jsxs)("p",{className:"text-sm",children:[a.jsx("span",{className:"text-blue-400",children:M(j.total.input)})," / ",a.jsx("span",{className:"text-green-400",children:M(j.total.output)})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"Token Usage Trend"}),a.jsx("div",{className:"h-32 flex items-end gap-1",children:j.trend.map((e,t)=>{let s=Math.max(...j.trend.map(e=>e.tokens)),r=s>0?e.tokens/s*100:0;return a.jsx("div",{className:"flex-1 bg-gicm-primary/20 hover:bg-gicm-primary/40 rounded-t transition-colors group relative",style:{height:`${Math.max(r,2)}%`},children:(0,a.jsxs)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 opacity-0 group-hover:opacity-100 transition-opacity bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap",children:[e.date,": ",M(e.tokens)]})},t)})})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"By Tool"}),a.jsx("div",{className:"space-y-2",children:Object.entries(j.byTool).sort(([,e],[,t])=>t.total-e.total).slice(0,5).map(([e,t])=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-white/5 rounded",children:[a.jsx("span",{className:"text-sm font-mono",children:e}),(0,a.jsxs)("span",{className:"text-sm text-gray-400",children:[M(t.total)," tokens"]})]},e))})]})]}):a.jsx("div",{className:"text-center text-gray-500 py-8",children:N?"Loading...":"No token data available"})]}),(0,a.jsxs)("div",{className:"bg-gicm-card rounded-xl border border-gicm-border p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[a.jsx(d.Z,{className:"w-5 h-5 text-gicm-primary"}),"Cost Breakdown"]}),g?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center p-4 bg-white/5 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-400",children:"Total Cost"}),a.jsx("p",{className:"text-3xl font-bold text-gicm-primary",children:P(g.totalCost)}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Avg: ",P(g.totalExecutions>0?g.totalCost/g.totalExecutions:0)," per execution"]})]}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"Cost Trend"}),a.jsx("div",{className:"h-24 flex items-end gap-1",children:g.costTrend.map((e,t)=>{let s=Math.max(...g.costTrend.map(e=>e.cost)),r=s>0?e.cost/s*100:0;return a.jsx("div",{className:"flex-1 bg-green-500/20 hover:bg-green-500/40 rounded-t transition-colors group relative",style:{height:`${Math.max(r,2)}%`},children:(0,a.jsxs)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 opacity-0 group-hover:opacity-100 transition-opacity bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap",children:[e.date,": ",P(e.cost)]})},t)})})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-400 border-t border-gicm-border pt-4 mt-4",children:[a.jsx("p",{className:"font-medium mb-2",children:"Estimated costs (Claude Sonnet):"}),(0,a.jsxs)("ul",{className:"space-y-1 text-xs",children:[a.jsx("li",{children:"Input: $0.003 / 1K tokens"}),a.jsx("li",{children:"Output: $0.015 / 1K tokens"}),a.jsx("li",{children:"API call: $0.001 base"})]})]})]}):a.jsx("div",{className:"text-center text-gray-500 py-8",children:N?"Loading...":"No cost data available"})]})]}),(0,a.jsxs)("div",{className:"bg-gicm-card rounded-xl border border-gicm-border p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[a.jsx(m.Z,{className:"w-5 h-5 text-gicm-primary"}),"Pipeline Performance"]}),g&&g.topPipelines.length>0?a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gicm-border",children:[a.jsx("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-400",children:"Pipeline"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm font-medium text-gray-400",children:"Executions"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm font-medium text-gray-400",children:"Success Rate"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm font-medium text-gray-400",children:"Status"})]})}),a.jsx("tbody",{children:g.topPipelines.map(e=>(0,a.jsxs)("tr",{className:"border-b border-gicm-border/50 hover:bg-white/5",children:[(0,a.jsxs)("td",{className:"py-3 px-4",children:[a.jsx("span",{className:"font-medium",children:e.name}),a.jsx("span",{className:"text-xs text-gray-500 ml-2",children:e.id})]}),a.jsx("td",{className:"text-right py-3 px-4",children:e.count}),a.jsx("td",{className:"text-right py-3 px-4",children:(0,a.jsxs)("span",{className:e.successRate>=80?"text-green-400":e.successRate>=50?"text-yellow-400":"text-red-400",children:[e.successRate.toFixed(1),"%"]})}),a.jsx("td",{className:"text-right py-3 px-4",children:e.successRate>=80?a.jsx(c.Z,{className:"w-5 h-5 text-green-400 inline"}):e.successRate>=50?a.jsx(l.Z,{className:"w-5 h-5 text-yellow-400 inline"}):a.jsx(h.Z,{className:"w-5 h-5 text-red-400 inline"})})]},e.id))})]})}):a.jsx("div",{className:"text-center text-gray-500 py-8",children:N?"Loading...":"No pipeline data available yet. Run some pipelines to see analytics."})]}),(0,a.jsxs)("div",{className:"bg-gicm-card rounded-xl border border-gicm-border p-6",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[a.jsx(p.Z,{className:"w-5 h-5 text-gicm-primary"}),"Execution Trend"]}),g&&g.executionTrend.length>0?a.jsx("div",{className:"h-48 flex items-end gap-2",children:g.executionTrend.map((e,t)=>{let s=Math.max(...g.executionTrend.map(e=>e.count)),r=s>0?e.count/s*100:0;return(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center",children:[a.jsx("div",{className:"w-full bg-gicm-primary/20 hover:bg-gicm-primary/40 rounded-t transition-colors group relative",style:{height:`${Math.max(r,2)}%`},children:(0,a.jsxs)("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 opacity-0 group-hover:opacity-100 transition-opacity bg-black/80 px-2 py-1 rounded text-xs whitespace-nowrap z-10",children:[a.jsx("p",{children:e.date}),(0,a.jsxs)("p",{children:[e.count," executions"]}),(0,a.jsxs)("p",{children:[e.successRate.toFixed(0),"% success"]})]})}),a.jsx("span",{className:"text-xs text-gray-500 mt-2",children:new Date(e.date).toLocaleDateString("en-US",{weekday:"short"})})]},t)})}):a.jsx("div",{className:"text-center text-gray-500 py-8",children:N?"Loading...":"No execution data available"})]})]})})}function b({title:e,value:t,icon:s,iconColor:r="text-gicm-primary",trend:i,loading:n}){let l=i?.length?(i[i.length-1]?.cost??i[i.length-1]?.count??0)>(i[0]?.cost??i[0]?.count??0)?"up":"down":null;return(0,a.jsxs)("div",{className:"bg-gicm-card rounded-xl border border-gicm-border p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx(s,{className:`w-6 h-6 ${r}`}),l&&("up"===l?a.jsx(p.Z,{className:"w-4 h-4 text-green-400"}):a.jsx(g.Z,{className:"w-4 h-4 text-red-400"}))]}),a.jsx("p",{className:"text-sm text-gray-400",children:e}),a.jsx("p",{className:"text-2xl font-bold mt-1",children:n?a.jsx("span",{className:"animate-pulse bg-white/10 rounded w-16 h-7 inline-block"}):t})]})}},36722:(e,t,s)=>{"use strict";s.d(t,{PK:()=>n,yu:()=>a});let a="http://localhost:3100";async function r(e){try{let t=await fetch(`${a}/api${e}`,{signal:AbortSignal.timeout(5e3),cache:"no-store"});if(!t.ok)return null;return t.json()}catch{return null}}async function i(e,t){try{let s=await fetch(`${a}/api${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:t?JSON.stringify(t):void 0,signal:AbortSignal.timeout(1e4)});if(!s.ok)return null;return s.json()}catch{return null}}a.replace(/^http/,"ws");let n={getStatus:()=>r("/status"),getBrain:()=>r("/brain/status"),getBrainStatus:()=>r("/brain/status"),getBrainStats:()=>r("/brain/stats"),getBrainRecent:(e=20)=>r(`/brain/recent?limit=${e}`),getBrainPatterns:()=>r("/brain/patterns"),getBrainPredictions:()=>r("/brain/predictions"),searchBrain:e=>i("/brain/search",{query:e}),triggerIngest:e=>i("/brain/ingest",{source:e}),getBrainKnowledgeById:e=>r(`/brain/knowledge/${e}`),getBrainKnowledgeByTopic:(e,t=20)=>r(`/brain/knowledge/topic/${e}?limit=${t}`),getBrainKnowledgeSimilar:(e,t=10)=>r(`/brain/knowledge/${e}/similar?limit=${t}`),getBrainPatternById:e=>r(`/brain/patterns/${e}`),getBrainPredictionById:e=>r(`/brain/predictions/${e}`),generateBrainPredictions:(e,t=5)=>i("/brain/predictions/generate",{type:e,count:t}),getBrainIngestStats:()=>r("/brain/ingest/stats"),getTreasury:()=>r("/treasury"),getMoney:()=>r("/money/status"),getGrowth:()=>r("/growth/status"),getProduct:()=>r("/product/status"),getHunter:()=>r("/hunter/status"),getAutonomy:()=>r("/autonomy/status"),getPredictions:()=>r("/predictions/status"),getEvents:(e=50,t)=>r(`/events?limit=${e}${t?`&category=${t}`:""}`),getEnrichedEvents:(e=50,t,s)=>r(`/events/enriched?limit=${e}${t?`&category=${t}`:""}${s?`&severity=${s}`:""}`),getEventCategories:()=>r("/events/categories"),startBrain:()=>i("/brain/start"),stopBrain:()=>i("/brain/stop"),triggerPhase:e=>i("/brain/phase",{phase:e}),runDiscovery:()=>i("/discovery/run"),generateContent:e=>i("/content/generate",{type:e})}},57432:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(82016).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},91109:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(82016).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},66969:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(82016).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},48279:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(82016).Z)("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]])},71770:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(82016).Z)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},50527:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(82016).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},78413:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(82016).Z)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]])},19970:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(51509).createProxy)(String.raw`C:\Users\mirko\OneDrive\Desktop\gICM\apps\dashboard\app\analytics\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[547,9557,6867],()=>s(51687));module.exports=a})();