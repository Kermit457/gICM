"use strict";(()=>{var e={};e.id=7534,e.ids=[7534],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},11546:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>f,patchFetch:()=>m,requestAsyncStorage:()=>u,routeModule:()=>l,serverHooks:()=>p,staticGenerationAsyncStorage:()=>g});var n={};t.r(n),t.d(n,{GET:()=>d});var o=t(28998),s=t(16006),i=t(14274),a=t(95663),c=t(47588);async function d(){if(!(0,c.jv)())return a.NextResponse.json({error:"Supabase not configured",configured:!1},{status:503});try{let[e,r,t,n]=await Promise.all([c.iE.getOpen(),c.Wg.getToday(),c.vH.getToday(),c.vH.getRecent(7)]),o=await c.vH.getTotalPnL(),s=n.reduce((e,r)=>e+(r.pnl||0),0),i=t?.pnl??0;return a.NextResponse.json({positions:e,trades:r,stats:{dailyPnL:i,weeklyPnL:s,totalPnL:o,tradesCount:t?.trades_count??r.length,activeBots:e.filter(e=>"open"===e.status).length},configured:!0,lastUpdated:Date.now()})}catch(e){return console.error("Trading API error:",e),a.NextResponse.json({error:"Failed to fetch trading data",configured:!0},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/trading/route",pathname:"/api/trading",filename:"route",bundlePath:"app/api/trading/route"},resolvedPagePath:"C:\\Users\\mirko\\OneDrive\\Desktop\\gICM\\apps\\dashboard\\app\\api\\trading\\route.ts",nextConfigOutput:"standalone",userland:n}),{requestAsyncStorage:u,staticGenerationAsyncStorage:g,serverHooks:p}=l,f="/api/trading/route";function m(){return(0,i.patchFetch)({serverHooks:p,staticGenerationAsyncStorage:g})}},47588:(e,r,t)=>{t.d(r,{CA:()=>d,G3:()=>l,Wg:()=>c,iE:()=>a,jv:()=>g,vH:()=>u});var n=t(73894);let o="https://bscpftwzsgmuhxaceqhy.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJzY3BmdHd6c2dtdWh4YWNlcWh5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ0MDM5NTQsImV4cCI6MjA3OTk3OTk1NH0.UtD1uV94N8b2gaLV6H_4cZ_mcuHSxsC2DOyFXYhHqBA",i=o&&s?(0,n.eI)(o,s):null,a={async getOpen(){if(!i)return[];let{data:e,error:r}=await i.from("positions").select("*").eq("status","open").order("opened_at",{ascending:!1});return r&&console.error("Error fetching positions:",r),e||[]},async getAll(){if(!i)return[];let{data:e,error:r}=await i.from("positions").select("*").order("opened_at",{ascending:!1});return r&&console.error("Error fetching positions:",r),e||[]},async getRecent(e=10){if(!i)return[];let{data:r,error:t}=await i.from("positions").select("*").order("opened_at",{ascending:!1}).limit(e);return t&&console.error("Error fetching positions:",t),r||[]}},c={async getToday(){if(!i)return[];let e=new Date().toISOString().split("T")[0],{data:r,error:t}=await i.from("trades").select("*").gte("executed_at",`${e}T00:00:00`).order("executed_at",{ascending:!1});return t&&console.error("Error fetching trades:",t),r||[]},async getRecent(e=50){if(!i)return[];let{data:r,error:t}=await i.from("trades").select("*").order("executed_at",{ascending:!1}).limit(e);return t&&console.error("Error fetching trades:",t),r||[]}},d={async getQueued(e=50){if(!i)return[];let{data:r,error:t}=await i.from("signals").select("*").eq("status","queued").order("received_at",{ascending:!1}).limit(e);return t&&console.error("Error fetching signals:",t),r||[]},async getRecent(e=100){if(!i)return[];let{data:r,error:t}=await i.from("signals").select("*").order("received_at",{ascending:!1}).limit(e);return t&&console.error("Error fetching signals:",t),r||[]},async getById(e){if(!i)return null;let{data:r,error:t}=await i.from("signals").select("*").eq("id",e).single();return t&&console.error("Error fetching signal:",t),r}},l={async getRecent(e=100){if(!i)return[];let{data:r,error:t}=await i.from("discoveries").select("*").order("discovered_at",{ascending:!1}).limit(e);return t&&console.error("Error fetching discoveries:",t),r||[]},async getBySource(e,r=50){if(!i)return[];let{data:t,error:n}=await i.from("discoveries").select("*").eq("source",e).order("discovered_at",{ascending:!1}).limit(r);return n&&console.error("Error fetching discoveries:",n),t||[]}},u={async getToday(){if(!i)return null;let e=new Date().toISOString().split("T")[0],{data:r,error:t}=await i.from("daily_stats").select("*").eq("date",e).single();return t&&"PGRST116"!==t.code&&console.error("Error fetching daily stats:",t),r},async getRecent(e=30){if(!i)return[];let{data:r,error:t}=await i.from("daily_stats").select("*").order("date",{ascending:!1}).limit(e);return t&&console.error("Error fetching daily stats:",t),r||[]},async getTotalPnL(){if(!i)return 0;let{data:e,error:r}=await i.from("daily_stats").select("pnl");return r?(console.error("Error fetching total PnL:",r),0):(e||[]).reduce((e,r)=>e+(r.pnl||0),0)}};function g(){return!!(o&&s)}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[547,7536,3894],()=>t(11546));module.exports=n})();