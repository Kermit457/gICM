"use strict";(()=>{var e={};e.id=7839,e.ids=[7839],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6560:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>f,patchFetch:()=>m,requestAsyncStorage:()=>u,routeModule:()=>d,serverHooks:()=>p,staticGenerationAsyncStorage:()=>g});var s={};t.r(s),t.d(s,{GET:()=>l});var n=t(28998),o=t(16006),i=t(14274),a=t(95663),c=t(47588);async function l(e){if(!(0,c.jv)())return a.NextResponse.json({error:"Supabase not configured",configured:!1},{status:503});let{searchParams:r}=new URL(e.url),t=r.get("source"),s=parseInt(r.get("limit")||"100");try{let e=t?await c.G3.getBySource(t,s):await c.G3.getRecent(s),r=e.reduce((e,r)=>(e[r.source]=(e[r.source]||0)+1,e),{});return a.NextResponse.json({discoveries:e,stats:{total:e.length,bySource:r},configured:!0,lastUpdated:Date.now()})}catch(e){return console.error("Discoveries API error:",e),a.NextResponse.json({error:"Failed to fetch discoveries",configured:!0},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/discoveries/route",pathname:"/api/discoveries",filename:"route",bundlePath:"app/api/discoveries/route"},resolvedPagePath:"C:\\Users\\mirko\\OneDrive\\Desktop\\gICM\\apps\\dashboard\\app\\api\\discoveries\\route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:u,staticGenerationAsyncStorage:g,serverHooks:p}=d,f="/api/discoveries/route";function m(){return(0,i.patchFetch)({serverHooks:p,staticGenerationAsyncStorage:g})}},47588:(e,r,t)=>{t.d(r,{CA:()=>l,G3:()=>d,Wg:()=>c,iE:()=>a,jv:()=>g,vH:()=>u});var s=t(73894);let n="https://bscpftwzsgmuhxaceqhy.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJzY3BmdHd6c2dtdWh4YWNlcWh5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ0MDM5NTQsImV4cCI6MjA3OTk3OTk1NH0.UtD1uV94N8b2gaLV6H_4cZ_mcuHSxsC2DOyFXYhHqBA",i=n&&o?(0,s.eI)(n,o):null,a={async getOpen(){if(!i)return[];let{data:e,error:r}=await i.from("positions").select("*").eq("status","open").order("opened_at",{ascending:!1});return r&&console.error("Error fetching positions:",r),e||[]},async getAll(){if(!i)return[];let{data:e,error:r}=await i.from("positions").select("*").order("opened_at",{ascending:!1});return r&&console.error("Error fetching positions:",r),e||[]},async getRecent(e=10){if(!i)return[];let{data:r,error:t}=await i.from("positions").select("*").order("opened_at",{ascending:!1}).limit(e);return t&&console.error("Error fetching positions:",t),r||[]}},c={async getToday(){if(!i)return[];let e=new Date().toISOString().split("T")[0],{data:r,error:t}=await i.from("trades").select("*").gte("executed_at",`${e}T00:00:00`).order("executed_at",{ascending:!1});return t&&console.error("Error fetching trades:",t),r||[]},async getRecent(e=50){if(!i)return[];let{data:r,error:t}=await i.from("trades").select("*").order("executed_at",{ascending:!1}).limit(e);return t&&console.error("Error fetching trades:",t),r||[]}},l={async getQueued(e=50){if(!i)return[];let{data:r,error:t}=await i.from("signals").select("*").eq("status","queued").order("received_at",{ascending:!1}).limit(e);return t&&console.error("Error fetching signals:",t),r||[]},async getRecent(e=100){if(!i)return[];let{data:r,error:t}=await i.from("signals").select("*").order("received_at",{ascending:!1}).limit(e);return t&&console.error("Error fetching signals:",t),r||[]},async getById(e){if(!i)return null;let{data:r,error:t}=await i.from("signals").select("*").eq("id",e).single();return t&&console.error("Error fetching signal:",t),r}},d={async getRecent(e=100){if(!i)return[];let{data:r,error:t}=await i.from("discoveries").select("*").order("discovered_at",{ascending:!1}).limit(e);return t&&console.error("Error fetching discoveries:",t),r||[]},async getBySource(e,r=50){if(!i)return[];let{data:t,error:s}=await i.from("discoveries").select("*").eq("source",e).order("discovered_at",{ascending:!1}).limit(r);return s&&console.error("Error fetching discoveries:",s),t||[]}},u={async getToday(){if(!i)return null;let e=new Date().toISOString().split("T")[0],{data:r,error:t}=await i.from("daily_stats").select("*").eq("date",e).single();return t&&"PGRST116"!==t.code&&console.error("Error fetching daily stats:",t),r},async getRecent(e=30){if(!i)return[];let{data:r,error:t}=await i.from("daily_stats").select("*").order("date",{ascending:!1}).limit(e);return t&&console.error("Error fetching daily stats:",t),r||[]},async getTotalPnL(){if(!i)return 0;let{data:e,error:r}=await i.from("daily_stats").select("pnl");return r?(console.error("Error fetching total PnL:",r),0):(e||[]).reduce((e,r)=>e+(r.pnl||0),0)}};function g(){return!!(n&&o)}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[547,7536,3894],()=>t(6560));module.exports=s})();