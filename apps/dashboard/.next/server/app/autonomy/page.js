(()=>{var e={};e.id=122,e.ids=[122],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},48821:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>o}),r(2901),r(13263),r(38013);var s=r(66933),a=r(16006),n=r(294),l=r.n(n),i=r(46901),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);r.d(t,c);let o=["",{children:["autonomy",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,2901)),"C:\\Users\\mirko\\OneDrive\\Desktop\\gICM\\apps\\dashboard\\app\\autonomy\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,13263)),"C:\\Users\\mirko\\OneDrive\\Desktop\\gICM\\apps\\dashboard\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,38013,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\mirko\\OneDrive\\Desktop\\gICM\\apps\\dashboard\\app\\autonomy\\page.tsx"],u="/autonomy/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/autonomy/page",pathname:"/autonomy",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},18027:(e,t,r)=>{Promise.resolve().then(r.bind(r,70961))},70961:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Z});var s=r(52723),a=r(3789),n=r(69175),l=r(72839);let i=(0,r(82016).Z)("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]);var c=r(71770),o=r(57981),d=r(66969),u=r(75308),m=r(53006),x=r(54012),g=r(50527),p=r(79793),h=r(76289),b=r(74067),y=r(91109),j=r(20590),v=r(36722),f=r(99040),N=r(15961);let k={financial:{maxAutoExpense:50,maxDailySpend:100,maxTradeSize:500},content:{maxAutoPostsPerDay:10,maxAutoBlogsPerWeek:3},development:{maxAutoCommitLines:100,autoDeployToProduction:!1}},w={trading:n.Z,content:l.Z,development:i,expense:c.Z},S={trading:"text-green-400 bg-green-500/20",content:"text-purple-400 bg-purple-500/20",development:"text-blue-400 bg-blue-500/20",expense:"text-yellow-400 bg-yellow-500/20"};function C(e){return e<=20?"text-green-400":e<=40?"text-blue-400":e<=60?"text-yellow-400":e<=80?"text-orange-400":"text-red-400"}function P({request:e,onApprove:t,onReject:r,isLoading:a}){var n;let l=w[e.category]||o.Z,i=Math.max(0,e.expiresAt-Date.now());return(0,s.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-xl p-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-2 rounded-lg ${S[e.category]}`,children:s.jsx(l,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-semibold text-white",children:e.action}),s.jsx("p",{className:"text-sm text-gray-400 capitalize",children:e.category})]})]}),s.jsx("div",{className:"flex items-center gap-2",children:(0,s.jsxs)("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${C(e.riskScore)} bg-white/5`,children:["Risk: ",e.riskScore]})})]}),s.jsx("p",{className:"text-sm text-gray-300 mb-4",children:e.description}),(0,s.jsxs)("div",{className:"bg-gicm-dark rounded-lg p-3 mb-4",children:[s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Context"}),s.jsx("div",{className:"space-y-1",children:Object.entries(e.context).map(([e,t])=>(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-gray-400 capitalize",children:e}),s.jsx("span",{className:"text-white",children:String(t)})]},e))})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[s.jsx("span",{children:"Risk Score"}),(0,s.jsxs)("span",{children:[e.riskScore,"/100"]})]}),s.jsx("div",{className:"h-2 bg-gicm-dark rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full ${(n=e.riskScore)<=20?"bg-green-500":n<=40?"bg-blue-500":n<=60?"bg-yellow-500":n<=80?"bg-orange-500":"bg-red-500"}`,style:{width:`${e.riskScore}%`}})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-400 mb-4",children:[s.jsx(d.Z,{className:"w-4 h-4"}),(0,s.jsxs)("span",{children:["Expires in ",Math.floor(i/36e5),"h"]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)("button",{onClick:t,disabled:a,className:"flex-1 flex items-center justify-center gap-2 py-2 bg-green-500/20 hover:bg-green-500/30 text-green-400 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a?s.jsx(u.Z,{className:"w-4 h-4 animate-spin"}):s.jsx(m.Z,{className:"w-4 h-4"}),"Approve"]}),(0,s.jsxs)("button",{onClick:r,disabled:a,className:"flex-1 flex items-center justify-center gap-2 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a?s.jsx(u.Z,{className:"w-4 h-4 animate-spin"}):s.jsx(x.Z,{className:"w-4 h-4"}),"Reject"]})]})]})}function Z(){let[e,t]=(0,a.useState)("queue"),[r,n]=(0,a.useState)([]),[m,x]=(0,a.useState)([]),[w,S]=(0,a.useState)(k),[Z,$]=(0,a.useState)(2),[A,M]=(0,a.useState)(!0),[D,R]=(0,a.useState)(!1),[O,q]=(0,a.useState)(null);(0,a.useRef)(null);let B=(0,f.s)({autoReconnect:!0,reconnectDelay:3e3,onEvent:e=>{(e.type?.includes("autonomy")||e.type?.includes("approval"))&&T()}}),E=r.filter(e=>"pending"===e.status).length,T=(0,a.useCallback)(async()=>{try{let[e,t,r,s]=await Promise.all([fetch("/api/autonomy/queue").then(e=>e.ok?e.json():null).catch(()=>null),fetch("/api/autonomy/audit").then(e=>e.ok?e.json():null).catch(()=>null),fetch("/api/autonomy/boundaries").then(e=>e.ok?e.json():null).catch(()=>null),v.PK.getAutonomy().catch(()=>null)]),a=!1;e?.ok&&e.queue?.length>0?(n(e.queue),a=!0):(s?.queue?.pending??0)>0&&(a=!0),t?.ok&&t.entries?.length>0&&(x(t.entries),a=!0),r?.ok&&r.boundaries&&(S(r.boundaries),a=!0),s?.level&&($(s.level),a=!0),R(a)}catch(e){console.error("Failed to fetch autonomy data:",e),R(!1)}finally{M(!1)}},[]),_=async e=>{q(e);try{(await fetch("/api/autonomy/approve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,feedback:"Approved via dashboard"})})).ok&&n(t=>t.map(t=>t.id===e?{...t,status:"approved"}:t))}catch(e){console.error("Failed to approve request:",e)}finally{q(null)}},I=async e=>{q(e);try{(await fetch("/api/autonomy/reject",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,reason:"Rejected via dashboard"})})).ok&&n(t=>t.map(t=>t.id===e?{...t,status:"rejected"}:t))}catch(e){console.error("Failed to reject request:",e)}finally{q(null)}},W=async e=>{S(e);try{await fetch("/api/autonomy/boundaries",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(e){console.error("Failed to update boundaries:",e)}},z={pending:r.filter(e=>"pending"===e.status).length,approved:m.filter(e=>"auto_execute"===e.decision&&"success"===e.outcome).length,rejected:m.filter(e=>"reject"===e.decision).length,avgRisk:Math.round(m.reduce((e,t)=>e+t.riskScore,0)/m.length)};return s.jsx("div",{className:"min-h-screen bg-gicm-dark p-6",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[s.jsx(o.Z,{className:"w-7 h-7 text-gicm-primary"}),"Autonomy Controls"]}),s.jsx("p",{className:"text-gray-400 mt-1",children:"Manage approval queue, risk boundaries, and audit trail"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[s.jsx(N.Y,{status:B.status,isRealtime:B.isConnected,compact:!0}),D&&(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-green-500/20 border border-green-500/30 rounded-lg",children:[s.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),s.jsx("span",{className:"text-xs text-green-400 font-medium",children:"Data Live"})]}),s.jsx("button",{onClick:()=>{M(!0),T()},disabled:A,className:"p-2 rounded-lg bg-gicm-card border border-gicm-border hover:bg-white/10 transition-colors disabled:opacity-50",children:A?s.jsx(u.Z,{className:"w-5 h-5 text-gray-400 animate-spin"}):s.jsx(g.Z,{className:"w-5 h-5 text-gray-400"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 bg-gicm-card border border-gicm-border rounded-lg",children:[s.jsx("span",{className:"text-sm text-gray-400",children:"Level:"}),(0,s.jsxs)("select",{value:Z,onChange:e=>$(Number(e.target.value)),className:"bg-transparent text-white font-medium focus:outline-none",children:[s.jsx("option",{value:1,children:"1 - Manual"}),s.jsx("option",{value:2,children:"2 - Bounded"}),s.jsx("option",{value:3,children:"3 - Supervised"}),s.jsx("option",{value:4,children:"4 - Autonomous"})]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[(0,s.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-xl p-4",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Pending"}),s.jsx("p",{className:"text-2xl font-bold text-yellow-400",children:z.pending})]}),(0,s.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-xl p-4",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Auto-Executed (24h)"}),s.jsx("p",{className:"text-2xl font-bold text-green-400",children:z.approved})]}),(0,s.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-xl p-4",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Rejected (24h)"}),s.jsx("p",{className:"text-2xl font-bold text-red-400",children:z.rejected})]}),(0,s.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-xl p-4",children:[s.jsx("p",{className:"text-sm text-gray-400",children:"Avg Risk Score"}),s.jsx("p",{className:`text-2xl font-bold ${C(z.avgRisk)}`,children:z.avgRisk})]})]}),(0,s.jsxs)("div",{className:"flex gap-4 mb-6 border-b border-gicm-border",children:[s.jsx("button",{onClick:()=>t("queue"),className:`pb-3 px-1 text-sm font-medium transition-colors ${"queue"===e?"text-gicm-primary border-b-2 border-gicm-primary":"text-gray-400 hover:text-white"}`,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(d.Z,{className:"w-4 h-4"}),"Approval Queue",E>0&&s.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-yellow-500/20 text-yellow-400 rounded-full",children:E})]})}),s.jsx("button",{onClick:()=>t("boundaries"),className:`pb-3 px-1 text-sm font-medium transition-colors ${"boundaries"===e?"text-gicm-primary border-b-2 border-gicm-primary":"text-gray-400 hover:text-white"}`,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(p.Z,{className:"w-4 h-4"}),"Boundaries"]})}),s.jsx("button",{onClick:()=>t("audit"),className:`pb-3 px-1 text-sm font-medium transition-colors ${"audit"===e?"text-gicm-primary border-b-2 border-gicm-primary":"text-gray-400 hover:text-white"}`,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(h.Z,{className:"w-4 h-4"}),"Audit Log"]})})]}),"queue"===e&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.filter(e=>"pending"===e.status).map(e=>s.jsx(P,{request:e,onApprove:()=>_(e.id),onReject:()=>I(e.id),isLoading:O===e.id},e.id)),0===r.filter(e=>"pending"===e.status).length&&(0,s.jsxs)("div",{className:"col-span-full text-center py-12 text-gray-400",children:[s.jsx(b.Z,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No pending approvals"}),s.jsx("p",{className:"text-sm mt-2",children:"All actions are being handled automatically"})]})]}),"boundaries"===e&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-xl p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"p-2 rounded-lg bg-green-500/20",children:s.jsx(c.Z,{className:"w-5 h-5 text-green-400"})}),s.jsx("h3",{className:"font-semibold text-white",children:"Financial"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Max Auto Expense ($)"}),s.jsx("input",{type:"number",value:w.financial.maxAutoExpense,onChange:e=>W({...w,financial:{...w.financial,maxAutoExpense:Number(e.target.value)}}),className:"w-full px-3 py-2 bg-white/5 border border-gicm-border rounded-lg text-white"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Max Daily Spend ($)"}),s.jsx("input",{type:"number",value:w.financial.maxDailySpend,onChange:e=>W({...w,financial:{...w.financial,maxDailySpend:Number(e.target.value)}}),className:"w-full px-3 py-2 bg-white/5 border border-gicm-border rounded-lg text-white"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Max Trade Size ($)"}),s.jsx("input",{type:"number",value:w.financial.maxTradeSize,onChange:e=>W({...w,financial:{...w.financial,maxTradeSize:Number(e.target.value)}}),className:"w-full px-3 py-2 bg-white/5 border border-gicm-border rounded-lg text-white"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-xl p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"p-2 rounded-lg bg-purple-500/20",children:s.jsx(l.Z,{className:"w-5 h-5 text-purple-400"})}),s.jsx("h3",{className:"font-semibold text-white",children:"Content"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Max Auto Posts/Day"}),s.jsx("input",{type:"number",value:w.content.maxAutoPostsPerDay,onChange:e=>W({...w,content:{...w.content,maxAutoPostsPerDay:Number(e.target.value)}}),className:"w-full px-3 py-2 bg-white/5 border border-gicm-border rounded-lg text-white"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Max Auto Blogs/Week"}),s.jsx("input",{type:"number",value:w.content.maxAutoBlogsPerWeek,onChange:e=>W({...w,content:{...w.content,maxAutoBlogsPerWeek:Number(e.target.value)}}),className:"w-full px-3 py-2 bg-white/5 border border-gicm-border rounded-lg text-white"})]})]})]}),(0,s.jsxs)("div",{className:"bg-gicm-card border border-gicm-border rounded-xl p-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"p-2 rounded-lg bg-blue-500/20",children:s.jsx(i,{className:"w-5 h-5 text-blue-400"})}),s.jsx("h3",{className:"font-semibold text-white",children:"Development"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Max Auto Commit Lines"}),s.jsx("input",{type:"number",value:w.development.maxAutoCommitLines,onChange:e=>W({...w,development:{...w.development,maxAutoCommitLines:Number(e.target.value)}}),className:"w-full px-3 py-2 bg-white/5 border border-gicm-border rounded-lg text-white"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"text-sm text-gray-400",children:"Auto Deploy to Prod"}),s.jsx("button",{onClick:()=>W({...w,development:{...w.development,autoDeployToProduction:!w.development.autoDeployToProduction}}),className:`w-12 h-6 rounded-full transition-colors ${w.development.autoDeployToProduction?"bg-gicm-primary":"bg-gray-600"}`,children:s.jsx("span",{className:`block w-5 h-5 rounded-full bg-white transform transition-transform ${w.development.autoDeployToProduction?"translate-x-6":"translate-x-0.5"}`})})]})]})]})]}),"audit"===e&&s.jsx("div",{className:"bg-gicm-card border border-gicm-border rounded-xl",children:s.jsx("div",{className:"divide-y divide-gicm-border",children:m.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 hover:bg-white/5 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`p-2 rounded-lg ${"auto_execute"===e.decision?"bg-green-500/20":"queue_approval"===e.decision?"bg-yellow-500/20":"reject"===e.decision?"bg-red-500/20":"bg-orange-500/20"}`,children:"auto_execute"===e.decision?s.jsx(b.Z,{className:"w-4 h-4 text-green-400"}):"queue_approval"===e.decision?s.jsx(d.Z,{className:"w-4 h-4 text-yellow-400"}):"reject"===e.decision?s.jsx(y.Z,{className:"w-4 h-4 text-red-400"}):s.jsx(j.Z,{className:"w-4 h-4 text-orange-400"})}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-medium text-white",children:e.action}),s.jsx("p",{className:"text-sm text-gray-400",children:e.details})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-6",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:`text-sm font-medium ${C(e.riskScore)}`,children:["Risk: ",e.riskScore]}),s.jsx("p",{className:"text-xs text-gray-500 capitalize",children:e.decision.replace("_"," ")})]}),(0,s.jsxs)("div",{className:"text-right w-20",children:[s.jsx("p",{className:`text-sm ${"success"===e.outcome?"text-green-400":"failure"===e.outcome?"text-red-400":"text-yellow-400"}`,children:e.outcome}),s.jsx("p",{className:"text-xs text-gray-500",children:function(e){let t=Date.now()-e;return t<6e4?"Just now":t<36e5?`${Math.floor(t/6e4)}m ago`:t<864e5?`${Math.floor(t/36e5)}h ago`:new Date(e).toLocaleDateString()}(e.timestamp)})]})]})]},e.id))})})]})})}},15961:(e,t,r)=>{"use strict";r.d(t,{Y:()=>i});var s=r(52723),a=r(63035),n=r(98412);let l={connected:{icon:a.Z,label:"Real-time",color:"text-green-400",dot:"bg-green-400 animate-pulse",bg:"bg-green-500/10 border-green-500/30"},connecting:{icon:a.Z,label:"Connecting...",color:"text-yellow-400",dot:"bg-yellow-400 animate-pulse",bg:"bg-yellow-500/10 border-yellow-500/30"},disconnected:{icon:n.Z,label:"Offline",color:"text-gray-400",dot:"bg-gray-400",bg:"bg-gray-500/10 border-gray-500/30"},error:{icon:n.Z,label:"Error",color:"text-red-400",dot:"bg-red-400",bg:"bg-red-500/10 border-red-500/30"}};function i({status:e,isRealtime:t,compact:r=!1}){let a=l[e]||l.disconnected,n=a.icon;return r?(0,s.jsxs)("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded-full ${a.bg} border`,children:[s.jsx("span",{className:`w-2 h-2 rounded-full ${a.dot}`}),s.jsx("span",{className:`text-xs font-medium ${a.color}`,children:a.label})]}):s.jsx("div",{className:"flex items-center gap-2",children:(0,s.jsxs)("div",{className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg ${a.bg} border`,children:[s.jsx(n,{className:`w-4 h-4 ${a.color}`}),s.jsx("span",{className:`text-xs font-medium ${a.color}`,children:t?"Real-time":a.label})]})})}},99040:(e,t,r)=>{"use strict";r.d(t,{s:()=>l});var s=r(3789);let a=process.env.NEXT_PUBLIC_WS_URL||"ws://localhost:3001/ws",n={autoReconnect:!0,reconnectDelay:3e3,maxReconnectAttempts:10,heartbeat:!0,heartbeatInterval:3e4,rooms:[],onEvent:()=>{},onMessage:()=>{},onStatusChange:()=>{}};function l(e={}){let t={...n,...e},[r,l]=(0,s.useState)("disconnected"),[i,c]=(0,s.useState)([]),[o,d]=(0,s.useState)(null),[u,m]=(0,s.useState)(null),x=(0,s.useRef)(null),g=(0,s.useRef)(0),p=(0,s.useRef)(null),h=(0,s.useRef)(null),b=(0,s.useRef)(!0),y=(0,s.useCallback)(e=>{b.current&&(l(e),t.onStatusChange(e))},[t]),j=(0,s.useCallback)(()=>{h.current&&(clearInterval(h.current),h.current=null)},[]),v=(0,s.useCallback)(()=>{j(),t.heartbeat&&x.current?.readyState===WebSocket.OPEN&&(h.current=setInterval(()=>{x.current?.readyState===WebSocket.OPEN&&x.current.send(JSON.stringify({type:"ping"}))},t.heartbeatInterval))},[t.heartbeat,t.heartbeatInterval,j]),f=(0,s.useCallback)(()=>{p.current&&(clearTimeout(p.current),p.current=null),j(),x.current&&(x.current.close(),x.current=null),g.current=0,y("disconnected")},[j,y]),N=(0,s.useCallback)(()=>{if(x.current?.readyState!==WebSocket.CONNECTING&&x.current?.readyState!==WebSocket.OPEN){x.current&&x.current.close(),y("connecting"),m(null);try{let e=new WebSocket(a);x.current=e,e.onopen=()=>{b.current&&(g.current=0,y("connected"),v(),e.send(JSON.stringify({type:"subscribe",channels:["events","status","metrics"]})),t.rooms.length>0&&e.send(JSON.stringify({action:"subscribe",rooms:t.rooms})))},e.onmessage=e=>{if(b.current)try{let r=JSON.parse(e.data);if(d(r),t.onMessage(r),"event"===r.type&&r.payload){let e=r.payload;c(t=>[e,...t].slice(0,100)),t.onEvent(e)}}catch(e){console.warn("Failed to parse WebSocket message:",e)}},e.onerror=e=>{b.current&&(console.error("WebSocket error:",e),m("Connection error"),y("error"))},e.onclose=e=>{if(b.current){if(j(),1e3===e.code){y("disconnected");return}if(y("disconnected"),t.autoReconnect&&(0===t.maxReconnectAttempts||g.current<t.maxReconnectAttempts)){g.current++;let e=t.reconnectDelay*Math.min(g.current,5);p.current=setTimeout(()=>{b.current&&N()},e)}}}}catch(e){console.error("Failed to create WebSocket:",e),m(e instanceof Error?e.message:"Failed to connect"),y("error")}}},[t,y,v,j]),k=(0,s.useCallback)(e=>x.current?.readyState===WebSocket.OPEN&&(x.current.send(JSON.stringify(e)),!0),[]),w=(0,s.useCallback)(()=>{c([])},[]),S=(0,s.useCallback)(e=>x.current?.readyState===WebSocket.OPEN&&e.length>0&&(x.current.send(JSON.stringify({action:"subscribe",rooms:e})),!0),[]),C=(0,s.useCallback)(e=>x.current?.readyState===WebSocket.OPEN&&e.length>0&&(x.current.send(JSON.stringify({action:"unsubscribe",rooms:e})),!0),[]);return{status:r,events:i,lastMessage:o,error:u,isConnected:"connected"===r,reconnectAttempts:g.current,connect:N,disconnect:f,send:k,clearEvents:w,subscribe:S,unsubscribe:C}}},36722:(e,t,r)=>{"use strict";r.d(t,{PK:()=>l,yu:()=>s});let s="http://localhost:3100";async function a(e){try{let t=await fetch(`${s}/api${e}`,{signal:AbortSignal.timeout(5e3),cache:"no-store"});if(!t.ok)return null;return t.json()}catch{return null}}async function n(e,t){try{let r=await fetch(`${s}/api${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:t?JSON.stringify(t):void 0,signal:AbortSignal.timeout(1e4)});if(!r.ok)return null;return r.json()}catch{return null}}s.replace(/^http/,"ws");let l={getStatus:()=>a("/status"),getBrain:()=>a("/brain/status"),getBrainStatus:()=>a("/brain/status"),getBrainStats:()=>a("/brain/stats"),getBrainRecent:(e=20)=>a(`/brain/recent?limit=${e}`),getBrainPatterns:()=>a("/brain/patterns"),getBrainPredictions:()=>a("/brain/predictions"),searchBrain:e=>n("/brain/search",{query:e}),triggerIngest:e=>n("/brain/ingest",{source:e}),getBrainKnowledgeById:e=>a(`/brain/knowledge/${e}`),getBrainKnowledgeByTopic:(e,t=20)=>a(`/brain/knowledge/topic/${e}?limit=${t}`),getBrainKnowledgeSimilar:(e,t=10)=>a(`/brain/knowledge/${e}/similar?limit=${t}`),getBrainPatternById:e=>a(`/brain/patterns/${e}`),getBrainPredictionById:e=>a(`/brain/predictions/${e}`),generateBrainPredictions:(e,t=5)=>n("/brain/predictions/generate",{type:e,count:t}),getBrainIngestStats:()=>a("/brain/ingest/stats"),getTreasury:()=>a("/treasury"),getMoney:()=>a("/money/status"),getGrowth:()=>a("/growth/status"),getProduct:()=>a("/product/status"),getHunter:()=>a("/hunter/status"),getAutonomy:()=>a("/autonomy/status"),getPredictions:()=>a("/predictions/status"),getEvents:(e=50,t)=>a(`/events?limit=${e}${t?`&category=${t}`:""}`),getEnrichedEvents:(e=50,t,r)=>a(`/events/enriched?limit=${e}${t?`&category=${t}`:""}${r?`&severity=${r}`:""}`),getEventCategories:()=>a("/events/categories"),startBrain:()=>n("/brain/start"),stopBrain:()=>n("/brain/stop"),triggerPhase:e=>n("/brain/phase",{phase:e}),runDiscovery:()=>n("/discovery/run"),generateContent:e=>n("/content/generate",{type:e})}},53006:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(82016).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},74067:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(82016).Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},91109:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(82016).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},66969:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(82016).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},71770:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(82016).Z)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},72839:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(82016).Z)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},76289:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(82016).Z)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},75308:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(82016).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},50527:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(82016).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},20590:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(82016).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2901:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(51509).createProxy)(String.raw`C:\Users\mirko\OneDrive\Desktop\gICM\apps\dashboard\app\autonomy\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[547,9557,6867],()=>r(48821));module.exports=s})();