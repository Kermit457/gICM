{"version":3,"sources":["../src/execution/agent-executor.ts","../src/execution/tool-registry.ts"],"sourcesContent":["/**\n * Agent Executor - Dynamically loads and executes gICM agents\n *\n * Bridges PTC pipeline steps to actual agent implementations with:\n * - Dynamic agent loading\n * - Input validation\n * - Cost/token tracking\n * - Error handling and retries\n */\n\nimport { EventEmitter } from \"eventemitter3\";\nimport { toolRegistry, type ToolResult } from \"./tool-registry.js\";\n\n// Executor configuration\nexport interface ExecutorConfig {\n  timeout?: number; // ms, default 30000\n  retries?: number; // default 0\n  verbose?: boolean;\n  mockMode?: boolean; // use mock responses instead of real agents\n}\n\n// Execution context passed to agents\nexport interface ExecutionContext {\n  executionId: string;\n  stepId: string;\n  pipelineId: string;\n  inputs: Record<string, unknown>;\n  previousResults: Record<string, unknown>;\n}\n\n// Executor events\nexport interface ExecutorEvents {\n  \"execution:start\": (ctx: ExecutionContext, toolId: string) => void;\n  \"execution:complete\": (ctx: ExecutionContext, result: ToolResult) => void;\n  \"execution:error\": (ctx: ExecutionContext, error: Error) => void;\n  \"execution:retry\": (ctx: ExecutionContext, attempt: number) => void;\n}\n\n// Agent module cache\nconst agentCache: Map<string, unknown> = new Map();\n\n/**\n * AgentExecutor - Executes tools from the registry\n */\nexport class AgentExecutor extends EventEmitter<ExecutorEvents> {\n  private config: Required<ExecutorConfig>;\n  private totalTokens = 0;\n  private totalCost = 0;\n\n  constructor(config: ExecutorConfig = {}) {\n    super();\n    this.config = {\n      timeout: config.timeout ?? 30000,\n      retries: config.retries ?? 0,\n      verbose: config.verbose ?? false,\n      mockMode: config.mockMode ?? false,\n    };\n  }\n\n  /**\n   * Execute a tool with given inputs\n   */\n  async execute(\n    toolId: string,\n    inputs: Record<string, unknown>,\n    context: ExecutionContext\n  ): Promise<ToolResult> {\n    const startTime = Date.now();\n    this.emit(\"execution:start\", context, toolId);\n\n    // Validate tool exists\n    const tool = toolRegistry.get(toolId);\n    if (!tool) {\n      const error = new Error(`Tool not found: ${toolId}`);\n      this.emit(\"execution:error\", context, error);\n      return {\n        success: false,\n        data: null,\n        error: error.message,\n        duration: Date.now() - startTime,\n      };\n    }\n\n    // Validate inputs\n    const validation = toolRegistry.validateInputs(toolId, inputs);\n    if (!validation.valid) {\n      const error = new Error(`Invalid inputs: ${validation.error}`);\n      this.emit(\"execution:error\", context, error);\n      return {\n        success: false,\n        data: null,\n        error: error.message,\n        duration: Date.now() - startTime,\n      };\n    }\n\n    // Check API key requirements\n    const requirements = toolRegistry.checkRequirements(toolId);\n    if (!requirements.ready && !this.config.mockMode) {\n      const error = new Error(`Missing required API keys: ${requirements.missing.join(\", \")}`);\n      this.emit(\"execution:error\", context, error);\n      return {\n        success: false,\n        data: null,\n        error: error.message,\n        duration: Date.now() - startTime,\n      };\n    }\n\n    // Use mock mode if enabled\n    if (this.config.mockMode) {\n      return this.executeMock(tool.id, inputs, context, startTime);\n    }\n\n    // Execute with retries\n    let lastError: Error | null = null;\n    for (let attempt = 0; attempt <= this.config.retries; attempt++) {\n      if (attempt > 0) {\n        this.emit(\"execution:retry\", context, attempt);\n        await this.delay(1000 * attempt); // exponential backoff\n      }\n\n      try {\n        const result = await this.executeReal(tool.id, tool.package, tool.agentClass, inputs, context);\n        result.duration = Date.now() - startTime;\n\n        // Track costs\n        this.totalTokens += result.tokensUsed ?? 0;\n        this.totalCost += result.cost ?? 0;\n\n        this.emit(\"execution:complete\", context, result);\n        return result;\n      } catch (err) {\n        lastError = err instanceof Error ? err : new Error(String(err));\n        this.log(`Attempt ${attempt + 1} failed: ${lastError.message}`);\n      }\n    }\n\n    // All retries exhausted\n    this.emit(\"execution:error\", context, lastError!);\n    return {\n      success: false,\n      data: null,\n      error: lastError!.message,\n      duration: Date.now() - startTime,\n    };\n  }\n\n  /**\n   * Execute a real agent\n   */\n  private async executeReal(\n    toolId: string,\n    packageName: string,\n    agentClass: string,\n    inputs: Record<string, unknown>,\n    context: ExecutionContext\n  ): Promise<ToolResult> {\n    const estimates = toolRegistry.getEstimatedCost(toolId);\n\n    try {\n      // Dynamic import of the agent package\n      const agentModule = await this.loadAgentModule(packageName);\n\n      // Get the agent class\n      const AgentClass = (agentModule as Record<string, unknown>)[agentClass];\n      if (!AgentClass || typeof AgentClass !== \"function\") {\n        throw new Error(`Agent class ${agentClass} not found in ${packageName}`);\n      }\n\n      // Instantiate the agent\n      const tool = toolRegistry.get(toolId);\n      const config = {\n        ...(tool?.defaultConfig ?? {}),\n        verbose: this.config.verbose,\n      };\n\n      const agent = new (AgentClass as new (config: unknown) => {\n        analyze: (context: { action?: string; params?: Record<string, unknown> }) => Promise<{\n          success: boolean;\n          data?: unknown;\n          error?: string;\n        }>;\n      })(config);\n\n      // Execute with timeout\n      const result = await this.withTimeout(\n        agent.analyze({\n          action: (inputs.action as string) ?? \"analyze\",\n          params: inputs,\n        }),\n        this.config.timeout\n      );\n\n      return {\n        success: result.success,\n        data: result.data,\n        error: result.error,\n        tokensUsed: estimates.tokens,\n        cost: estimates.cost,\n      };\n    } catch (err) {\n      const message = err instanceof Error ? err.message : String(err);\n      throw new Error(`Failed to execute ${toolId}: ${message}`);\n    }\n  }\n\n  /**\n   * Execute with mock data (for testing/demo)\n   */\n  private async executeMock(\n    toolId: string,\n    inputs: Record<string, unknown>,\n    _context: ExecutionContext,\n    startTime: number\n  ): Promise<ToolResult> {\n    // Simulate execution time\n    await this.delay(500 + Math.random() * 1000);\n\n    const estimates = toolRegistry.getEstimatedCost(toolId);\n    const mockData = this.generateMockOutput(toolId, inputs);\n\n    this.totalTokens += estimates.tokens;\n    this.totalCost += estimates.cost;\n\n    return {\n      success: true,\n      data: mockData,\n      tokensUsed: estimates.tokens,\n      cost: estimates.cost,\n      duration: Date.now() - startTime,\n    };\n  }\n\n  /**\n   * Generate mock output based on tool type\n   */\n  private generateMockOutput(toolId: string, inputs: Record<string, unknown>): unknown {\n    const tool = toolRegistry.get(toolId);\n    const category = tool?.category ?? \"analytics\";\n\n    switch (category) {\n      case \"research\":\n        return {\n          discoveries: [\n            {\n              title: \"Trending: AI Agent Framework\",\n              source: \"github\",\n              url: \"https://github.com/example/ai-agents\",\n              score: 85,\n              relevance: \"high\",\n            },\n            {\n              title: \"New DeFi Protocol Launch\",\n              source: \"twitter\",\n              url: \"https://twitter.com/example/status/123\",\n              score: 72,\n              relevance: \"medium\",\n            },\n          ],\n          count: 2,\n          timestamp: Date.now(),\n        };\n\n      case \"trading\":\n        return {\n          recommendation: \"BUY\",\n          confidence: 0.75,\n          analysis: {\n            technical: { trend: \"bullish\", rsi: 45, macd: \"positive\" },\n            fundamental: { tvl: \"increasing\", users: \"growing\" },\n            sentiment: { score: 0.68, volume: \"high\" },\n          },\n          entry: { price: 150.5, size: 0.1 },\n          exit: { takeProfit: 165, stopLoss: 142 },\n        };\n\n      case \"wallet\":\n        return {\n          balance: {\n            sol: 12.5,\n            usdc: 1500.0,\n            tokens: [\n              { mint: \"So11111111111111111111111111111111111111112\", symbol: \"SOL\", amount: 12.5 },\n              { mint: \"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v\", symbol: \"USDC\", amount: 1500 },\n            ],\n          },\n          address: inputs.address ?? \"7xKX...\",\n        };\n\n      case \"security\":\n        return {\n          riskScore: 25,\n          riskLevel: \"low\",\n          findings: [\n            { severity: \"info\", title: \"No reentrancy detected\", description: \"Contract is safe from reentrancy\" },\n            { severity: \"warning\", title: \"Centralized ownership\", description: \"Single owner has admin rights\" },\n          ],\n          passed: true,\n          auditedAt: new Date().toISOString(),\n        };\n\n      case \"content\":\n        return {\n          content: `# ${inputs.topic ?? \"AI Agents in Crypto\"}\\n\\nExploring the intersection of artificial intelligence and blockchain technology...`,\n          wordCount: 850,\n          readTime: \"4 min\",\n          seoScore: 82,\n          keywords: [\"AI\", \"crypto\", \"blockchain\", \"agents\"],\n        };\n\n      case \"defi\":\n        return {\n          protocol: inputs.protocol ?? \"Jupiter\",\n          tvl: 450000000,\n          tvlChange24h: 5.2,\n          apy: 12.5,\n          pools: [\n            { name: \"SOL-USDC\", tvl: 120000000, apy: 8.5 },\n            { name: \"JUP-SOL\", tvl: 45000000, apy: 22.3 },\n          ],\n        };\n\n      case \"analytics\":\n        return {\n          summary: \"Analysis complete\",\n          metrics: {\n            total: 15,\n            positive: 10,\n            negative: 3,\n            neutral: 2,\n          },\n          sentiment: 0.67,\n          trend: \"bullish\",\n          confidence: 0.82,\n        };\n\n      default:\n        return {\n          status: \"completed\",\n          result: \"Mock execution successful\",\n          inputs,\n          timestamp: Date.now(),\n        };\n    }\n  }\n\n  /**\n   * Load agent module with caching\n   */\n  private async loadAgentModule(packageName: string): Promise<unknown> {\n    if (agentCache.has(packageName)) {\n      return agentCache.get(packageName);\n    }\n\n    try {\n      const module = await import(packageName);\n      agentCache.set(packageName, module);\n      return module;\n    } catch (err) {\n      throw new Error(`Failed to load package ${packageName}: ${err}`);\n    }\n  }\n\n  /**\n   * Execute with timeout\n   */\n  private async withTimeout<T>(promise: Promise<T>, ms: number): Promise<T> {\n    return Promise.race([\n      promise,\n      new Promise<T>((_, reject) =>\n        setTimeout(() => reject(new Error(`Execution timeout after ${ms}ms`)), ms)\n      ),\n    ]);\n  }\n\n  /**\n   * Delay helper\n   */\n  private delay(ms: number): Promise<void> {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n\n  /**\n   * Log helper\n   */\n  private log(message: string): void {\n    if (this.config.verbose) {\n      console.log(`[AgentExecutor] ${message}`);\n    }\n  }\n\n  /**\n   * Get execution statistics\n   */\n  getStats(): { totalTokens: number; totalCost: number } {\n    return {\n      totalTokens: this.totalTokens,\n      totalCost: this.totalCost,\n    };\n  }\n\n  /**\n   * Reset statistics\n   */\n  resetStats(): void {\n    this.totalTokens = 0;\n    this.totalCost = 0;\n  }\n}\n\n// Factory function\nexport function createAgentExecutor(config?: ExecutorConfig): AgentExecutor {\n  return new AgentExecutor(config);\n}\n\n// Default executor singleton\nlet defaultExecutor: AgentExecutor | null = null;\n\nexport function getAgentExecutor(): AgentExecutor {\n  if (!defaultExecutor) {\n    defaultExecutor = new AgentExecutor({ mockMode: true });\n  }\n  return defaultExecutor;\n}\n","/**\n * Tool Registry - Maps tool IDs to gICM agent implementations\n *\n * This registry connects PTC pipeline steps to actual agent packages,\n * enabling real execution of multi-agent workflows.\n */\n\nimport { z } from \"zod\";\n\n// Tool category for organization\nexport type ToolCategory =\n  | \"research\"\n  | \"trading\"\n  | \"security\"\n  | \"content\"\n  | \"analytics\"\n  | \"wallet\"\n  | \"defi\"\n  | \"social\";\n\n// Tool execution result\nexport interface ToolResult {\n  success: boolean;\n  data: unknown;\n  error?: string;\n  tokensUsed?: number;\n  cost?: number;\n  duration?: number;\n}\n\n// Tool definition\nexport interface ToolDefinition {\n  id: string;\n  name: string;\n  description: string;\n  category: ToolCategory;\n  package: string; // npm package name\n  agentClass: string; // class name to instantiate\n  defaultConfig: Record<string, unknown>;\n  inputSchema: z.ZodSchema;\n  outputSchema?: z.ZodSchema;\n  estimatedCost: number; // estimated $ per execution\n  estimatedTokens: number; // estimated tokens per execution\n  requiresApiKey?: string[]; // env vars required\n}\n\n// Tool registry singleton\nclass ToolRegistry {\n  private tools: Map<string, ToolDefinition> = new Map();\n  private initialized = false;\n\n  /**\n   * Register all available tools\n   */\n  initialize(): void {\n    if (this.initialized) return;\n\n    // Hunter Agent Tools\n    this.register({\n      id: \"hunter-agent\",\n      name: \"Hunter Agent\",\n      description: \"Discover opportunities from multiple sources (GitHub, Twitter, HN, etc.)\",\n      category: \"research\",\n      package: \"@gicm/hunter-agent\",\n      agentClass: \"HunterAgent\",\n      defaultConfig: {\n        sources: [\n          { source: \"github\", enabled: true },\n          { source: \"hackernews\", enabled: true },\n        ],\n      },\n      inputSchema: z.object({\n        sources: z.array(z.string()).optional(),\n        action: z.enum([\"hunt\", \"status\"]).default(\"hunt\"),\n      }),\n      estimatedCost: 0.002,\n      estimatedTokens: 500,\n    });\n\n    this.register({\n      id: \"github-hunter\",\n      name: \"GitHub Hunter\",\n      description: \"Discover trending repositories and projects on GitHub\",\n      category: \"research\",\n      package: \"@gicm/hunter-agent\",\n      agentClass: \"GitHubHunter\",\n      defaultConfig: {\n        source: \"github\",\n        enabled: true,\n      },\n      inputSchema: z.object({\n        language: z.string().optional(),\n        since: z.enum([\"daily\", \"weekly\", \"monthly\"]).optional(),\n      }),\n      estimatedCost: 0.001,\n      estimatedTokens: 200,\n    });\n\n    this.register({\n      id: \"twitter-hunter\",\n      name: \"Twitter Hunter\",\n      description: \"Monitor Twitter for crypto/AI discussions and trends\",\n      category: \"social\",\n      package: \"@gicm/hunter-agent\",\n      agentClass: \"TwitterHunter\",\n      defaultConfig: {\n        source: \"twitter\",\n        enabled: true,\n      },\n      inputSchema: z.object({\n        query: z.string().optional(),\n        accounts: z.array(z.string()).optional(),\n      }),\n      estimatedCost: 0.001,\n      estimatedTokens: 300,\n      requiresApiKey: [\"TWITTER_BEARER_TOKEN\"],\n    });\n\n    // Wallet Agent Tools\n    this.register({\n      id: \"wallet-agent\",\n      name: \"Wallet Agent\",\n      description: \"Check wallet balances and manage token accounts\",\n      category: \"wallet\",\n      package: \"@gicm/wallet-agent\",\n      agentClass: \"SolanaWallet\",\n      defaultConfig: {},\n      inputSchema: z.object({\n        action: z.enum([\"balance\", \"tokens\", \"history\"]).default(\"balance\"),\n        address: z.string().optional(),\n      }),\n      estimatedCost: 0,\n      estimatedTokens: 100,\n      requiresApiKey: [\"SOLANA_RPC_URL\"],\n    });\n\n    this.register({\n      id: \"token-balance\",\n      name: \"Token Balance\",\n      description: \"Get token balances for a Solana wallet\",\n      category: \"wallet\",\n      package: \"@gicm/wallet-agent\",\n      agentClass: \"SolanaWallet\",\n      defaultConfig: {},\n      inputSchema: z.object({\n        address: z.string(),\n        mint: z.string().optional(),\n      }),\n      estimatedCost: 0,\n      estimatedTokens: 50,\n    });\n\n    // DeFi Agent Tools\n    this.register({\n      id: \"defi-agent\",\n      name: \"DeFi Agent\",\n      description: \"Analyze DeFi protocols, yields, and opportunities\",\n      category: \"defi\",\n      package: \"@gicm/defi-agent\",\n      agentClass: \"DeFiAgent\",\n      defaultConfig: {},\n      inputSchema: z.object({\n        protocol: z.string().optional(),\n        chain: z.string().default(\"solana\"),\n        action: z.enum([\"analyze\", \"yields\", \"tvl\"]).default(\"analyze\"),\n      }),\n      estimatedCost: 0.003,\n      estimatedTokens: 800,\n    });\n\n    // Audit Agent Tools\n    this.register({\n      id: \"audit-agent\",\n      name: \"Audit Agent\",\n      description: \"Security audit for smart contracts\",\n      category: \"security\",\n      package: \"@gicm/audit-agent\",\n      agentClass: \"AuditAgent\",\n      defaultConfig: {},\n      inputSchema: z.object({\n        contract: z.string(),\n        chain: z.string().default(\"solana\"),\n        depth: z.enum([\"quick\", \"standard\", \"deep\"]).default(\"standard\"),\n      }),\n      estimatedCost: 0.01,\n      estimatedTokens: 2000,\n    });\n\n    // Decision Agent Tools\n    this.register({\n      id: \"decision-agent\",\n      name: \"Decision Agent\",\n      description: \"Make trading decisions based on analysis\",\n      category: \"trading\",\n      package: \"@gicm/decision-agent\",\n      agentClass: \"DecisionAgent\",\n      defaultConfig: {},\n      inputSchema: z.object({\n        analysis: z.unknown(),\n        riskTolerance: z.enum([\"low\", \"medium\", \"high\"]).default(\"medium\"),\n        portfolio: z.unknown().optional(),\n      }),\n      estimatedCost: 0.005,\n      estimatedTokens: 1000,\n    });\n\n    // Social Agent Tools\n    this.register({\n      id: \"social-agent\",\n      name: \"Social Agent\",\n      description: \"Social media automation and content scheduling\",\n      category: \"social\",\n      package: \"@gicm/social-agent\",\n      agentClass: \"SocialAgent\",\n      defaultConfig: {},\n      inputSchema: z.object({\n        platform: z.enum([\"twitter\", \"discord\", \"telegram\"]),\n        action: z.enum([\"post\", \"schedule\", \"analyze\"]),\n        content: z.string().optional(),\n      }),\n      estimatedCost: 0.002,\n      estimatedTokens: 400,\n    });\n\n    // Content Generation Tools (Growth Engine)\n    this.register({\n      id: \"blog-generator\",\n      name: \"Blog Generator\",\n      description: \"Generate SEO-optimized blog posts\",\n      category: \"content\",\n      package: \"@gicm/growth-engine\",\n      agentClass: \"BlogGenerator\",\n      defaultConfig: {},\n      inputSchema: z.object({\n        topic: z.string(),\n        keywords: z.array(z.string()).optional(),\n        length: z.enum([\"short\", \"medium\", \"long\"]).default(\"medium\"),\n      }),\n      estimatedCost: 0.02,\n      estimatedTokens: 4000,\n    });\n\n    this.register({\n      id: \"tweet-generator\",\n      name: \"Tweet Generator\",\n      description: \"Generate engaging tweets from content\",\n      category: \"content\",\n      package: \"@gicm/growth-engine\",\n      agentClass: \"TweetGenerator\",\n      defaultConfig: {},\n      inputSchema: z.object({\n        content: z.string(),\n        style: z.enum([\"informative\", \"engaging\", \"promotional\"]).default(\"engaging\"),\n        count: z.number().default(5),\n      }),\n      estimatedCost: 0.005,\n      estimatedTokens: 800,\n    });\n\n    this.register({\n      id: \"seo-researcher\",\n      name: \"SEO Researcher\",\n      description: \"Research keywords and SEO opportunities\",\n      category: \"content\",\n      package: \"@gicm/growth-engine\",\n      agentClass: \"KeywordResearcher\",\n      defaultConfig: {},\n      inputSchema: z.object({\n        topic: z.string(),\n        competitors: z.array(z.string()).optional(),\n      }),\n      estimatedCost: 0.003,\n      estimatedTokens: 600,\n    });\n\n    // Analytics Tools\n    this.register({\n      id: \"sentiment-analyzer\",\n      name: \"Sentiment Analyzer\",\n      description: \"Analyze sentiment from social data\",\n      category: \"analytics\",\n      package: \"@gicm/hunter-agent\",\n      agentClass: \"SentimentAnalyzer\",\n      defaultConfig: {},\n      inputSchema: z.object({\n        data: z.unknown(),\n        source: z.string().optional(),\n      }),\n      estimatedCost: 0.002,\n      estimatedTokens: 500,\n    });\n\n    this.register({\n      id: \"price-oracle\",\n      name: \"Price Oracle\",\n      description: \"Get real-time token prices from multiple sources\",\n      category: \"trading\",\n      package: \"@gicm/defi-agent\",\n      agentClass: \"PriceOracle\",\n      defaultConfig: {},\n      inputSchema: z.object({\n        token: z.string(),\n        chain: z.string().default(\"solana\"),\n      }),\n      estimatedCost: 0,\n      estimatedTokens: 50,\n    });\n\n    // Report Generation\n    this.register({\n      id: \"report-generator\",\n      name: \"Report Generator\",\n      description: \"Generate comprehensive analysis reports\",\n      category: \"analytics\",\n      package: \"@gicm/agent-core\",\n      agentClass: \"ReportGenerator\",\n      defaultConfig: {},\n      inputSchema: z.object({\n        data: z.unknown(),\n        format: z.enum([\"markdown\", \"json\", \"html\"]).default(\"markdown\"),\n        sections: z.array(z.string()).optional(),\n      }),\n      estimatedCost: 0.01,\n      estimatedTokens: 2000,\n    });\n\n    this.initialized = true;\n  }\n\n  /**\n   * Register a tool\n   */\n  register(tool: ToolDefinition): void {\n    this.tools.set(tool.id, tool);\n  }\n\n  /**\n   * Get a tool by ID\n   */\n  get(id: string): ToolDefinition | undefined {\n    this.initialize();\n    return this.tools.get(id);\n  }\n\n  /**\n   * Get all tools\n   */\n  getAll(): ToolDefinition[] {\n    this.initialize();\n    return Array.from(this.tools.values());\n  }\n\n  /**\n   * Get tools by category\n   */\n  getByCategory(category: ToolCategory): ToolDefinition[] {\n    this.initialize();\n    return this.getAll().filter((t) => t.category === category);\n  }\n\n  /**\n   * Search tools by name or description\n   */\n  search(query: string): ToolDefinition[] {\n    this.initialize();\n    const lower = query.toLowerCase();\n    return this.getAll().filter(\n      (t) =>\n        t.name.toLowerCase().includes(lower) ||\n        t.description.toLowerCase().includes(lower) ||\n        t.id.toLowerCase().includes(lower)\n    );\n  }\n\n  /**\n   * Check if a tool exists\n   */\n  has(id: string): boolean {\n    this.initialize();\n    return this.tools.has(id);\n  }\n\n  /**\n   * Validate inputs for a tool\n   */\n  validateInputs(toolId: string, inputs: unknown): { valid: boolean; error?: string } {\n    const tool = this.get(toolId);\n    if (!tool) {\n      return { valid: false, error: `Tool not found: ${toolId}` };\n    }\n\n    try {\n      tool.inputSchema.parse(inputs);\n      return { valid: true };\n    } catch (err) {\n      const message = err instanceof Error ? err.message : \"Validation failed\";\n      return { valid: false, error: message };\n    }\n  }\n\n  /**\n   * Get estimated cost for executing a tool\n   */\n  getEstimatedCost(toolId: string): { cost: number; tokens: number } {\n    const tool = this.get(toolId);\n    if (!tool) {\n      return { cost: 0.01, tokens: 500 }; // default estimates\n    }\n    return {\n      cost: tool.estimatedCost,\n      tokens: tool.estimatedTokens,\n    };\n  }\n\n  /**\n   * Check if required API keys are available\n   */\n  checkRequirements(toolId: string): { ready: boolean; missing: string[] } {\n    const tool = this.get(toolId);\n    if (!tool || !tool.requiresApiKey) {\n      return { ready: true, missing: [] };\n    }\n\n    const missing = tool.requiresApiKey.filter((key) => !process.env[key]);\n    return {\n      ready: missing.length === 0,\n      missing,\n    };\n  }\n}\n\n// Singleton instance\nexport const toolRegistry = new ToolRegistry();\n\n// Export for easy access\nexport function getToolRegistry(): ToolRegistry {\n  return toolRegistry;\n}\n"],"mappings":"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","names":[]}