{"version":3,"sources":["../src/cli.ts"],"sourcesContent":["#!/usr/bin/env node\n/**\n * gICM Growth Engine CLI\n *\n * Command-line interface for the Growth Engine.\n */\n\n// Prevent MaxListenersExceededWarning from pino-pretty\nprocess.setMaxListeners(20);\n\n// Load environment variables\nimport dotenv from \"dotenv\";\ndotenv.config();\n\nimport { GrowthEngine } from \"./index.js\";\nimport { Logger } from \"./utils/logger.js\";\n\nconst logger = new Logger(\"CLI\");\n\nasync function main(): Promise<void> {\n  const args = process.argv.slice(2);\n  const command = args[0];\n\n  const engine = new GrowthEngine();\n\n  switch (command) {\n    case \"start\":\n      await engine.start();\n      logger.info(\"Growth Engine is running. Press Ctrl+C to stop.\");\n\n      // Keep running\n      process.on(\"SIGINT\", () => {\n        engine.stop();\n        process.exit(0);\n      });\n      break;\n\n    case \"generate\":\n      const type = args[1] as \"blog\" | \"tweet\" | \"thread\";\n      if (![\"blog\", \"tweet\", \"thread\"].includes(type)) {\n        logger.error('Usage: growth generate <blog|tweet|thread> [topic]');\n        process.exit(1);\n      }\n      const contentTopic = args.slice(2).join(\" \") || undefined;\n      const result = await engine.generateNow(type, contentTopic);\n      if (result && type === \"blog\") {\n        console.log(`\\nBlog post created:`);\n        console.log(`  Title: ${result.title}`);\n        console.log(`  Slug: ${result.slug}`);\n        console.log(`  Words: ${result.wordCount}`);\n        console.log(`  Saved to: ./content/blog/${result.slug}.mdx`);\n      }\n      break;\n\n    case \"blogs\":\n      const blogCmd = args[1];\n      if (blogCmd === \"list\") {\n        const posts = await engine.getBlogPosts();\n        if (posts.length === 0) {\n          console.log(\"\\nNo blog posts found.\");\n        } else {\n          console.log(`\\n=== Blog Posts (${posts.length}) ===\\n`);\n          posts.forEach((p, i) => {\n            console.log(`${i + 1}. ${p.title}`);\n            console.log(`   Slug: ${p.slug}`);\n            console.log(`   Category: ${p.category} | Words: ${p.wordCount}`);\n            console.log(`   Created: ${new Date(p.createdAt).toLocaleDateString()}`);\n            console.log(\"\");\n          });\n        }\n      } else if (blogCmd === \"stats\") {\n        const stats = await engine.getBlogStats();\n        console.log(\"\\n=== Blog Statistics ===\\n\");\n        console.log(`Total posts: ${stats.totalPosts}`);\n        console.log(`Total words: ${stats.totalWords.toLocaleString()}`);\n        console.log(\"\\nBy category:\");\n        Object.entries(stats.categories).forEach(([cat, count]) => {\n          console.log(`  ${cat}: ${count}`);\n        });\n      } else {\n        console.log(`\nBlog Commands:\n  growth blogs list     List all blog posts\n  growth blogs stats    Show blog statistics\n        `);\n      }\n      break;\n\n    case \"keywords\":\n      const topic = args.slice(1).join(\" \") || \"AI development tools\";\n      await engine.researchKeywords(topic);\n      break;\n\n    case \"status\":\n      const status = engine.getStatus();\n      console.log(\"\\n=== Growth Engine Status ===\\n\");\n      console.log(`Running: ${status.running}`);\n      console.log(`Started: ${status.startedAt ? new Date(status.startedAt).toISOString() : \"N/A\"}`);\n      console.log(\"\\nMetrics:\");\n      console.log(`  Posts published: ${status.metrics.content.postsPublished}`);\n      console.log(`  Total views: ${status.metrics.content.totalViews}`);\n      console.log(`  Avg engagement: ${status.metrics.content.avgEngagement}%`);\n      const upcomingCount = (status.upcomingContent as { upcoming?: unknown[] }).upcoming?.length || 0;\n      console.log(`\\nUpcoming content: ${upcomingCount} items`);\n      break;\n\n    case \"discord\":\n      const discordCmd = args[1];\n      switch (discordCmd) {\n        case \"feature\":\n          const featureName = args[2] || \"New Feature\";\n          const featureDesc = args.slice(3).join(\" \") || \"A new feature has been added!\";\n          await engine.announceFeature({ name: featureName, description: featureDesc });\n          logger.info(`Announced feature: ${featureName}`);\n          break;\n        case \"update\":\n          const version = args[2] || \"1.0.0\";\n          const changes = args.slice(3).join(\" \").split(\",\").map((c) => c.trim());\n          await engine.announceUpdate(version, changes);\n          logger.info(`Announced update: v${version}`);\n          break;\n        case \"members\":\n          const members = await engine.getDiscordMembers();\n          console.log(`Discord members: ${members}`);\n          break;\n        default:\n          console.log(`\nDiscord Commands:\n  growth discord feature <name> <description>   Announce a feature\n  growth discord update <version> <changes>     Announce version update\n  growth discord members                        Get member count\n          `);\n      }\n      break;\n\n    case \"help\":\n    default:\n      console.log(`\ngICM Growth Engine CLI\n\nUsage:\n  growth start                       Start the engine (runs continuously)\n  growth generate <type> [topic]     Generate content (blog, tweet, thread)\n  growth blogs list                  List all saved blog posts\n  growth blogs stats                 Show blog statistics\n  growth keywords <topic>            Research keywords for a topic\n  growth discord <cmd>               Discord commands (feature, update, members)\n  growth status                      Show engine status\n  growth help                        Show this help\n\nExamples:\n  growth start\n  growth generate blog \"Building AI agents with Claude\"\n  growth generate tweet\n  growth blogs list\n  growth keywords \"claude code\"\n  growth discord feature \"Dark Mode\" \"Now supports dark mode!\"\n  growth discord update 2.0.0 \"New UI,Better perf,Bug fixes\"\n      `);\n      break;\n  }\n}\n\nmain().catch((error) => {\n  logger.error(`CLI error: ${error}`);\n  process.exit(1);\n});\n"],"mappings":"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","names":[]}