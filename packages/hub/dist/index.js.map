{"version":3,"sources":["../src/bus/index.ts","../src/utils/logger.ts","../src/engines/base-connector.ts","../src/engines/brain-connector.ts","../src/engines/index.ts","../src/api/index.ts","../src/coordinator/workflows.ts","../src/system/unified-starter.ts","../src/index.ts"],"sourcesContent":["/**\n * Event Bus\n *\n * Central event system for cross-engine communication.\n */\n\nimport { EventEmitter } from \"eventemitter3\";\nimport { nanoid } from \"nanoid\";\nimport type { HubEvent, EngineName, EventCategory } from \"../core/types.js\";\nimport { Logger } from \"../utils/logger.js\";\n\ntype EventHandler = (event: HubEvent) => void | Promise<void>;\n\nexport class EventBus extends EventEmitter {\n  private logger: Logger;\n  private handlers: Map<string, Set<EventHandler>> = new Map();\n  private eventLog: HubEvent[] = [];\n  private maxLogSize: number = 10000;\n\n  constructor() {\n    super();\n    this.logger = new Logger(\"EventBus\");\n  }\n\n  /**\n   * Publish an event\n   */\n  publish(\n    source: EngineName | \"hub\",\n    category: EventCategory,\n    type: string,\n    data: Record<string, unknown>,\n    options: { correlationId?: string; causationId?: string } = {}\n  ): HubEvent {\n    const event: HubEvent = {\n      id: nanoid(),\n      timestamp: Date.now(),\n      source,\n      category,\n      type,\n      data,\n      correlationId: options.correlationId,\n      causationId: options.causationId,\n      processed: false,\n      processedBy: [],\n    };\n\n    // Log event\n    this.eventLog.push(event);\n    if (this.eventLog.length > this.maxLogSize) {\n      this.eventLog.shift();\n    }\n\n    // Emit to all listeners\n    this.emit(type, event);\n    this.emit(\"*\", event);  // Wildcard for all events\n    this.emit(`${category}.*`, event);  // Category wildcard\n\n    this.logger.debug(`Event published: ${type}`, { source, category });\n\n    return event;\n  }\n\n  /**\n   * Subscribe to events\n   */\n  subscribe(eventType: string, handler: EventHandler): () => void {\n    if (!this.handlers.has(eventType)) {\n      this.handlers.set(eventType, new Set());\n    }\n\n    this.handlers.get(eventType)!.add(handler);\n    this.on(eventType, handler);\n\n    this.logger.debug(`Subscribed to: ${eventType}`);\n\n    // Return unsubscribe function\n    return () => {\n      this.handlers.get(eventType)?.delete(handler);\n      this.off(eventType, handler);\n    };\n  }\n\n  /**\n   * Subscribe to all events from an engine\n   */\n  subscribeToEngine(engine: EngineName, handler: EventHandler): () => void {\n    return this.subscribe(\"*\", (event) => {\n      if (event.source === engine) {\n        handler(event);\n      }\n    });\n  }\n\n  /**\n   * Subscribe to all events in a category\n   */\n  subscribeToCategory(category: EventCategory, handler: EventHandler): () => void {\n    return this.subscribe(`${category}.*`, handler);\n  }\n\n  /**\n   * Get recent events\n   */\n  getRecentEvents(count: number = 100): HubEvent[] {\n    return this.eventLog.slice(-count);\n  }\n\n  /**\n   * Get events by type\n   */\n  getEventsByType(type: string, count: number = 100): HubEvent[] {\n    return this.eventLog\n      .filter(e => e.type === type)\n      .slice(-count);\n  }\n\n  /**\n   * Get events by source\n   */\n  getEventsBySource(source: EngineName | \"hub\", count: number = 100): HubEvent[] {\n    return this.eventLog\n      .filter(e => e.source === source)\n      .slice(-count);\n  }\n\n  /**\n   * Clear event log\n   */\n  clearLog(): void {\n    this.eventLog = [];\n  }\n\n  /**\n   * Get stats\n   */\n  getStats(): {\n    totalEvents: number;\n    eventsBySource: Record<string, number>;\n    eventsByCategory: Record<string, number>;\n    handlersCount: number;\n  } {\n    const eventsBySource: Record<string, number> = {};\n    const eventsByCategory: Record<string, number> = {};\n\n    for (const event of this.eventLog) {\n      eventsBySource[event.source] = (eventsBySource[event.source] || 0) + 1;\n      eventsByCategory[event.category] = (eventsByCategory[event.category] || 0) + 1;\n    }\n\n    return {\n      totalEvents: this.eventLog.length,\n      eventsBySource,\n      eventsByCategory,\n      handlersCount: Array.from(this.handlers.values()).reduce((sum, set) => sum + set.size, 0),\n    };\n  }\n}\n\n// Singleton instance\nexport const eventBus = new EventBus();\n","/**\n * Logger utility\n */\n\nimport pino from \"pino\";\n\nexport class Logger {\n  private logger: pino.Logger;\n  private context: string;\n\n  constructor(context: string) {\n    this.context = context;\n    this.logger = pino({\n      transport: {\n        target: \"pino-pretty\",\n        options: {\n          colorize: true,\n          ignore: \"pid,hostname\",\n          translateTime: \"HH:MM:ss\",\n        },\n      },\n    });\n  }\n\n  info(message: string, data?: Record<string, unknown>): void {\n    this.logger.info({ context: this.context, ...data }, message);\n  }\n\n  debug(message: string, data?: Record<string, unknown>): void {\n    this.logger.debug({ context: this.context, ...data }, message);\n  }\n\n  warn(message: string, data?: Record<string, unknown>): void {\n    this.logger.warn({ context: this.context, ...data }, message);\n  }\n\n  error(message: string, data?: Record<string, unknown>): void {\n    this.logger.error({ context: this.context, ...data }, message);\n  }\n}\n","/**\n * Base Engine Connector\n */\n\nimport type { EngineName, EngineState } from \"../core/types.js\";\n\nexport abstract class EngineConnector {\n  protected name: EngineName;\n  protected state: EngineState;\n  protected eventHandlers: ((type: string, data: Record<string, unknown>) => void)[] = [];\n  protected stateHandlers: ((state: EngineState) => void)[] = [];\n\n  constructor(name: EngineName) {\n    this.name = name;\n    this.state = this.initState();\n  }\n\n  private initState(): EngineState {\n    return {\n      name: this.name,\n      status: \"stopped\",\n      health: {\n        status: \"healthy\",\n        lastCheck: Date.now(),\n        uptime: 0,\n        errors: 0,\n      },\n      metrics: {\n        tasksCompleted: 0,\n        tasksPerHour: 0,\n        avgTaskDuration: 0,\n      },\n      connected: false,\n      lastHeartbeat: 0,\n      version: \"1.0.0\",\n    };\n  }\n\n  abstract connect(): Promise<void>;\n  abstract disconnect(): Promise<void>;\n  abstract sendCommand(command: string, params?: Record<string, unknown>): Promise<void>;\n  abstract healthCheck(): Promise<boolean>;\n\n  getState(): EngineState {\n    return { ...this.state };\n  }\n\n  onEvent(handler: (type: string, data: Record<string, unknown>) => void): void {\n    this.eventHandlers.push(handler);\n  }\n\n  onStateChange(handler: (state: EngineState) => void): void {\n    this.stateHandlers.push(handler);\n  }\n\n  protected emitEvent(type: string, data: Record<string, unknown>): void {\n    for (const handler of this.eventHandlers) {\n      handler(type, data);\n    }\n  }\n\n  protected updateState(updates: Partial<EngineState>): void {\n    this.state = { ...this.state, ...updates };\n    for (const handler of this.stateHandlers) {\n      handler(this.state);\n    }\n  }\n}\n","/**\n * HYPER BRAIN Engine Connector\n *\n * Connects HYPER BRAIN to the Integration Hub.\n */\n\nimport { EngineConnector } from \"./base-connector.js\";\nimport type { HyperBrain } from \"@gicm/hyper-brain\";\n\nexport class HyperBrainConnector extends EngineConnector {\n  private brain: HyperBrain | null = null;\n  private apiUrl: string;\n\n  constructor(apiUrl: string = \"http://localhost:3300\") {\n    super(\"brain\");\n    this.apiUrl = apiUrl;\n  }\n\n  /**\n   * Set a direct reference to the HyperBrain instance\n   */\n  setBrain(brain: HyperBrain): void {\n    this.brain = brain;\n    this.setupBrainEventForwarding();\n  }\n\n  /**\n   * Setup event forwarding from HYPER BRAIN to Hub\n   */\n  private setupBrainEventForwarding(): void {\n    if (!this.brain) return;\n\n    // Forward knowledge events\n    this.brain.on(\"knowledge:added\", (item) => {\n      this.emitEvent(\"brain.knowledge.added\", {\n        itemId: item.id,\n        source: item.source.name,\n        summary: item.content.summary,\n        topics: item.topics,\n        importance: item.importance,\n        timestamp: item.timestamp,\n      });\n    });\n\n    // Forward pattern events\n    this.brain.on(\"pattern:discovered\", (pattern) => {\n      this.emitEvent(\"brain.pattern.discovered\", {\n        patternId: pattern.id,\n        name: pattern.name,\n        description: pattern.description,\n        accuracy: pattern.accuracy,\n        confidence: pattern.confidence,\n        occurrences: pattern.occurrences,\n      });\n    });\n\n    // Forward prediction events\n    this.brain.on(\"prediction:made\", (prediction) => {\n      this.emitEvent(\"brain.prediction.made\", {\n        predictionId: prediction.id,\n        type: prediction.type,\n        outcome: prediction.prediction.outcome,\n        probability: prediction.prediction.probability,\n        confidence: prediction.prediction.confidence,\n        timeframe: prediction.prediction.timeframe,\n      });\n    });\n\n    // Forward started/stopped events\n    this.brain.on(\"started\", () => {\n      this.updateState({\n        status: \"running\",\n        connected: true,\n        lastHeartbeat: Date.now(),\n      });\n      this.emitEvent(\"brain.started\", {});\n    });\n\n    this.brain.on(\"stopped\", () => {\n      this.updateState({\n        status: \"stopped\",\n        connected: false,\n      });\n      this.emitEvent(\"brain.stopped\", {});\n    });\n  }\n\n  async connect(): Promise<void> {\n    if (this.brain) {\n      // Direct connection via instance reference\n      this.updateState({\n        connected: true,\n        status: this.brain.isOnline() ? \"running\" : \"stopped\",\n        lastHeartbeat: Date.now(),\n      });\n      return;\n    }\n\n    // API-based connection\n    try {\n      const response = await fetch(`${this.apiUrl}/health`);\n      if (response.ok) {\n        const health = (await response.json()) as { status: string; online: boolean; uptime?: number };\n        this.updateState({\n          connected: true,\n          status: health.online ? \"running\" : \"stopped\",\n          lastHeartbeat: Date.now(),\n          health: {\n            status: \"healthy\",\n            lastCheck: Date.now(),\n            uptime: health.uptime || 0,\n            errors: 0,\n          },\n        });\n      }\n    } catch {\n      this.updateState({\n        connected: false,\n        status: \"error\",\n        health: {\n          ...this.state.health,\n          status: \"unhealthy\",\n          lastCheck: Date.now(),\n        },\n      });\n    }\n  }\n\n  async disconnect(): Promise<void> {\n    this.updateState({\n      connected: false,\n      status: \"stopped\",\n    });\n  }\n\n  async sendCommand(command: string, params?: Record<string, unknown>): Promise<void> {\n    switch (command) {\n      case \"start\":\n        if (this.brain && !this.brain.isOnline()) {\n          await this.brain.start();\n        }\n        this.updateState({ status: \"running\" });\n        break;\n\n      case \"stop\":\n        if (this.brain && this.brain.isOnline()) {\n          await this.brain.stop();\n        }\n        this.updateState({ status: \"stopped\" });\n        break;\n\n      case \"ingest\":\n        if (this.brain) {\n          if (params?.source) {\n            await this.brain.ingestSource(params.source as string);\n          } else {\n            await this.brain.ingestAll();\n          }\n        } else {\n          // API fallback\n          const url = params?.source\n            ? `${this.apiUrl}/ingest/${params.source}`\n            : `${this.apiUrl}/ingest`;\n          await fetch(url, { method: \"POST\" });\n        }\n        break;\n\n      case \"analyze\":\n        if (this.brain) {\n          await this.brain.analyzePatterns();\n        } else {\n          await fetch(`${this.apiUrl}/patterns/analyze`, { method: \"POST\" });\n        }\n        break;\n\n      case \"predict\":\n        const predictType = (params?.type as string) || \"market\";\n        const predictCount = (params?.count as number) || 5;\n        if (this.brain) {\n          await this.brain.predict(predictType as any, predictCount);\n        } else {\n          await fetch(`${this.apiUrl}/predictions/generate`, {\n            method: \"POST\",\n            headers: { \"Content-Type\": \"application/json\" },\n            body: JSON.stringify({ type: predictType, count: predictCount }),\n          });\n        }\n        break;\n\n      case \"search\":\n        if (params?.query && this.brain) {\n          const results = await this.brain.search(params.query as string, (params.limit as number) || 10);\n          this.emitEvent(\"brain.search.results\", {\n            query: params.query,\n            count: results.length,\n            results,\n          });\n        }\n        break;\n    }\n  }\n\n  async healthCheck(): Promise<boolean> {\n    if (this.brain) {\n      const isOnline = this.brain.isOnline();\n      this.updateState({\n        health: {\n          ...this.state.health,\n          status: isOnline ? \"healthy\" : \"unhealthy\",\n          lastCheck: Date.now(),\n          uptime: this.brain.getUptime(),\n        },\n      });\n      return isOnline;\n    }\n\n    // API-based health check\n    try {\n      const response = await fetch(`${this.apiUrl}/health`);\n      if (response.ok) {\n        const health = (await response.json()) as { status: string; online: boolean; uptime?: number };\n        this.updateState({\n          health: {\n            status: health.status === \"ok\" ? \"healthy\" : \"degraded\",\n            lastCheck: Date.now(),\n            uptime: health.uptime || 0,\n            errors: 0,\n          },\n        });\n        return health.online;\n      }\n      return false;\n    } catch {\n      this.updateState({\n        health: {\n          ...this.state.health,\n          status: \"unhealthy\",\n          lastCheck: Date.now(),\n        },\n      });\n      return false;\n    }\n  }\n\n  /**\n   * Get brain stats (direct or via API)\n   */\n  async getStats(): Promise<Record<string, unknown>> {\n    if (this.brain) {\n      return this.brain.getStats() as unknown as Record<string, unknown>;\n    }\n\n    const response = await fetch(`${this.apiUrl}/stats`);\n    return (await response.json()) as Record<string, unknown>;\n  }\n\n  /**\n   * Search the brain (direct or via API)\n   */\n  async search(query: string, limit: number = 10): Promise<unknown[]> {\n    if (this.brain) {\n      return this.brain.search(query, limit);\n    }\n\n    const response = await fetch(`${this.apiUrl}/search?q=${encodeURIComponent(query)}&limit=${limit}`);\n    const data = (await response.json()) as { results?: unknown[] };\n    return data.results || [];\n  }\n}\n","/**\n * Engine Manager\n *\n * Manages connections to all gICM engines.\n */\n\nimport type { EngineName, EngineState, EngineCommand } from \"../core/types.js\";\nimport { eventBus } from \"../bus/index.js\";\nimport { Logger } from \"../utils/logger.js\";\nimport { EngineConnector } from \"./base-connector.js\";\n\n// Re-export base connector\nexport { EngineConnector } from \"./base-connector.js\";\n\nexport class EngineManager {\n  private logger: Logger;\n  private engines: Map<EngineName, EngineConnector> = new Map();\n\n  constructor() {\n    this.logger = new Logger(\"EngineManager\");\n  }\n\n  /**\n   * Register an engine\n   */\n  registerEngine(name: EngineName, connector: EngineConnector): void {\n    this.engines.set(name, connector);\n\n    // Subscribe to engine events\n    connector.onEvent((type, data) => {\n      eventBus.publish(name, name, type, data);\n    });\n\n    // Subscribe to state changes\n    connector.onStateChange((state) => {\n      eventBus.publish(name, \"system\", `${name}.state.changed`, { state });\n    });\n\n    this.logger.info(`Registered engine: ${name}`);\n  }\n\n  /**\n   * Get engine state\n   */\n  getEngineState(name: EngineName): EngineState | undefined {\n    return this.engines.get(name)?.getState();\n  }\n\n  /**\n   * Get all engine states\n   */\n  getAllStates(): Record<EngineName, EngineState | undefined> {\n    const states: Record<string, EngineState | undefined> = {};\n    for (const [name, connector] of this.engines) {\n      states[name] = connector.getState();\n    }\n    return states as Record<EngineName, EngineState | undefined>;\n  }\n\n  /**\n   * Send command to engine\n   */\n  async sendCommand(command: EngineCommand): Promise<boolean> {\n    const connector = this.engines.get(command.engine);\n    if (!connector) {\n      this.logger.error(`Engine not found: ${command.engine}`);\n      return false;\n    }\n\n    try {\n      await connector.sendCommand(command.command, command.params);\n\n      eventBus.publish(\"hub\", \"system\", \"engine.command.sent\", {\n        engine: command.engine,\n        command: command.command,\n      });\n\n      return true;\n    } catch (error) {\n      this.logger.error(`Command failed: ${error}`);\n      return false;\n    }\n  }\n\n  /**\n   * Start all engines\n   */\n  async startAll(): Promise<void> {\n    for (const [name] of this.engines) {\n      await this.sendCommand({ engine: name, command: \"start\" });\n    }\n  }\n\n  /**\n   * Stop all engines\n   */\n  async stopAll(): Promise<void> {\n    for (const [name] of this.engines) {\n      await this.sendCommand({ engine: name, command: \"stop\" });\n    }\n  }\n\n  /**\n   * Health check all engines\n   */\n  async healthCheck(): Promise<Record<EngineName, boolean>> {\n    const results: Record<string, boolean> = {};\n\n    for (const [name, connector] of this.engines) {\n      results[name] = await connector.healthCheck();\n    }\n\n    return results as Record<EngineName, boolean>;\n  }\n}\n\n/**\n * Mock Engine Connector (for testing/demo)\n */\nexport class MockEngineConnector extends EngineConnector {\n  constructor(name: EngineName) {\n    super(name);\n  }\n\n  async connect(): Promise<void> {\n    this.updateState({\n      connected: true,\n      status: \"running\",\n      lastHeartbeat: Date.now(),\n    });\n  }\n\n  async disconnect(): Promise<void> {\n    this.updateState({\n      connected: false,\n      status: \"stopped\",\n    });\n  }\n\n  async sendCommand(command: string, params?: Record<string, unknown>): Promise<void> {\n    switch (command) {\n      case \"start\":\n        this.updateState({ status: \"running\" });\n        break;\n      case \"stop\":\n        this.updateState({ status: \"stopped\" });\n        break;\n      case \"pause\":\n        this.updateState({ status: \"paused\" });\n        break;\n      case \"resume\":\n        this.updateState({ status: \"running\" });\n        break;\n    }\n  }\n\n  async healthCheck(): Promise<boolean> {\n    this.updateState({\n      health: {\n        ...this.state.health,\n        lastCheck: Date.now(),\n      },\n    });\n    return this.state.status === \"running\";\n  }\n}\n\n// Export brain connector\nexport { HyperBrainConnector } from \"./brain-connector.js\";\n","/**\n * API Server\n *\n * REST + WebSocket API for Dashboard and external access.\n */\n\nimport Fastify, { FastifyInstance } from \"fastify\";\nimport fastifyWebsocket from \"@fastify/websocket\";\nimport fastifyCors from \"@fastify/cors\";\nimport type { HubState, WebSocketMessage, EngineName } from \"../core/types.js\";\nimport { eventBus } from \"../bus/index.js\";\nimport { Logger } from \"../utils/logger.js\";\nimport type { WebSocket } from \"ws\";\n\nexport class ApiServer {\n  private app: FastifyInstance;\n  private logger: Logger;\n  private wsClients: Set<WebSocket> = new Set();\n  private getState: () => HubState;\n\n  constructor(getState: () => HubState) {\n    this.logger = new Logger(\"API\");\n    this.getState = getState;\n    this.app = Fastify({ logger: false });\n  }\n\n  async start(port: number = 3100): Promise<void> {\n    // Register plugins\n    await this.app.register(fastifyCors, { origin: true });\n    await this.app.register(fastifyWebsocket);\n\n    // Setup routes\n    this.setupRoutes();\n    this.setupWebSocket();\n\n    // Subscribe to events for WebSocket broadcast\n    eventBus.subscribe(\"*\", (event) => {\n      this.broadcast({ type: \"event\", payload: event, timestamp: Date.now() });\n    });\n\n    await this.app.listen({ port, host: \"0.0.0.0\" });\n    this.logger.info(`API server running on port ${port}`);\n  }\n\n  async stop(): Promise<void> {\n    await this.app.close();\n  }\n\n  private setupRoutes(): void {\n    // Health check\n    this.app.get(\"/health\", async () => {\n      return { status: \"ok\", timestamp: Date.now() };\n    });\n\n    // Get full state\n    this.app.get(\"/api/state\", async () => {\n      return { success: true, data: this.getState(), timestamp: Date.now() };\n    });\n\n    // Get engine states\n    this.app.get(\"/api/engines\", async () => {\n      const state = this.getState();\n      return { success: true, data: state.engines, timestamp: Date.now() };\n    });\n\n    // Get specific engine\n    this.app.get<{ Params: { name: string } }>(\"/api/engines/:name\", async (req) => {\n      const state = this.getState();\n      const engine = state.engines[req.params.name as EngineName];\n      if (!engine) {\n        return { success: false, error: \"Engine not found\", timestamp: Date.now() };\n      }\n      return { success: true, data: engine, timestamp: Date.now() };\n    });\n\n    // Get recent events\n    this.app.get<{ Querystring: { count?: string } }>(\"/api/events\", async (req) => {\n      const count = parseInt(req.query.count || \"100\");\n      const events = eventBus.getRecentEvents(count);\n      return { success: true, data: events, timestamp: Date.now() };\n    });\n\n    // Get event bus stats\n    this.app.get(\"/api/events/stats\", async () => {\n      return { success: true, data: eventBus.getStats(), timestamp: Date.now() };\n    });\n\n    // Send command to engine\n    this.app.post<{ Body: { engine: string; command: string; params?: unknown } }>(\"/api/command\", async (req) => {\n      const { engine, command, params } = req.body;\n\n      // Publish command event\n      eventBus.publish(\"hub\", \"system\", \"engine.command\", { engine, command, params });\n\n      return { success: true, data: { message: \"Command sent\" }, timestamp: Date.now() };\n    });\n\n    // Get metrics\n    this.app.get(\"/api/metrics\", async () => {\n      const state = this.getState();\n      return { success: true, data: state.metrics, timestamp: Date.now() };\n    });\n\n    // Get activity\n    this.app.get(\"/api/activity\", async () => {\n      const state = this.getState();\n      return { success: true, data: state.activity, timestamp: Date.now() };\n    });\n  }\n\n  private setupWebSocket(): void {\n    this.app.register(async (fastify) => {\n      fastify.get(\"/ws\", { websocket: true }, (socket, req) => {\n        this.logger.info(\"WebSocket client connected\");\n        this.wsClients.add(socket);\n\n        // Send initial state\n        socket.send(JSON.stringify({\n          type: \"state\",\n          payload: this.getState(),\n          timestamp: Date.now(),\n        }));\n\n        socket.on(\"message\", (message: Buffer) => {\n          try {\n            const data = JSON.parse(message.toString()) as WebSocketMessage;\n            this.handleWsMessage(socket, data);\n          } catch (error) {\n            this.logger.error(`Invalid WebSocket message: ${error}`);\n          }\n        });\n\n        socket.on(\"close\", () => {\n          this.logger.info(\"WebSocket client disconnected\");\n          this.wsClients.delete(socket);\n        });\n      });\n    });\n  }\n\n  private handleWsMessage(socket: WebSocket, message: WebSocketMessage): void {\n    switch (message.type) {\n      case \"command\":\n        eventBus.publish(\"hub\", \"system\", \"engine.command\", message.payload as Record<string, unknown>);\n        break;\n\n      case \"response\":\n        // Handle response\n        break;\n\n      default:\n        this.logger.warn(`Unknown message type: ${message.type}`);\n    }\n  }\n\n  private broadcast(message: WebSocketMessage): void {\n    const data = JSON.stringify(message);\n    for (const client of this.wsClients) {\n      try {\n        client.send(data);\n      } catch (error) {\n        this.logger.error(`Broadcast failed: ${error}`);\n      }\n    }\n  }\n}\n","/**\n * Cross-Engine Workflows\n *\n * Predefined workflows that coordinate multiple engines.\n */\n\nimport type { Workflow } from \"../core/types.js\";\n\n/**\n * WORKFLOW: New Feature Announcement\n */\nexport const NEW_FEATURE_ANNOUNCEMENT: Workflow = {\n  id: \"wf-new-feature-announcement\",\n  name: \"New Feature Announcement\",\n  description: \"Automatically announce new features across all channels\",\n\n  trigger: {\n    type: \"event\",\n    eventType: \"product.deployed\",\n    eventFilter: { type: \"feature\" },\n  },\n\n  steps: [\n    {\n      id: \"step-1\",\n      name: \"Generate Blog Post\",\n      engine: \"growth\",\n      action: \"generateBlogPost\",\n      params: { template: \"announcement\" },\n      onError: \"continue\",\n      timeout: 60000,\n    },\n    {\n      id: \"step-2\",\n      name: \"Generate Tweets\",\n      engine: \"growth\",\n      action: \"generateTweets\",\n      params: { type: \"product_update\", count: 3 },\n      onError: \"continue\",\n      timeout: 30000,\n    },\n  ],\n\n  status: \"active\",\n  executions: 0,\n  avgDuration: 0,\n};\n\n/**\n * WORKFLOW: Profitable Trade Report\n */\nexport const PROFITABLE_TRADE_REPORT: Workflow = {\n  id: \"wf-profitable-trade\",\n  name: \"Profitable Trade Report\",\n  description: \"Announce significant trading wins\",\n\n  trigger: {\n    type: \"event\",\n    eventType: \"money.trade.executed\",\n  },\n\n  steps: [\n    {\n      id: \"step-1\",\n      name: \"Log Achievement\",\n      engine: \"orchestrator\",\n      action: \"logActivity\",\n      params: { type: \"TRADING_WIN\" },\n      onError: \"continue\",\n      timeout: 5000,\n    },\n  ],\n\n  status: \"active\",\n  executions: 0,\n  avgDuration: 0,\n};\n\n/**\n * WORKFLOW: Low Treasury Alert\n */\nexport const LOW_TREASURY_ALERT: Workflow = {\n  id: \"wf-low-treasury\",\n  name: \"Low Treasury Alert\",\n  description: \"Emergency response when funds are low\",\n\n  trigger: {\n    type: \"event\",\n    eventType: \"money.treasury.low\",\n  },\n\n  steps: [\n    {\n      id: \"step-1\",\n      name: \"Pause Risky Trading\",\n      engine: \"money\",\n      action: \"pauseTradingBots\",\n      params: { bots: [\"arbitrage\", \"sniper\"] },\n      onError: \"continue\",\n      timeout: 5000,\n    },\n    {\n      id: \"step-2\",\n      name: \"Alert Orchestrator\",\n      engine: \"orchestrator\",\n      action: \"logActivity\",\n      params: { type: \"TREASURY_ALERT\", level: \"critical\" },\n      onError: \"stop\",\n      timeout: 5000,\n    },\n  ],\n\n  status: \"active\",\n  executions: 0,\n  avgDuration: 0,\n};\n\n/**\n * WORKFLOW: Daily Summary\n */\nexport const DAILY_SUMMARY: Workflow = {\n  id: \"wf-daily-summary\",\n  name: \"Daily Summary\",\n  description: \"Generate and publish daily performance summary\",\n\n  trigger: {\n    type: \"schedule\",\n    schedule: \"0 0 * * *\",  // Midnight UTC\n  },\n\n  steps: [\n    {\n      id: \"step-1\",\n      name: \"Get Money Metrics\",\n      engine: \"money\",\n      action: \"getDailyMetrics\",\n      params: {},\n      onError: \"continue\",\n      timeout: 10000,\n    },\n    {\n      id: \"step-2\",\n      name: \"Get Growth Metrics\",\n      engine: \"growth\",\n      action: \"getDailyMetrics\",\n      params: {},\n      onError: \"continue\",\n      timeout: 10000,\n    },\n    {\n      id: \"step-3\",\n      name: \"Get Product Metrics\",\n      engine: \"product\",\n      action: \"getDailyMetrics\",\n      params: {},\n      onError: \"continue\",\n      timeout: 10000,\n    },\n    {\n      id: \"step-4\",\n      name: \"Generate Report\",\n      engine: \"orchestrator\",\n      action: \"generateDailyReport\",\n      params: {},\n      onError: \"stop\",\n      timeout: 30000,\n    },\n  ],\n\n  status: \"active\",\n  executions: 0,\n  avgDuration: 0,\n};\n\n/**\n * WORKFLOW: Competitor Feature Response\n */\nexport const COMPETITOR_RESPONSE: Workflow = {\n  id: \"wf-competitor-response\",\n  name: \"Competitor Feature Response\",\n  description: \"Respond to competitor feature launches\",\n\n  trigger: {\n    type: \"event\",\n    eventType: \"product.opportunity.discovered\",\n  },\n\n  steps: [\n    {\n      id: \"step-1\",\n      name: \"Evaluate Feature\",\n      engine: \"orchestrator\",\n      action: \"evaluateOpportunity\",\n      params: {},\n      onError: \"stop\",\n      timeout: 30000,\n    },\n  ],\n\n  status: \"active\",\n  executions: 0,\n  avgDuration: 0,\n};\n\n/**\n * All predefined workflows\n */\nexport const PREDEFINED_WORKFLOWS: Workflow[] = [\n  NEW_FEATURE_ANNOUNCEMENT,\n  PROFITABLE_TRADE_REPORT,\n  LOW_TREASURY_ALERT,\n  DAILY_SUMMARY,\n  COMPETITOR_RESPONSE,\n];\n","/**\n * Unified System Starter\n *\n * Boots all gICM engines and wires them to the Integration Hub.\n */\n\nimport { IntegrationHub } from \"../index.js\";\nimport { HyperBrainConnector } from \"../engines/brain-connector.js\";\nimport { HyperBrain, BrainApiServer } from \"@gicm/hyper-brain\";\nimport { Logger } from \"../utils/logger.js\";\n\nexport interface UnifiedSystemConfig {\n  // Hub\n  hubPort: number;\n\n  // HYPER BRAIN\n  brainPort: number;\n  enableBrain: boolean;\n\n  // Mock other engines\n  mockOtherEngines: boolean;\n\n  // Logging\n  verbose: boolean;\n}\n\nconst DEFAULT_CONFIG: UnifiedSystemConfig = {\n  hubPort: 3100,\n  brainPort: 3300,\n  enableBrain: true,\n  mockOtherEngines: true,\n  verbose: true,\n};\n\nexport class UnifiedSystem {\n  private config: UnifiedSystemConfig;\n  private logger: Logger;\n\n  private hub: IntegrationHub;\n  private brain: HyperBrain | null = null;\n  private brainApi: BrainApiServer | null = null;\n\n  private isRunning = false;\n\n  constructor(config: Partial<UnifiedSystemConfig> = {}) {\n    this.config = { ...DEFAULT_CONFIG, ...config };\n    this.logger = new Logger(\"UnifiedSystem\");\n\n    // Create Hub without mock engines - we'll add real ones\n    this.hub = new IntegrationHub({\n      apiPort: this.config.hubPort,\n      enableApi: true,\n      enableWorkflows: true,\n      mockEngines: this.config.mockOtherEngines,\n    });\n  }\n\n  /**\n   * Start the unified system\n   */\n  async start(): Promise<void> {\n    if (this.isRunning) return;\n\n    this.logger.info(\"Starting gICM Unified System...\");\n    this.isRunning = true;\n\n    // 1. Start HYPER BRAIN if enabled\n    if (this.config.enableBrain) {\n      await this.startBrain();\n    }\n\n    // 2. Start Hub\n    await this.hub.start();\n\n    // 3. Wire HYPER BRAIN to Hub\n    if (this.config.enableBrain && this.brain) {\n      this.wireBrainToHub();\n    }\n\n    this.logger.info(\"gICM Unified System online!\");\n    this.printStatus();\n  }\n\n  /**\n   * Stop the unified system\n   */\n  async stop(): Promise<void> {\n    if (!this.isRunning) return;\n\n    this.logger.info(\"Stopping gICM Unified System...\");\n\n    // Stop Hub first\n    await this.hub.stop();\n\n    // Stop HYPER BRAIN\n    if (this.brainApi) await this.brainApi.stop();\n    if (this.brain) await this.brain.stop();\n\n    this.isRunning = false;\n    this.logger.info(\"gICM Unified System offline\");\n  }\n\n  /**\n   * Start HYPER BRAIN\n   */\n  private async startBrain(): Promise<void> {\n    this.logger.info(\"Starting HYPER BRAIN...\");\n\n    this.brain = new HyperBrain({\n      apiPort: this.config.brainPort,\n    });\n\n    await this.brain.start();\n\n    // Start Brain API server\n    this.brainApi = new BrainApiServer(this.brain, {\n      port: this.config.brainPort,\n      enableWebSocket: true,\n    });\n\n    await this.brainApi.start();\n\n    this.logger.info(`HYPER BRAIN online at http://localhost:${this.config.brainPort}`);\n  }\n\n  /**\n   * Wire HYPER BRAIN to Hub\n   */\n  private wireBrainToHub(): void {\n    if (!this.brain) return;\n\n    this.logger.info(\"Wiring HYPER BRAIN to Hub...\");\n\n    // Create connector with direct brain reference\n    const brainConnector = new HyperBrainConnector(`http://localhost:${this.config.brainPort}`);\n    brainConnector.setBrain(this.brain);\n\n    // Register with Hub's engine manager\n    const engineManager = this.hub.getEngineManager();\n    engineManager.registerEngine(\"brain\", brainConnector);\n\n    // Connect the engine\n    brainConnector.connect();\n\n    this.logger.info(\"HYPER BRAIN wired to Hub\");\n  }\n\n  /**\n   * Get Hub instance\n   */\n  getHub(): IntegrationHub {\n    return this.hub;\n  }\n\n  /**\n   * Get HYPER BRAIN instance\n   */\n  getBrain(): HyperBrain | null {\n    return this.brain;\n  }\n\n  /**\n   * Print system status\n   */\n  printStatus(): void {\n    console.log(\"\\n  gICM Unified System Status\");\n    console.log(\"=\".repeat(60));\n\n    // Hub status\n    const hubState = this.hub.getState();\n    console.log(`\\n  Integration Hub:`);\n    console.log(`   Port: ${this.config.hubPort}`);\n    console.log(`   Events processed: ${hubState.metrics.eventsProcessed}`);\n\n    // Engine status\n    console.log(`\\n  Engines:`);\n    for (const [name, engine] of Object.entries(hubState.engines)) {\n      const status = engine?.status || \"not connected\";\n      const icon = status === \"running\" ? \"[OK]\" : status === \"stopped\" ? \"[--]\" : \"[??]\";\n      console.log(`   ${icon} ${name}: ${status}`);\n    }\n\n    // HYPER BRAIN stats\n    if (this.brain) {\n      const brainStats = this.brain.getStats();\n      console.log(`\\n  HYPER BRAIN:`);\n      console.log(`   Knowledge items: ${brainStats.knowledge.total}`);\n      console.log(`   Patterns: ${brainStats.patterns.total}`);\n      console.log(`   Predictions: ${brainStats.predictions.total}`);\n    }\n\n    console.log(`\\n  Endpoints:`);\n    console.log(`   Hub API: http://localhost:${this.config.hubPort}`);\n    console.log(`   Hub WebSocket: ws://localhost:${this.config.hubPort}/ws`);\n    if (this.config.enableBrain) {\n      console.log(`   Brain API: http://localhost:${this.config.brainPort}`);\n      console.log(`   Brain WebSocket: ws://localhost:${this.config.brainPort}/ws`);\n    }\n\n    console.log(\"=\".repeat(60) + \"\\n\");\n  }\n}\n","/**\n * gICM Integration Hub\n *\n * Central nervous system connecting all engines.\n */\n\nimport { eventBus } from \"./bus/index.js\";\nimport { EngineManager, MockEngineConnector } from \"./engines/index.js\";\nimport { ApiServer } from \"./api/index.js\";\nimport { PREDEFINED_WORKFLOWS } from \"./coordinator/workflows.js\";\nimport type { HubState, EngineName, Workflow, HubEvent } from \"./core/types.js\";\nimport { Logger } from \"./utils/logger.js\";\n\nexport interface HubConfig {\n  apiPort: number;\n  enableApi: boolean;\n  enableWorkflows: boolean;\n  mockEngines?: boolean;\n}\n\nconst DEFAULT_CONFIG: HubConfig = {\n  apiPort: 3100,\n  enableApi: true,\n  enableWorkflows: true,\n  mockEngines: true,\n};\n\nexport class IntegrationHub {\n  private config: HubConfig;\n  private logger: Logger;\n\n  private engineManager: EngineManager;\n  private apiServer: ApiServer;\n  private workflows: Map<string, Workflow> = new Map();\n\n  private state: HubState;\n  private isRunning: boolean = false;\n  private startTime: number = 0;\n\n  constructor(config: Partial<HubConfig> = {}) {\n    this.config = { ...DEFAULT_CONFIG, ...config };\n    this.logger = new Logger(\"Hub\");\n\n    this.engineManager = new EngineManager();\n    this.apiServer = new ApiServer(() => this.getState());\n\n    this.state = this.initState();\n\n    // Load predefined workflows\n    if (this.config.enableWorkflows) {\n      for (const workflow of PREDEFINED_WORKFLOWS) {\n        this.workflows.set(workflow.id, workflow);\n      }\n    }\n\n    // Register mock engines if enabled\n    if (this.config.mockEngines) {\n      this.registerMockEngines();\n    }\n  }\n\n  private initState(): HubState {\n    return {\n      system: {\n        startedAt: 0,\n        uptime: 0,\n        version: \"1.0.0\",\n      },\n      engines: {\n        orchestrator: undefined,\n        money: undefined,\n        growth: undefined,\n        product: undefined,\n        brain: undefined,\n      },\n      metrics: {\n        eventsProcessed: 0,\n        workflowsExecuted: 0,\n        apiRequests: 0,\n        errors: 0,\n      },\n      activity: {\n        activeWorkflows: 0,\n        pendingTasks: 0,\n        recentEvents: [],\n      },\n    };\n  }\n\n  private registerMockEngines(): void {\n    const engines: EngineName[] = [\"orchestrator\", \"money\", \"growth\", \"product\", \"brain\"];\n    for (const name of engines) {\n      const connector = new MockEngineConnector(name);\n      this.engineManager.registerEngine(name, connector);\n    }\n  }\n\n  /**\n   * Start the hub\n   */\n  async start(): Promise<void> {\n    if (this.isRunning) return;\n\n    this.logger.info(\"Starting gICM Integration Hub...\");\n    this.isRunning = true;\n    this.startTime = Date.now();\n    this.state.system.startedAt = this.startTime;\n\n    // Setup event handlers\n    this.setupEventHandlers();\n\n    // Start API server\n    if (this.config.enableApi) {\n      await this.apiServer.start(this.config.apiPort);\n    }\n\n    // Start mock engines\n    if (this.config.mockEngines) {\n      await this.engineManager.startAll();\n    }\n\n    // Publish startup event\n    eventBus.publish(\"hub\", \"system\", \"hub.started\", {\n      version: this.state.system.version,\n      config: this.config,\n    });\n\n    this.logger.info(\"Integration Hub running\");\n    this.printStatus();\n  }\n\n  /**\n   * Stop the hub\n   */\n  async stop(): Promise<void> {\n    if (!this.isRunning) return;\n\n    this.logger.info(\"Stopping Integration Hub...\");\n\n    // Stop all engines\n    await this.engineManager.stopAll();\n\n    // Stop API server\n    await this.apiServer.stop();\n\n    eventBus.publish(\"hub\", \"system\", \"hub.stopped\", {});\n\n    this.isRunning = false;\n    this.logger.info(\"Integration Hub stopped\");\n  }\n\n  /**\n   * Setup event handlers\n   */\n  private setupEventHandlers(): void {\n    // Track all events\n    eventBus.subscribe(\"*\", (event: HubEvent) => {\n      this.state.metrics.eventsProcessed++;\n      this.state.activity.recentEvents.unshift(event);\n      if (this.state.activity.recentEvents.length > 100) {\n        this.state.activity.recentEvents.pop();\n      }\n    });\n\n    // Update uptime periodically\n    setInterval(() => {\n      this.state.system.uptime = Date.now() - this.startTime;\n    }, 1000);\n\n    // Handle workflow triggers\n    if (this.config.enableWorkflows) {\n      eventBus.subscribe(\"*\", async (event: HubEvent) => {\n        await this.checkWorkflowTriggers(event);\n      });\n    }\n  }\n\n  /**\n   * Check if event triggers any workflow\n   */\n  private async checkWorkflowTriggers(event: HubEvent): Promise<void> {\n    for (const [, workflow] of this.workflows) {\n      if (workflow.status !== \"active\") continue;\n      if (workflow.trigger.type !== \"event\") continue;\n      if (workflow.trigger.eventType !== event.type) continue;\n\n      this.logger.info(`Workflow triggered: ${workflow.name}`);\n      await this.executeWorkflow(workflow, event);\n    }\n  }\n\n  /**\n   * Execute a workflow\n   */\n  private async executeWorkflow(workflow: Workflow, triggerData: HubEvent): Promise<void> {\n    this.state.activity.activeWorkflows++;\n    this.state.metrics.workflowsExecuted++;\n\n    this.logger.info(`Executing workflow: ${workflow.name}`);\n\n    // TODO: Implement full workflow execution\n    workflow.executions++;\n    workflow.lastExecuted = Date.now();\n\n    this.state.activity.activeWorkflows--;\n  }\n\n  /**\n   * Get current state\n   */\n  getState(): HubState {\n    // Update engine states\n    this.state.engines = this.engineManager.getAllStates();\n    return { ...this.state };\n  }\n\n  /**\n   * Get event bus instance\n   */\n  getEventBus() {\n    return eventBus;\n  }\n\n  /**\n   * Get engine manager\n   */\n  getEngineManager() {\n    return this.engineManager;\n  }\n\n  /**\n   * Print status\n   */\n  printStatus(): void {\n    const state = this.getState();\n\n    console.log(\"\\n  gICM Integration Hub Status\");\n    console.log(\"=\".repeat(50));\n    console.log(`\\n  System:`);\n    console.log(`   Version: ${state.system.version}`);\n    console.log(`   Uptime: ${Math.floor(state.system.uptime / 1000)}s`);\n    console.log(`\\n  Engines:`);\n    for (const [name, engine] of Object.entries(state.engines)) {\n      const status = engine?.status || \"not connected\";\n      const icon = status === \"running\" ? \"[OK]\" : status === \"stopped\" ? \"[--]\" : \"[!!]\";\n      console.log(`   ${icon} ${name}: ${status}`);\n    }\n    console.log(`\\n  Metrics:`);\n    console.log(`   Events processed: ${state.metrics.eventsProcessed}`);\n    console.log(`   Workflows executed: ${state.metrics.workflowsExecuted}`);\n    console.log(`\\n  Workflows: ${this.workflows.size} active`);\n    console.log(`\\n  API: http://localhost:${this.config.apiPort}`);\n    console.log(`   WebSocket: ws://localhost:${this.config.apiPort}/ws`);\n    console.log(\"=\".repeat(50) + \"\\n\");\n  }\n}\n\n// Exports\nexport * from \"./core/types.js\";\nexport * from \"./bus/index.js\";\nexport * from \"./engines/index.js\";\nexport * from \"./coordinator/workflows.js\";\nexport { ApiServer } from \"./api/index.js\";\nexport { UnifiedSystem } from \"./system/unified-starter.js\";\n"],"mappings":"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","names":["DEFAULT_CONFIG"]}