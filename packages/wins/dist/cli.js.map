{"version":3,"sources":["../src/cli.ts","../src/tracker.ts","../src/streaks.ts","../src/achievements.ts","../src/multipliers.ts","../src/storage.ts"],"sourcesContent":["#!/usr/bin/env node\n\nimport { Command } from \"commander\";\nimport chalk from \"chalk\";\nimport { WinTracker } from \"./tracker.js\";\nimport type { WinCategory } from \"./types.js\";\n\nconst tracker = new WinTracker();\n\nconst program = new Command();\n\nprogram\n  .name(\"wins\")\n  .description(\"gICM Win Tracker - Track wins, streaks, achievements\")\n  .version(\"1.0.0\");\n\nprogram\n  .command(\"record\")\n  .description(\"Record a win\")\n  .requiredOption(\"-c, --category <category>\", \"Category: money|growth|product|intelligence|agent\")\n  .requiredOption(\"-t, --title <title>\", \"Win title\")\n  .requiredOption(\"-v, --value <value>\", \"Win value\", parseFloat)\n  .option(\"-u, --unit <unit>\", \"Value unit\", \"count\")\n  .option(\"-s, --subcategory <sub>\", \"Subcategory\", \"general\")\n  .option(\"-d, --description <desc>\", \"Description\")\n  .action(async (opts) => {\n    const validCategories = [\"money\", \"growth\", \"product\", \"intelligence\", \"agent\"];\n    if (!validCategories.includes(opts.category)) {\n      console.error(chalk.red(`Invalid category. Must be one of: ${validCategories.join(\", \")}`));\n      process.exit(1);\n    }\n\n    const win = await tracker.recordWin({\n      category: opts.category as WinCategory,\n      subcategory: opts.subcategory,\n      title: opts.title,\n      description: opts.description,\n      value: opts.value,\n      unit: opts.unit,\n    });\n\n    console.log(chalk.green(`\\n  Win recorded! +${win.totalPoints} points\\n`));\n  });\n\nprogram\n  .command(\"today\")\n  .description(\"Show today's wins\")\n  .action(async () => {\n    const stats = await tracker.getTodayStats();\n    const streak = await tracker.getStreak();\n\n    console.log(chalk.bold.yellow(`\\n  TODAY'S WINS\\n`));\n    console.log(chalk.white(`   Total: ${stats.totalWins} wins`));\n    console.log(chalk.white(`   Points: ${stats.totalPoints.toLocaleString()}`));\n    console.log(chalk.white(`   Streak: ${streak.current} days\\n`));\n\n    console.log(chalk.gray(\"   By Category:\"));\n    for (const [cat, count] of Object.entries(stats.byCategory)) {\n      if (count > 0) {\n        const icon = getCategoryIcon(cat as WinCategory);\n        console.log(chalk.gray(`   ${icon} ${cat}: ${count}`));\n      }\n    }\n\n    if (stats.wins.length > 0) {\n      console.log(chalk.gray(\"\\n   Recent:\"));\n      for (const win of stats.wins.slice(-5)) {\n        console.log(chalk.cyan(`   - ${win.title} (+${win.totalPoints})`));\n      }\n    }\n    console.log();\n  });\n\nprogram\n  .command(\"stats\")\n  .description(\"Show all-time stats\")\n  .action(async () => {\n    const stats = await tracker.getAllTimeStats();\n\n    console.log(chalk.bold.yellow(`\\n  ALL-TIME STATS\\n`));\n    console.log(chalk.white(`   Total Wins: ${stats.totalWins.toLocaleString()}`));\n    console.log(chalk.white(`   Total Points: ${stats.totalPoints.toLocaleString()}`));\n    console.log(chalk.white(`   Current Streak: ${stats.currentStreak} days`));\n    console.log(chalk.white(`   Longest Streak: ${stats.longestStreak} days`));\n    console.log(chalk.white(`   Achievements: ${stats.achievements}\\n`));\n\n    console.log(chalk.gray(\"   By Category:\"));\n    for (const [cat, count] of Object.entries(stats.byCategory)) {\n      const icon = getCategoryIcon(cat as WinCategory);\n      console.log(chalk.gray(`   ${icon} ${cat}: ${count.toLocaleString()}`));\n    }\n    console.log();\n  });\n\nprogram\n  .command(\"streak\")\n  .description(\"Show streak info\")\n  .action(async () => {\n    const streak = await tracker.getStreak();\n\n    console.log(chalk.bold.yellow(`\\n  STREAK INFO\\n`));\n    console.log(chalk.white(`   Current: ${streak.current} days`));\n    console.log(chalk.white(`   Longest: ${streak.longest} days`));\n    console.log(chalk.white(`   Multiplier: ${(1 + streak.current * 0.1).toFixed(1)}x`));\n\n    if (streak.current > 0 && streak.startedAt > 0) {\n      const started = new Date(streak.startedAt).toLocaleDateString();\n      console.log(chalk.gray(`   Started: ${started}`));\n    }\n    console.log();\n  });\n\nprogram\n  .command(\"achievements\")\n  .description(\"Show achievements\")\n  .action(async () => {\n    const all = await tracker.getAchievements();\n    const unlocked = await tracker.getUnlockedAchievements();\n\n    console.log(chalk.bold.yellow(`\\n  ACHIEVEMENTS (${unlocked.length}/${all.length})\\n`));\n\n    for (const achievement of all) {\n      const isUnlocked = unlocked.some(u => u.id === achievement.id);\n      const status = isUnlocked ? chalk.green(\"[x]\") : chalk.gray(\"[ ]\");\n      const rarityColor = getRarityColor(achievement.rarity);\n      const name = isUnlocked ? chalk.white(achievement.name) : chalk.gray(achievement.name);\n\n      console.log(`   ${status} ${name} ${rarityColor(`[${achievement.rarity}]`)}`);\n      console.log(chalk.gray(`       ${achievement.description} (+${achievement.points} pts)`));\n    }\n    console.log();\n  });\n\nfunction getCategoryIcon(category: WinCategory): string {\n  const icons: Record<WinCategory, string> = {\n    money: \"$\",\n    growth: \"^\",\n    product: \"*\",\n    intelligence: \"?\",\n    agent: \"@\",\n  };\n  return icons[category] || \"-\";\n}\n\nfunction getRarityColor(rarity: string) {\n  switch (rarity) {\n    case \"common\": return chalk.gray;\n    case \"rare\": return chalk.blue;\n    case \"epic\": return chalk.magenta;\n    case \"legendary\": return chalk.yellow;\n    default: return chalk.white;\n  }\n}\n\nprogram.parse();\n","import { EventEmitter } from \"events\";\nimport type { Win, WinCategory, DailyStats, Streak, AllTimeStats } from \"./types.js\";\nimport { StreakManager } from \"./streaks.js\";\nimport { AchievementManager } from \"./achievements.js\";\nimport { calculateMultipliers } from \"./multipliers.js\";\nimport { Storage } from \"./storage.js\";\n\nexport class WinTracker extends EventEmitter {\n  private storage: Storage;\n  private streaks: StreakManager;\n  private achievements: AchievementManager;\n\n  constructor(dataDir?: string) {\n    super();\n    this.storage = new Storage(dataDir);\n    this.streaks = new StreakManager(this.storage);\n    this.achievements = new AchievementManager(this.storage);\n  }\n\n  /**\n   * Record a win\n   */\n  async recordWin(input: {\n    category: WinCategory;\n    subcategory?: string;\n    title: string;\n    description?: string;\n    value: number;\n    unit: string;\n    source?: Win[\"source\"];\n  }): Promise<Win> {\n\n    // Get current streak\n    const streak = await this.streaks.getCurrent();\n\n    // Calculate multipliers\n    const todayWins = await this.getTodayWins();\n    const { streakMultiplier, comboMultiplier } = calculateMultipliers(\n      streak,\n      todayWins,\n      input.category\n    );\n\n    // Calculate points\n    const basePoints = this.calculateBasePoints(input.value, input.category);\n    const totalPoints = Math.round(basePoints * streakMultiplier * comboMultiplier);\n\n    // Create win\n    const win: Win = {\n      id: `win_${Date.now()}_${Math.random().toString(36).slice(2, 8)}`,\n      timestamp: Date.now(),\n      category: input.category,\n      subcategory: input.subcategory || \"general\",\n      title: input.title,\n      description: input.description || \"\",\n      value: input.value,\n      unit: input.unit,\n      source: input.source || {},\n      basePoints,\n      streakMultiplier,\n      comboMultiplier,\n      totalPoints,\n    };\n\n    // Save\n    await this.storage.appendWin(win);\n\n    // Update streak\n    const newStreak = await this.streaks.recordWin();\n\n    // Check achievements\n    const newAchievements = await this.achievements.checkAll(\n      await this.getAllWins(),\n      newStreak\n    );\n\n    // Emit events\n    this.emit(\"win\", win);\n\n    if (newAchievements.length > 0) {\n      for (const achievement of newAchievements) {\n        this.emit(\"achievement\", achievement);\n      }\n    }\n\n    // Log\n    console.log(`\\n  WIN: ${win.title} (+${totalPoints} pts)`);\n    if (streakMultiplier > 1) {\n      console.log(`     Streak: ${newStreak.current} days (${streakMultiplier.toFixed(1)}x)`);\n    }\n    if (comboMultiplier > 1) {\n      console.log(`     Combo: ${comboMultiplier}x`);\n    }\n\n    return win;\n  }\n\n  /**\n   * Get today's wins\n   */\n  async getTodayWins(): Promise<Win[]> {\n    const today = new Date().toISOString().split(\"T\")[0];\n    const allWins = await this.storage.getWins();\n    return allWins.filter(w =>\n      new Date(w.timestamp).toISOString().split(\"T\")[0] === today\n    );\n  }\n\n  /**\n   * Get today's stats\n   */\n  async getTodayStats(): Promise<DailyStats> {\n    const today = new Date().toISOString().split(\"T\")[0];\n    const wins = await this.getTodayWins();\n    const streak = await this.streaks.getCurrent();\n\n    const byCategory: Record<WinCategory, number> = {\n      money: 0,\n      growth: 0,\n      product: 0,\n      intelligence: 0,\n      agent: 0,\n    };\n\n    for (const win of wins) {\n      byCategory[win.category]++;\n    }\n\n    return {\n      date: today,\n      wins,\n      totalWins: wins.length,\n      totalPoints: wins.reduce((sum, w) => sum + w.totalPoints, 0),\n      byCategory,\n      streakDay: streak.current,\n      achievements: [],\n    };\n  }\n\n  /**\n   * Get all-time stats\n   */\n  async getAllTimeStats(): Promise<AllTimeStats> {\n    const wins = await this.getAllWins();\n    const streak = await this.streaks.getCurrent();\n    const achievements = await this.achievements.getUnlocked();\n\n    const byCategory: Record<WinCategory, number> = {\n      money: 0,\n      growth: 0,\n      product: 0,\n      intelligence: 0,\n      agent: 0,\n    };\n\n    for (const win of wins) {\n      byCategory[win.category]++;\n    }\n\n    return {\n      totalWins: wins.length,\n      totalPoints: wins.reduce((sum, w) => sum + w.totalPoints, 0),\n      currentStreak: streak.current,\n      longestStreak: streak.longest,\n      byCategory,\n      achievements: achievements.length,\n    };\n  }\n\n  /**\n   * Get all wins\n   */\n  async getAllWins(): Promise<Win[]> {\n    return this.storage.getWins();\n  }\n\n  /**\n   * Get streak info\n   */\n  async getStreak(): Promise<Streak> {\n    return this.streaks.getCurrent();\n  }\n\n  /**\n   * Get all achievements\n   */\n  async getAchievements() {\n    return this.achievements.getAll();\n  }\n\n  /**\n   * Get unlocked achievements\n   */\n  async getUnlockedAchievements() {\n    return this.achievements.getUnlocked();\n  }\n\n  private calculateBasePoints(value: number, category: WinCategory): number {\n    // Base points depend on category and value\n    const categoryMultiplier: Record<WinCategory, number> = {\n      money: 1,          // $1 = 1 point\n      growth: 0.01,      // 100 views = 1 point\n      product: 50,       // 1 feature = 50 points\n      intelligence: 100, // 1 pattern = 100 points\n      agent: 10,         // 1 success = 10 points\n    };\n\n    return Math.max(1, Math.round(value * categoryMultiplier[category]));\n  }\n}\n","import type { Streak } from \"./types.js\";\nimport type { Storage } from \"./storage.js\";\n\nexport class StreakManager {\n  private storage: Storage;\n\n  constructor(storage: Storage) {\n    this.storage = storage;\n  }\n\n  async getCurrent(): Promise<Streak> {\n    const streak = await this.storage.getStreak();\n\n    // Check if streak is broken (no win yesterday)\n    const now = Date.now();\n    const today = this.getDateString(now);\n    const lastWinDate = streak.lastWinAt ? this.getDateString(streak.lastWinAt) : null;\n\n    if (!lastWinDate) {\n      return streak;\n    }\n\n    // If last win was today, streak is still active\n    if (lastWinDate === today) {\n      return streak;\n    }\n\n    // If last win was yesterday, streak is still active\n    const yesterday = this.getDateString(now - 24 * 60 * 60 * 1000);\n    if (lastWinDate === yesterday) {\n      return streak;\n    }\n\n    // Streak is broken - reset current but keep longest\n    if (streak.current > 0) {\n      streak.current = 0;\n      streak.startedAt = 0;\n      await this.storage.saveStreak(streak);\n    }\n\n    return streak;\n  }\n\n  async recordWin(): Promise<Streak> {\n    const streak = await this.storage.getStreak();\n    const now = Date.now();\n    const today = this.getDateString(now);\n    const lastWinDate = streak.lastWinAt ? this.getDateString(streak.lastWinAt) : null;\n\n    // If this is the first win ever\n    if (!lastWinDate) {\n      const newStreak: Streak = {\n        current: 1,\n        longest: 1,\n        startedAt: now,\n        lastWinAt: now,\n      };\n      await this.storage.saveStreak(newStreak);\n      return newStreak;\n    }\n\n    // If already won today, don't increment streak\n    if (lastWinDate === today) {\n      return streak;\n    }\n\n    // Check if streak continues\n    const yesterday = this.getDateString(now - 24 * 60 * 60 * 1000);\n\n    if (lastWinDate === yesterday) {\n      // Continue streak\n      streak.current += 1;\n      streak.lastWinAt = now;\n      if (streak.current > streak.longest) {\n        streak.longest = streak.current;\n      }\n    } else {\n      // Start new streak\n      streak.current = 1;\n      streak.startedAt = now;\n      streak.lastWinAt = now;\n    }\n\n    await this.storage.saveStreak(streak);\n    return streak;\n  }\n\n  private getDateString(timestamp: number): string {\n    return new Date(timestamp).toISOString().split(\"T\")[0];\n  }\n}\n","import type { Achievement, Win, Streak } from \"./types.js\";\nimport type { Storage } from \"./storage.js\";\n\nconst ACHIEVEMENTS: Achievement[] = [\n  // Win count achievements\n  {\n    id: \"first_win\",\n    name: \"First Blood\",\n    description: \"Record your first win\",\n    icon: \"first\",\n    requirement: { type: \"wins\", target: 1 },\n    points: 100,\n    rarity: \"common\",\n  },\n  {\n    id: \"10_wins\",\n    name: \"Getting Started\",\n    description: \"Record 10 wins\",\n    icon: \"star\",\n    requirement: { type: \"wins\", target: 10 },\n    points: 250,\n    rarity: \"common\",\n  },\n  {\n    id: \"100_wins\",\n    name: \"Centurion\",\n    description: \"Record 100 wins\",\n    icon: \"100\",\n    requirement: { type: \"wins\", target: 100 },\n    points: 1000,\n    rarity: \"rare\",\n  },\n  {\n    id: \"1000_wins\",\n    name: \"Win Machine\",\n    description: \"Record 1,000 wins\",\n    icon: \"trophy\",\n    requirement: { type: \"wins\", target: 1000 },\n    points: 5000,\n    rarity: \"epic\",\n  },\n\n  // Streak achievements\n  {\n    id: \"3_day_streak\",\n    name: \"Hat Trick\",\n    description: \"Maintain a 3-day win streak\",\n    icon: \"fire\",\n    requirement: { type: \"streak\", target: 3 },\n    points: 100,\n    rarity: \"common\",\n  },\n  {\n    id: \"7_day_streak\",\n    name: \"Week Warrior\",\n    description: \"Maintain a 7-day win streak\",\n    icon: \"fire2\",\n    requirement: { type: \"streak\", target: 7 },\n    points: 500,\n    rarity: \"rare\",\n  },\n  {\n    id: \"30_day_streak\",\n    name: \"Monthly Monster\",\n    description: \"Maintain a 30-day win streak\",\n    icon: \"fire3\",\n    requirement: { type: \"streak\", target: 30 },\n    points: 2000,\n    rarity: \"epic\",\n  },\n  {\n    id: \"100_day_streak\",\n    name: \"Unstoppable\",\n    description: \"Maintain a 100-day win streak\",\n    icon: \"diamond\",\n    requirement: { type: \"streak\", target: 100 },\n    points: 10000,\n    rarity: \"legendary\",\n  },\n\n  // Category achievements\n  {\n    id: \"money_master\",\n    name: \"Money Master\",\n    description: \"Record 100 money wins\",\n    icon: \"money\",\n    requirement: { type: \"category\", target: 100, category: \"money\" },\n    points: 1000,\n    rarity: \"rare\",\n  },\n  {\n    id: \"growth_guru\",\n    name: \"Growth Guru\",\n    description: \"Record 100 growth wins\",\n    icon: \"chart\",\n    requirement: { type: \"category\", target: 100, category: \"growth\" },\n    points: 1000,\n    rarity: \"rare\",\n  },\n  {\n    id: \"product_pro\",\n    name: \"Product Pro\",\n    description: \"Record 100 product wins\",\n    icon: \"wrench\",\n    requirement: { type: \"category\", target: 100, category: \"product\" },\n    points: 1000,\n    rarity: \"rare\",\n  },\n\n  // Combo achievements\n  {\n    id: \"diversified\",\n    name: \"Diversified\",\n    description: \"Win in all 5 categories in one day\",\n    icon: \"rainbow\",\n    requirement: { type: \"custom\", target: 5 },\n    points: 500,\n    rarity: \"rare\",\n  },\n\n  // Points achievements\n  {\n    id: \"10k_points\",\n    name: \"Point Collector\",\n    description: \"Accumulate 10,000 points\",\n    icon: \"target\",\n    requirement: { type: \"points\", target: 10000 },\n    points: 1000,\n    rarity: \"rare\",\n  },\n  {\n    id: \"100k_points\",\n    name: \"Point Hoarder\",\n    description: \"Accumulate 100,000 points\",\n    icon: \"target2\",\n    requirement: { type: \"points\", target: 100000 },\n    points: 5000,\n    rarity: \"epic\",\n  },\n  {\n    id: \"1m_points\",\n    name: \"Point Millionaire\",\n    description: \"Accumulate 1,000,000 points\",\n    icon: \"crown\",\n    requirement: { type: \"points\", target: 1000000 },\n    points: 50000,\n    rarity: \"legendary\",\n  },\n];\n\nexport class AchievementManager {\n  private storage: Storage;\n  private unlocked: Set<string> = new Set();\n\n  constructor(storage: Storage) {\n    this.storage = storage;\n    this.loadUnlocked();\n  }\n\n  async checkAll(wins: Win[], streak: Streak): Promise<Achievement[]> {\n    await this.loadUnlocked();\n    const newlyUnlocked: Achievement[] = [];\n    const totalPoints = wins.reduce((sum, w) => sum + w.totalPoints, 0);\n\n    for (const achievement of ACHIEVEMENTS) {\n      if (this.unlocked.has(achievement.id)) continue;\n\n      let unlocked = false;\n\n      switch (achievement.requirement.type) {\n        case \"wins\":\n          unlocked = wins.length >= achievement.requirement.target;\n          break;\n        case \"streak\":\n          unlocked = streak.current >= achievement.requirement.target ||\n            streak.longest >= achievement.requirement.target;\n          break;\n        case \"points\":\n          unlocked = totalPoints >= achievement.requirement.target;\n          break;\n        case \"category\":\n          const categoryWins = wins.filter(\n            w => w.category === achievement.requirement.category\n          );\n          unlocked = categoryWins.length >= achievement.requirement.target;\n          break;\n        case \"custom\":\n          if (achievement.id === \"diversified\") {\n            const today = new Date().toISOString().split(\"T\")[0];\n            const todayWins = wins.filter(\n              w => new Date(w.timestamp).toISOString().split(\"T\")[0] === today\n            );\n            const categories = new Set(todayWins.map(w => w.category));\n            unlocked = categories.size >= 5;\n          }\n          break;\n      }\n\n      if (unlocked) {\n        const unlockedAchievement = { ...achievement, unlockedAt: Date.now() };\n        this.unlocked.add(achievement.id);\n        newlyUnlocked.push(unlockedAchievement);\n        console.log(`\\n  ACHIEVEMENT UNLOCKED: ${achievement.name} (+${achievement.points} pts)`);\n      }\n    }\n\n    if (newlyUnlocked.length > 0) {\n      await this.saveUnlocked();\n    }\n\n    return newlyUnlocked;\n  }\n\n  async getUnlocked(): Promise<Achievement[]> {\n    await this.loadUnlocked();\n    return ACHIEVEMENTS.filter(a => this.unlocked.has(a.id)).map(a => ({\n      ...a,\n      unlockedAt: Date.now(),\n    }));\n  }\n\n  async getAll(): Promise<Achievement[]> {\n    await this.loadUnlocked();\n    return ACHIEVEMENTS.map(a => ({\n      ...a,\n      unlockedAt: this.unlocked.has(a.id) ? Date.now() : undefined,\n    }));\n  }\n\n  private async loadUnlocked(): Promise<void> {\n    const data = await this.storage.getAchievements();\n    this.unlocked = new Set(data.map((a) => a.id));\n  }\n\n  private async saveUnlocked(): Promise<void> {\n    const unlocked = ACHIEVEMENTS.filter(a => this.unlocked.has(a.id)).map(a => ({\n      ...a,\n      unlockedAt: Date.now(),\n    }));\n    await this.storage.saveAchievements(unlocked);\n  }\n}\n","import type { Streak, Win, WinCategory } from \"./types.js\";\n\nexport function calculateMultipliers(\n  streak: Streak,\n  todayWins: Win[],\n  newCategory: WinCategory\n): { streakMultiplier: number; comboMultiplier: number } {\n\n  // Streak multiplier: +10% per consecutive day\n  const streakMultiplier = 1 + (streak.current * 0.1);\n\n  // Combo multiplier: based on category diversity today\n  const categoriesHit = new Set(todayWins.map(w => w.category));\n  categoriesHit.add(newCategory);\n\n  let comboMultiplier = 1;\n  if (categoriesHit.size >= 5) {\n    comboMultiplier = 5;  // ALL categories = 5x (LEGENDARY)\n  } else if (categoriesHit.size >= 4) {\n    comboMultiplier = 3;\n  } else if (categoriesHit.size >= 3) {\n    comboMultiplier = 2;\n  } else if (categoriesHit.size >= 2) {\n    comboMultiplier = 1.5;\n  }\n\n  return {\n    streakMultiplier: Math.round(streakMultiplier * 10) / 10,\n    comboMultiplier,\n  };\n}\n\n/**\n * Calculate streak bonus for milestone days\n */\nexport function getStreakBonus(streakDays: number): number {\n  if (streakDays >= 100) return 10000;\n  if (streakDays >= 30) return 2000;\n  if (streakDays >= 7) return 500;\n  if (streakDays >= 3) return 100;\n  return 0;\n}\n","import { readFile, writeFile, mkdir } from \"fs/promises\";\nimport { existsSync } from \"fs\";\nimport { join, dirname } from \"path\";\nimport { fileURLToPath } from \"url\";\nimport type { Win, Streak, Achievement } from \"./types.js\";\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = dirname(__filename);\n\nexport class Storage {\n  private dataDir: string;\n  private winsFile: string;\n  private streaksFile: string;\n  private achievementsFile: string;\n\n  constructor(dataDir?: string) {\n    this.dataDir = dataDir || join(__dirname, \"..\", \"data\");\n    this.winsFile = join(this.dataDir, \"wins.json\");\n    this.streaksFile = join(this.dataDir, \"streaks.json\");\n    this.achievementsFile = join(this.dataDir, \"achievements.json\");\n  }\n\n  async ensureDataDir(): Promise<void> {\n    if (!existsSync(this.dataDir)) {\n      await mkdir(this.dataDir, { recursive: true });\n    }\n  }\n\n  // WINS\n  async getWins(): Promise<Win[]> {\n    await this.ensureDataDir();\n    try {\n      const data = await readFile(this.winsFile, \"utf-8\");\n      return JSON.parse(data);\n    } catch {\n      return [];\n    }\n  }\n\n  async appendWin(win: Win): Promise<void> {\n    const wins = await this.getWins();\n    wins.push(win);\n    await this.saveWins(wins);\n  }\n\n  async saveWins(wins: Win[]): Promise<void> {\n    await this.ensureDataDir();\n    await writeFile(this.winsFile, JSON.stringify(wins, null, 2));\n  }\n\n  // STREAKS\n  async getStreak(): Promise<Streak> {\n    await this.ensureDataDir();\n    try {\n      const data = await readFile(this.streaksFile, \"utf-8\");\n      return JSON.parse(data);\n    } catch {\n      return {\n        current: 0,\n        longest: 0,\n        startedAt: 0,\n        lastWinAt: 0,\n      };\n    }\n  }\n\n  async saveStreak(streak: Streak): Promise<void> {\n    await this.ensureDataDir();\n    await writeFile(this.streaksFile, JSON.stringify(streak, null, 2));\n  }\n\n  // ACHIEVEMENTS\n  async getAchievements(): Promise<Achievement[]> {\n    await this.ensureDataDir();\n    try {\n      const data = await readFile(this.achievementsFile, \"utf-8\");\n      return JSON.parse(data);\n    } catch {\n      return [];\n    }\n  }\n\n  async saveAchievements(achievements: Achievement[]): Promise<void> {\n    await this.ensureDataDir();\n    await writeFile(this.achievementsFile, JSON.stringify(achievements, null, 2));\n  }\n}\n"],"mappings":"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","names":["__filename","__dirname"]}