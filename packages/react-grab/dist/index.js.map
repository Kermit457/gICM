{"version":3,"sources":["../src/index.ts"],"sourcesContent":["/**\n * gICM React Grab - Main Entry Point\n *\n * Click any element in your React app, copy context for AI coding agents.\n * Works with Claude Code, Cursor, Copilot, Windsurf, and more.\n *\n * @example\n * // Auto-init via script tag\n * <script src=\"//unpkg.com/@gicm/react-grab\" data-auto-init></script>\n *\n * @example\n * // Manual initialization\n * import { init } from '@gicm/react-grab';\n * const grab = init({ theme: { hue: 200 } });\n */\n\nimport type { GrabConfig, GrabAPI } from \"./types.js\";\nimport { Grabber } from \"./core/grabber.js\";\n\nexport type {\n  GrabConfig,\n  GrabAPI,\n  GrabState,\n  ElementContext,\n  GICMSuggestion,\n} from \"./types.js\";\nexport { Grabber } from \"./core/grabber.js\";\nexport * from \"./core/index.js\";\n\nlet instance: Grabber | null = null;\n\n/**\n * Initialize gICM React Grab\n */\nexport function init(config: GrabConfig = {}): GrabAPI {\n  // Cleanup existing instance\n  if (instance) {\n    instance.destroy();\n  }\n\n  instance = new Grabber(config);\n  return instance;\n}\n\n/**\n * Get current instance\n */\nexport function getInstance(): GrabAPI | null {\n  return instance;\n}\n\n/**\n * Destroy current instance\n */\nexport function destroy(): void {\n  if (instance) {\n    instance.destroy();\n    instance = null;\n  }\n}\n\n// --- Auto-init for browser ---\n\nif (typeof window !== \"undefined\") {\n  // Expose on window\n  (window as any).GICMGrab = {\n    init,\n    getInstance,\n    destroy,\n    Grabber,\n  };\n\n  // Auto-init if script has data-auto-init attribute\n  const currentScript = document.currentScript;\n  if (currentScript?.hasAttribute(\"data-auto-init\")) {\n    // Parse config from data attributes\n    const config: GrabConfig = {};\n\n    const apiUrl = currentScript.getAttribute(\"data-gicm-api\");\n    if (apiUrl) {\n      config.gicmApiUrl = apiUrl;\n      config.showSuggestions = true;\n    }\n\n    const hue = currentScript.getAttribute(\"data-hue\");\n    if (hue) {\n      config.theme = { hue: parseInt(hue, 10) };\n    }\n\n    // Init when DOM is ready\n    if (document.readyState === \"loading\") {\n      document.addEventListener(\"DOMContentLoaded\", () => init(config));\n    } else {\n      init(config);\n    }\n  }\n}\n\nexport default { init, getInstance, destroy };\n"],"mappings":";;;;;;;;;;;;;AA6BA,IAAI,WAA2B;AAKxB,SAAS,KAAK,SAAqB,CAAC,GAAY;AAErD,MAAI,UAAU;AACZ,aAAS,QAAQ;AAAA,EACnB;AAEA,aAAW,IAAI,QAAQ,MAAM;AAC7B,SAAO;AACT;AAKO,SAAS,cAA8B;AAC5C,SAAO;AACT;AAKO,SAAS,UAAgB;AAC9B,MAAI,UAAU;AACZ,aAAS,QAAQ;AACjB,eAAW;AAAA,EACb;AACF;AAIA,IAAI,OAAO,WAAW,aAAa;AAEjC,EAAC,OAAe,WAAW;AAAA,IACzB;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF;AAGA,QAAM,gBAAgB,SAAS;AAC/B,MAAI,eAAe,aAAa,gBAAgB,GAAG;AAEjD,UAAM,SAAqB,CAAC;AAE5B,UAAM,SAAS,cAAc,aAAa,eAAe;AACzD,QAAI,QAAQ;AACV,aAAO,aAAa;AACpB,aAAO,kBAAkB;AAAA,IAC3B;AAEA,UAAM,MAAM,cAAc,aAAa,UAAU;AACjD,QAAI,KAAK;AACP,aAAO,QAAQ,EAAE,KAAK,SAAS,KAAK,EAAE,EAAE;AAAA,IAC1C;AAGA,QAAI,SAAS,eAAe,WAAW;AACrC,eAAS,iBAAiB,oBAAoB,MAAM,KAAK,MAAM,CAAC;AAAA,IAClE,OAAO;AACL,WAAK,MAAM;AAAA,IACb;AAAA,EACF;AACF;AAEA,IAAO,gBAAQ,EAAE,MAAM,aAAa,QAAQ;","names":[]}