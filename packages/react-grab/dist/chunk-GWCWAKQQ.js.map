{"version":3,"sources":["../src/constants.ts","../src/core/keyboard.ts","../src/core/react-fiber.ts","../src/core/context-builder.ts","../src/core/selector.ts","../src/ui/overlay.ts","../src/ui/tooltip.ts","../src/ui/notification.ts","../src/ui/suggestion-panel.ts","../src/integrations/gicm-api.ts","../src/integrations/clipboard.ts","../src/core/grabber.ts"],"sourcesContent":["/**\n * Default configuration and constants\n */\n\nimport type { GrabConfig, ThemeConfig } from \"./types.js\";\n\nexport const DEFAULT_THEME: Required<ThemeConfig> = {\n  enabled: true,\n  hue: 280, // Purple\n  borderColor: \"\",\n  backgroundColor: \"\",\n  label: {\n    enabled: true,\n    backgroundColor: \"\",\n    textColor: \"#ffffff\",\n  },\n};\n\nexport const DEFAULT_CONFIG: Required<\n  Omit<GrabConfig, \"onSelect\" | \"onCopy\" | \"onStateChange\">\n> = {\n  enabled: true,\n  shortcutKey: \"c\",\n  theme: DEFAULT_THEME,\n  gicmApiUrl: null,\n  showSuggestions: false,\n};\n\nexport const MAX_TEXT_LENGTH = 200;\nexport const MAX_HTML_LENGTH = 500;\nexport const MAX_STACK_DEPTH = 10;\nexport const NOTIFICATION_DURATION = 2000;\nexport const SUGGESTION_PANEL_DURATION = 10000;\n\nexport const ELEMENT_ID = {\n  OVERLAY: \"gicm-grab-overlay\",\n  LABEL: \"gicm-grab-label\",\n  NOTIFICATION: \"gicm-grab-notification\",\n  SUGGESTION_PANEL: \"gicm-grab-suggestions\",\n} as const;\n","/**\n * Keyboard Handler - Manage keyboard shortcuts\n */\n\nexport interface KeyboardConfig {\n  shortcutKey: string;\n  onActivate: () => void;\n  onDeactivate: () => void;\n}\n\nexport class KeyboardHandler {\n  private config: KeyboardConfig;\n  private isMetaPressed = false;\n  private isActive = false;\n  private boundHandleKeyDown: (e: KeyboardEvent) => void;\n  private boundHandleKeyUp: (e: KeyboardEvent) => void;\n\n  constructor(config: KeyboardConfig) {\n    this.config = config;\n    this.boundHandleKeyDown = this.handleKeyDown.bind(this);\n    this.boundHandleKeyUp = this.handleKeyUp.bind(this);\n  }\n\n  start(): void {\n    document.addEventListener(\"keydown\", this.boundHandleKeyDown);\n    document.addEventListener(\"keyup\", this.boundHandleKeyUp);\n    // Handle window blur (user switches tab while holding keys)\n    window.addEventListener(\"blur\", () => this.reset());\n  }\n\n  stop(): void {\n    document.removeEventListener(\"keydown\", this.boundHandleKeyDown);\n    document.removeEventListener(\"keyup\", this.boundHandleKeyUp);\n  }\n\n  private handleKeyDown(e: KeyboardEvent): void {\n    // Track meta/ctrl key\n    if (e.key === \"Meta\" || e.key === \"Control\") {\n      this.isMetaPressed = true;\n    }\n\n    // Check for activation: Meta/Ctrl + shortcutKey\n    if (\n      (e.metaKey || e.ctrlKey) &&\n      e.key.toLowerCase() === this.config.shortcutKey.toLowerCase() &&\n      !this.isActive\n    ) {\n      // Don't prevent default - let the copy happen too\n      this.isActive = true;\n      this.config.onActivate();\n    }\n  }\n\n  private handleKeyUp(e: KeyboardEvent): void {\n    // Deactivate when meta/ctrl is released\n    if (e.key === \"Meta\" || e.key === \"Control\") {\n      this.isMetaPressed = false;\n      if (this.isActive) {\n        this.isActive = false;\n        this.config.onDeactivate();\n      }\n    }\n  }\n\n  private reset(): void {\n    this.isMetaPressed = false;\n    if (this.isActive) {\n      this.isActive = false;\n      this.config.onDeactivate();\n    }\n  }\n\n  isActivated(): boolean {\n    return this.isActive;\n  }\n}\n","/**\n * React Fiber Traversal - Extract component stack from React internals\n */\n\nimport type { ComponentStackItem } from \"../types.js\";\nimport { MAX_STACK_DEPTH } from \"../constants.js\";\n\n/**\n * Find React Fiber node from DOM element\n */\nexport function findFiberNode(element: HTMLElement): any | null {\n  // React 18+ uses __reactFiber$\n  // React 16-17 uses __reactInternalInstance$\n  const fiberKey = Object.keys(element).find(\n    (key) =>\n      key.startsWith(\"__reactFiber$\") ||\n      key.startsWith(\"__reactInternalInstance$\")\n  );\n\n  if (!fiberKey) return null;\n  return (element as any)[fiberKey];\n}\n\n/**\n * Check if element is in a React app\n */\nexport function isReactElement(element: HTMLElement): boolean {\n  return findFiberNode(element) !== null;\n}\n\n/**\n * Get React component stack from element\n */\nexport function getComponentStack(element: HTMLElement): ComponentStackItem[] {\n  const stack: ComponentStackItem[] = [];\n  let fiber = findFiberNode(element);\n  let depth = 0;\n\n  while (fiber && depth < MAX_STACK_DEPTH) {\n    // Only include function/class components, not DOM elements\n    if (fiber.type && typeof fiber.type === \"function\") {\n      const name = getComponentName(fiber);\n      const source = getSourceLocation(fiber);\n\n      stack.push({\n        name,\n        file: source.file,\n        line: source.line,\n        column: source.column,\n      });\n    }\n\n    fiber = fiber.return;\n    depth++;\n  }\n\n  return stack;\n}\n\n/**\n * Get component display name\n */\nfunction getComponentName(fiber: any): string {\n  const type = fiber.type;\n\n  if (!type) return \"Unknown\";\n\n  // Check for displayName (common pattern)\n  if (type.displayName) return type.displayName;\n\n  // Check for function name\n  if (type.name) return type.name;\n\n  // Check for wrapped components (memo, forwardRef)\n  if (type.$$typeof) {\n    const innerType = type.type || type.render;\n    if (innerType) {\n      return innerType.displayName || innerType.name || \"Anonymous\";\n    }\n  }\n\n  return \"Anonymous\";\n}\n\n/**\n * Get source file location from fiber\n */\nfunction getSourceLocation(fiber: any): {\n  file: string;\n  line: number;\n  column: number;\n} {\n  // React dev mode adds _debugSource\n  const source = fiber._debugSource;\n\n  if (source) {\n    return {\n      file: cleanFilePath(source.fileName || \"\"),\n      line: source.lineNumber || 0,\n      column: source.columnNumber || 0,\n    };\n  }\n\n  // Fallback: try to extract from stack trace (less reliable)\n  return {\n    file: \"unknown\",\n    line: 0,\n    column: 0,\n  };\n}\n\n/**\n * Clean file path - extract relative path\n */\nfunction cleanFilePath(fullPath: string): string {\n  if (!fullPath) return \"unknown\";\n\n  // Remove webpack/vite prefixes\n  let cleaned = fullPath\n    .replace(/^webpack:\\/\\/[^/]+\\//, \"\")\n    .replace(/^\\/@fs/, \"\")\n    .replace(/^\\//, \"\");\n\n  // Extract from node_modules or src\n  const srcMatch = cleaned.match(/(?:src|components|app|pages)\\/.*$/);\n  if (srcMatch) return srcMatch[0];\n\n  // Just get filename if path is too long\n  const parts = cleaned.split(\"/\");\n  if (parts.length > 3) {\n    return parts.slice(-3).join(\"/\");\n  }\n\n  return cleaned;\n}\n\n/**\n * Get component props (for debugging)\n */\nexport function getComponentProps(\n  element: HTMLElement\n): Record<string, any> | null {\n  const fiber = findFiberNode(element);\n  if (!fiber) return null;\n\n  // Walk up to find nearest component with props\n  let current = fiber;\n  while (current) {\n    if (current.memoizedProps && typeof current.type === \"function\") {\n      // Filter out children and internal props\n      const props = { ...current.memoizedProps };\n      delete props.children;\n      return props;\n    }\n    current = current.return;\n  }\n\n  return null;\n}\n","/**\n * Context Builder - Build clipboard-ready context from element\n */\n\nimport type { ElementContext } from \"../types.js\";\nimport { getComponentStack } from \"./react-fiber.js\";\nimport { MAX_TEXT_LENGTH, MAX_HTML_LENGTH } from \"../constants.js\";\n\n/**\n * Build full element context\n */\nexport function buildElementContext(element: HTMLElement): ElementContext {\n  const tagName = element.tagName.toLowerCase();\n  const classes = getClasses(element);\n  const attributes = getAttributes(element);\n  const textContent = getTextContent(element);\n  const innerHTML = getInnerHTML(element);\n  const componentStack = getComponentStack(element);\n  const rect = element.getBoundingClientRect();\n\n  return {\n    tagName,\n    classes,\n    attributes,\n    textContent,\n    innerHTML,\n    componentStack,\n    rect,\n    element,\n  };\n}\n\n/**\n * Build clipboard text in React Grab format\n */\nexport function buildClipboardText(context: ElementContext): string {\n  const { tagName, classes, attributes, textContent, componentStack } = context;\n\n  let text = \"<selected_element>\\n\";\n\n  // Build opening tag\n  let tag = `  <${tagName}`;\n  if (classes.length > 0) {\n    tag += ` class=\"${classes.join(\" \")}\"`;\n  }\n  for (const [key, value] of Object.entries(attributes)) {\n    tag += ` ${key}=\"${escapeAttr(value)}\"`;\n  }\n  tag += \">\";\n  text += tag + \"\\n\";\n\n  // Text content\n  if (textContent) {\n    text += `    ${textContent}\\n`;\n  }\n\n  // Closing tag\n  text += `  </${tagName}>\\n`;\n\n  // Component stack\n  for (const item of componentStack) {\n    text += `  at ${item.name} in ${item.file}:${item.line}:${item.column}\\n`;\n  }\n\n  text += \"</selected_element>\";\n\n  return text;\n}\n\n/**\n * Build a shorter summary for display\n */\nexport function buildSummary(context: ElementContext): string {\n  const { tagName, classes, componentStack } = context;\n\n  let summary = `<${tagName}>`;\n\n  if (classes.length > 0) {\n    const displayClasses = classes.slice(0, 2).join(\".\");\n    summary = `<${tagName}.${displayClasses}>`;\n  }\n\n  if (componentStack.length > 0) {\n    const comp = componentStack[0];\n    summary += ` in ${comp.name}`;\n  }\n\n  return summary;\n}\n\n// --- Helper Functions ---\n\nfunction getClasses(element: HTMLElement): string[] {\n  if (!element.className) return [];\n\n  if (typeof element.className === \"string\") {\n    return element.className.split(/\\s+/).filter(Boolean);\n  }\n\n  // SVG elements have className as SVGAnimatedString\n  if ((element.className as any).baseVal) {\n    return (element.className as any).baseVal.split(/\\s+/).filter(Boolean);\n  }\n\n  return [];\n}\n\nfunction getAttributes(element: HTMLElement): Record<string, string> {\n  const attrs: Record<string, string> = {};\n  const skipAttrs = new Set([\"class\", \"style\"]);\n\n  for (const attr of element.attributes) {\n    if (!skipAttrs.has(attr.name) && !attr.name.startsWith(\"data-reactroot\")) {\n      attrs[attr.name] = attr.value;\n    }\n  }\n\n  return attrs;\n}\n\nfunction getTextContent(element: HTMLElement): string | null {\n  const text = element.textContent?.trim();\n  if (!text) return null;\n\n  if (text.length > MAX_TEXT_LENGTH) {\n    return text.slice(0, MAX_TEXT_LENGTH) + \"...\";\n  }\n\n  return text;\n}\n\nfunction getInnerHTML(element: HTMLElement): string {\n  const html = element.innerHTML.trim();\n\n  if (html.length > MAX_HTML_LENGTH) {\n    return html.slice(0, MAX_HTML_LENGTH) + \"...\";\n  }\n\n  return html;\n}\n\nfunction escapeAttr(value: string): string {\n  return value\n    .replace(/&/g, \"&amp;\")\n    .replace(/\"/g, \"&quot;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\");\n}\n","/**\n * Element Selector - Handle mouse interactions for element selection\n */\n\nimport type { ElementContext } from \"../types.js\";\nimport { buildElementContext } from \"./context-builder.js\";\n\nexport interface SelectorConfig {\n  onHover: (\n    element: HTMLElement | null,\n    context: ElementContext | null\n  ) => void;\n  onClick: (element: HTMLElement, context: ElementContext) => void;\n}\n\nexport class ElementSelector {\n  private config: SelectorConfig;\n  private isActive = false;\n  private hoveredElement: HTMLElement | null = null;\n\n  private boundHandleMouseMove: (e: MouseEvent) => void;\n  private boundHandleClick: (e: MouseEvent) => void;\n  private boundHandleScroll: () => void;\n\n  constructor(config: SelectorConfig) {\n    this.config = config;\n    this.boundHandleMouseMove = this.handleMouseMove.bind(this);\n    this.boundHandleClick = this.handleClick.bind(this);\n    this.boundHandleScroll = this.handleScroll.bind(this);\n  }\n\n  activate(): void {\n    if (this.isActive) return;\n\n    this.isActive = true;\n    document.addEventListener(\"mousemove\", this.boundHandleMouseMove);\n    document.addEventListener(\"click\", this.boundHandleClick, true);\n    document.addEventListener(\"scroll\", this.boundHandleScroll, true);\n    document.body.style.cursor = \"crosshair\";\n  }\n\n  deactivate(): void {\n    if (!this.isActive) return;\n\n    this.isActive = false;\n    document.removeEventListener(\"mousemove\", this.boundHandleMouseMove);\n    document.removeEventListener(\"click\", this.boundHandleClick, true);\n    document.removeEventListener(\"scroll\", this.boundHandleScroll, true);\n    document.body.style.cursor = \"\";\n\n    this.hoveredElement = null;\n    this.config.onHover(null, null);\n  }\n\n  private handleMouseMove(e: MouseEvent): void {\n    if (!this.isActive) return;\n\n    const element = this.getElementAtPoint(e.clientX, e.clientY);\n\n    if (element !== this.hoveredElement) {\n      this.hoveredElement = element;\n\n      if (element) {\n        const context = buildElementContext(element);\n        this.config.onHover(element, context);\n      } else {\n        this.config.onHover(null, null);\n      }\n    }\n  }\n\n  private handleClick(e: MouseEvent): void {\n    if (!this.isActive) return;\n\n    // Prevent default click behavior\n    e.preventDefault();\n    e.stopPropagation();\n\n    const element = this.getElementAtPoint(e.clientX, e.clientY);\n\n    if (element) {\n      const context = buildElementContext(element);\n      this.config.onClick(element, context);\n    }\n  }\n\n  private handleScroll(): void {\n    // Re-evaluate hovered element on scroll\n    if (this.hoveredElement) {\n      const context = buildElementContext(this.hoveredElement);\n      this.config.onHover(this.hoveredElement, context);\n    }\n  }\n\n  private getElementAtPoint(x: number, y: number): HTMLElement | null {\n    const element = document.elementFromPoint(x, y);\n\n    if (!element) return null;\n    if (!(element instanceof HTMLElement)) return null;\n\n    // Skip our own UI elements\n    if (element.id?.startsWith(\"gicm-grab\")) return null;\n    if (element.closest(\"[id^='gicm-grab']\")) return null;\n\n    return element;\n  }\n\n  getHoveredElement(): HTMLElement | null {\n    return this.hoveredElement;\n  }\n}\n","/**\n * Selection Overlay - Visual highlight for hovered element\n */\n\nimport type { ThemeConfig } from \"../types.js\";\nimport { ELEMENT_ID } from \"../constants.js\";\n\nexport class Overlay {\n  private element: HTMLDivElement;\n  private theme: ThemeConfig;\n\n  constructor(theme: ThemeConfig) {\n    this.theme = theme;\n    this.element = this.createElement();\n  }\n\n  private createElement(): HTMLDivElement {\n    const el = document.createElement(\"div\");\n    el.id = ELEMENT_ID.OVERLAY;\n    this.applyStyles(el);\n    return el;\n  }\n\n  private applyStyles(el: HTMLDivElement): void {\n    const hue = this.theme.hue ?? 280;\n    const borderColor = this.theme.borderColor || `hsl(${hue}, 70%, 60%)`;\n    const bgColor =\n      this.theme.backgroundColor || `hsla(${hue}, 70%, 60%, 0.1)`;\n\n    el.style.cssText = `\n      position: fixed;\n      pointer-events: none;\n      border: 2px solid ${borderColor};\n      background: ${bgColor};\n      border-radius: 4px;\n      z-index: 2147483646;\n      transition: all 0.05s ease-out;\n      display: none;\n    `;\n  }\n\n  show(): void {\n    if (!this.element.parentNode) {\n      document.body.appendChild(this.element);\n    }\n  }\n\n  hide(): void {\n    this.element.style.display = \"none\";\n  }\n\n  update(rect: DOMRect): void {\n    this.element.style.display = \"block\";\n    this.element.style.top = `${rect.top}px`;\n    this.element.style.left = `${rect.left}px`;\n    this.element.style.width = `${rect.width}px`;\n    this.element.style.height = `${rect.height}px`;\n  }\n\n  clear(): void {\n    this.element.style.display = \"none\";\n  }\n\n  updateTheme(theme: ThemeConfig): void {\n    this.theme = theme;\n    this.applyStyles(this.element);\n  }\n\n  destroy(): void {\n    this.element.remove();\n  }\n}\n","/**\n * Tooltip - Shows element info on hover\n */\n\nimport type { ThemeConfig, ElementContext } from \"../types.js\";\nimport { ELEMENT_ID } from \"../constants.js\";\nimport { buildSummary } from \"../core/context-builder.js\";\n\nexport class Tooltip {\n  private element: HTMLDivElement;\n  private theme: ThemeConfig;\n\n  constructor(theme: ThemeConfig) {\n    this.theme = theme;\n    this.element = this.createElement();\n  }\n\n  private createElement(): HTMLDivElement {\n    const el = document.createElement(\"div\");\n    el.id = ELEMENT_ID.LABEL;\n    this.applyStyles(el);\n    return el;\n  }\n\n  private applyStyles(el: HTMLDivElement): void {\n    const hue = this.theme.hue ?? 280;\n    const bgColor =\n      this.theme.label?.backgroundColor || `hsl(${hue}, 70%, 35%)`;\n    const textColor = this.theme.label?.textColor || \"#ffffff\";\n\n    el.style.cssText = `\n      position: fixed;\n      background: ${bgColor};\n      color: ${textColor};\n      padding: 4px 8px;\n      border-radius: 4px;\n      font-size: 12px;\n      font-family: ui-monospace, SFMono-Regular, \"SF Mono\", Menlo, monospace;\n      font-weight: 500;\n      z-index: 2147483647;\n      pointer-events: none;\n      display: none;\n      white-space: nowrap;\n      box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n    `;\n  }\n\n  show(element: HTMLElement, context: ElementContext): void {\n    if (!this.element.parentNode) {\n      document.body.appendChild(this.element);\n    }\n\n    const summary = buildSummary(context);\n    this.element.textContent = summary;\n\n    const rect = context.rect;\n    const tooltipRect = this.element.getBoundingClientRect();\n\n    // Position above element, or below if no space\n    let top = rect.top - 28;\n    if (top < 4) {\n      top = rect.bottom + 4;\n    }\n\n    // Keep within viewport horizontally\n    let left = rect.left;\n    if (left + tooltipRect.width > window.innerWidth - 4) {\n      left = window.innerWidth - tooltipRect.width - 4;\n    }\n\n    this.element.style.display = \"block\";\n    this.element.style.top = `${top}px`;\n    this.element.style.left = `${left}px`;\n  }\n\n  hide(): void {\n    this.element.style.display = \"none\";\n  }\n\n  updateTheme(theme: ThemeConfig): void {\n    this.theme = theme;\n    this.applyStyles(this.element);\n  }\n\n  destroy(): void {\n    this.element.remove();\n  }\n}\n","/**\n * Copy Notification - Shows success message\n */\n\nimport { ELEMENT_ID, NOTIFICATION_DURATION } from \"../constants.js\";\n\nexport function showNotification(message: string): void {\n  // Remove existing\n  const existing = document.getElementById(ELEMENT_ID.NOTIFICATION);\n  if (existing) existing.remove();\n\n  const el = document.createElement(\"div\");\n  el.id = ELEMENT_ID.NOTIFICATION;\n  el.textContent = message;\n\n  el.style.cssText = `\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    background: linear-gradient(135deg, #10b981, #059669);\n    color: white;\n    padding: 12px 20px;\n    border-radius: 8px;\n    font-family: system-ui, -apple-system, sans-serif;\n    font-size: 14px;\n    font-weight: 500;\n    z-index: 2147483647;\n    box-shadow: 0 4px 12px rgba(0,0,0,0.2);\n    animation: gicm-slide-in 0.3s ease-out;\n  `;\n\n  // Add animation keyframes if not exists\n  if (!document.getElementById(\"gicm-grab-styles\")) {\n    const style = document.createElement(\"style\");\n    style.id = \"gicm-grab-styles\";\n    style.textContent = `\n      @keyframes gicm-slide-in {\n        from { transform: translateX(100%); opacity: 0; }\n        to { transform: translateX(0); opacity: 1; }\n      }\n      @keyframes gicm-fade-out {\n        from { opacity: 1; }\n        to { opacity: 0; }\n      }\n    `;\n    document.head.appendChild(style);\n  }\n\n  document.body.appendChild(el);\n\n  // Remove after duration\n  setTimeout(() => {\n    el.style.animation = \"gicm-fade-out 0.3s ease-out forwards\";\n    setTimeout(() => el.remove(), 300);\n  }, NOTIFICATION_DURATION);\n}\n","/**\n * Suggestion Panel - Shows gICM component suggestions\n */\n\nimport type { GICMSuggestion } from \"../types.js\";\nimport { ELEMENT_ID, SUGGESTION_PANEL_DURATION } from \"../constants.js\";\n\nexport class SuggestionPanel {\n  private element: HTMLDivElement | null = null;\n  private hideTimeout: number | null = null;\n\n  show(suggestions: GICMSuggestion[]): void {\n    this.hide();\n\n    if (suggestions.length === 0) return;\n\n    this.element = this.createElement(suggestions);\n    document.body.appendChild(this.element);\n\n    // Auto-hide after duration\n    this.hideTimeout = window.setTimeout(() => {\n      this.hide();\n    }, SUGGESTION_PANEL_DURATION);\n  }\n\n  hide(): void {\n    if (this.hideTimeout) {\n      clearTimeout(this.hideTimeout);\n      this.hideTimeout = null;\n    }\n\n    if (this.element) {\n      this.element.remove();\n      this.element = null;\n    }\n  }\n\n  destroy(): void {\n    this.hide();\n  }\n\n  private createElement(suggestions: GICMSuggestion[]): HTMLDivElement {\n    const el = document.createElement(\"div\");\n    el.id = ELEMENT_ID.SUGGESTION_PANEL;\n\n    el.innerHTML = `\n      <div style=\"\n        position: fixed;\n        bottom: 20px;\n        right: 20px;\n        width: 320px;\n        max-height: 400px;\n        background: #1a1a2e;\n        border: 1px solid #7c3aed;\n        border-radius: 12px;\n        box-shadow: 0 20px 40px rgba(0,0,0,0.4);\n        font-family: system-ui, -apple-system, sans-serif;\n        z-index: 2147483647;\n        overflow: hidden;\n        animation: gicm-slide-in 0.3s ease-out;\n      \">\n        <div style=\"\n          padding: 12px 16px;\n          background: linear-gradient(135deg, #7c3aed, #a855f7);\n          color: white;\n          font-weight: 600;\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        \">\n          <span>gICM Components</span>\n          <button\n            onclick=\"this.closest('#${ELEMENT_ID.SUGGESTION_PANEL}').remove()\"\n            style=\"\n              background: none;\n              border: none;\n              color: white;\n              cursor: pointer;\n              font-size: 18px;\n              line-height: 1;\n              padding: 0;\n            \"\n          >×</button>\n        </div>\n        <div style=\"padding: 12px; overflow-y: auto; max-height: 320px;\">\n          ${suggestions.map((s) => this.renderSuggestion(s)).join(\"\")}\n        </div>\n        <div style=\"\n          padding: 8px 16px;\n          background: #2a2a3e;\n          font-size: 11px;\n          color: #888;\n          text-align: center;\n        \">\n          Click to copy ID - Paste in Claude Code\n        </div>\n      </div>\n    `;\n\n    // Add click handlers\n    el.querySelectorAll(\"[data-gicm-id]\").forEach((item) => {\n      item.addEventListener(\"click\", () => {\n        const id = item.getAttribute(\"data-gicm-id\");\n        navigator.clipboard.writeText(`gicm:${id}`);\n\n        const badge = item.querySelector(\".copy-badge\") as HTMLElement;\n        if (badge) {\n          badge.textContent = \"Copied!\";\n          badge.style.background = \"#10b981\";\n        }\n      });\n    });\n\n    return el;\n  }\n\n  private renderSuggestion(s: GICMSuggestion): string {\n    const score = Math.round(s.similarity_score * 100);\n\n    return `\n      <div\n        data-gicm-id=\"${s.id}\"\n        style=\"\n          padding: 12px;\n          margin-bottom: 8px;\n          background: #2a2a3e;\n          border-radius: 8px;\n          cursor: pointer;\n          transition: background 0.15s;\n        \"\n        onmouseover=\"this.style.background='#3a3a4e'\"\n        onmouseout=\"this.style.background='#2a2a3e'\"\n      >\n        <div style=\"\n          font-weight: 600;\n          color: #e0e0e0;\n          margin-bottom: 4px;\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        \">\n          <span>${s.name}</span>\n          <span class=\"copy-badge\" style=\"\n            font-size: 10px;\n            padding: 2px 6px;\n            background: #4a4a5e;\n            border-radius: 4px;\n            font-weight: normal;\n          \">Copy ID</span>\n        </div>\n        <div style=\"\n          font-size: 12px;\n          color: #a0a0a0;\n          margin-bottom: 8px;\n          line-height: 1.4;\n        \">${s.description.slice(0, 80)}${s.description.length > 80 ? \"...\" : \"\"}</div>\n        <div style=\"\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        \">\n          <span style=\"\n            font-size: 11px;\n            padding: 2px 8px;\n            background: #7c3aed;\n            color: white;\n            border-radius: 4px;\n          \">${s.category}</span>\n          <span style=\"\n            font-size: 11px;\n            color: ${score >= 80 ? \"#10b981\" : score >= 60 ? \"#f59e0b\" : \"#6b7280\"};\n            font-weight: 500;\n          \">${score}% match</span>\n        </div>\n      </div>\n    `;\n  }\n}\n","/**\n * gICM API Client - Fetch component suggestions\n */\n\nimport type { GICMSuggestion } from \"../types.js\";\n\nexport async function fetchGICMSuggestions(\n  elementContext: string,\n  apiUrl: string\n): Promise<GICMSuggestion[]> {\n  try {\n    const response = await fetch(`${apiUrl}/search/by-element`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        element_context: elementContext,\n        include_similar: true,\n        limit: 5,\n      }),\n    });\n\n    if (!response.ok) {\n      throw new Error(`API error: ${response.status}`);\n    }\n\n    const data = await response.json();\n    return data.matches || [];\n  } catch (error) {\n    console.error(\"[gICM Grab] API error:\", error);\n    return [];\n  }\n}\n","/**\n * Clipboard Utilities\n */\n\nexport async function copyToClipboard(text: string): Promise<void> {\n  try {\n    await navigator.clipboard.writeText(text);\n  } catch (error) {\n    // Fallback for older browsers\n    const textarea = document.createElement(\"textarea\");\n    textarea.value = text;\n    textarea.style.cssText = \"position:fixed;left:-9999px\";\n    document.body.appendChild(textarea);\n    textarea.select();\n    document.execCommand(\"copy\");\n    document.body.removeChild(textarea);\n  }\n}\n\nexport async function readFromClipboard(): Promise<string> {\n  try {\n    return await navigator.clipboard.readText();\n  } catch {\n    return \"\";\n  }\n}\n","/**\n * Main Grabber Class - Orchestrates all components\n */\n\nimport type {\n  GrabConfig,\n  GrabState,\n  GrabAPI,\n  ElementContext,\n} from \"../types.js\";\nimport { DEFAULT_CONFIG, DEFAULT_THEME } from \"../constants.js\";\nimport { KeyboardHandler } from \"./keyboard.js\";\nimport { ElementSelector } from \"./selector.js\";\nimport { buildElementContext, buildClipboardText } from \"./context-builder.js\";\nimport { Overlay } from \"../ui/overlay.js\";\nimport { Tooltip } from \"../ui/tooltip.js\";\nimport { showNotification } from \"../ui/notification.js\";\nimport { SuggestionPanel } from \"../ui/suggestion-panel.js\";\nimport { fetchGICMSuggestions } from \"../integrations/gicm-api.js\";\nimport { copyToClipboard } from \"../integrations/clipboard.js\";\n\nexport class Grabber implements GrabAPI {\n  private config: Required<GrabConfig>;\n  private state: GrabState;\n\n  private keyboard: KeyboardHandler;\n  private selector: ElementSelector;\n  private overlay: Overlay;\n  private tooltip: Tooltip;\n  private suggestionPanel: SuggestionPanel | null = null;\n\n  constructor(userConfig: GrabConfig = {}) {\n    // Merge config with defaults\n    this.config = {\n      ...DEFAULT_CONFIG,\n      ...userConfig,\n      theme: {\n        ...DEFAULT_THEME,\n        ...userConfig.theme,\n        label: {\n          ...DEFAULT_THEME.label,\n          ...userConfig.theme?.label,\n        },\n      },\n      onSelect: userConfig.onSelect ?? (() => {}),\n      onCopy: userConfig.onCopy ?? (() => {}),\n      onStateChange: userConfig.onStateChange ?? (() => {}),\n    };\n\n    // Initialize state\n    this.state = {\n      isActive: false,\n      hoveredElement: null,\n      selectedElement: null,\n    };\n\n    // Initialize components\n    this.keyboard = new KeyboardHandler({\n      shortcutKey: this.config.shortcutKey,\n      onActivate: () => this.activate(),\n      onDeactivate: () => this.handleKeyRelease(),\n    });\n\n    this.selector = new ElementSelector({\n      onHover: (el, ctx) => this.handleHover(el, ctx),\n      onClick: (el, ctx) => this.handleSelect(el, ctx),\n    });\n\n    this.overlay = new Overlay(this.config.theme);\n    this.tooltip = new Tooltip(this.config.theme);\n\n    if (this.config.gicmApiUrl && this.config.showSuggestions) {\n      this.suggestionPanel = new SuggestionPanel();\n    }\n\n    // Start keyboard listener\n    if (this.config.enabled) {\n      this.keyboard.start();\n    }\n\n    this.log(\"Initialized. Hold ⌘/Ctrl+C and click any element.\");\n  }\n\n  // --- Public API ---\n\n  activate(): void {\n    if (this.state.isActive) return;\n\n    this.state.isActive = true;\n    this.state.selectedElement = null;\n    this.selector.activate();\n    this.overlay.show();\n    this.updateState();\n\n    this.log(\"Grab mode activated\");\n  }\n\n  deactivate(): void {\n    if (!this.state.isActive) return;\n\n    this.state.isActive = false;\n    this.state.hoveredElement = null;\n    this.selector.deactivate();\n    this.overlay.hide();\n    this.tooltip.hide();\n    this.updateState();\n\n    this.log(\"Grab mode deactivated\");\n  }\n\n  grab(element: HTMLElement): ElementContext {\n    return buildElementContext(element);\n  }\n\n  async copy(element: HTMLElement): Promise<void> {\n    const context = buildElementContext(element);\n    const clipboardText = buildClipboardText(context);\n\n    await copyToClipboard(clipboardText);\n\n    this.config.onCopy(context, clipboardText);\n    showNotification(\"✓ Copied! Paste into Claude Code / Cursor\");\n  }\n\n  getState(): GrabState {\n    return { ...this.state };\n  }\n\n  configure(newConfig: Partial<GrabConfig>): void {\n    Object.assign(this.config, newConfig);\n\n    if (newConfig.theme) {\n      this.overlay.updateTheme(this.config.theme);\n      this.tooltip.updateTheme(this.config.theme);\n    }\n\n    if (newConfig.enabled === false) {\n      this.deactivate();\n      this.keyboard.stop();\n    } else if (newConfig.enabled === true) {\n      this.keyboard.start();\n    }\n  }\n\n  destroy(): void {\n    this.deactivate();\n    this.keyboard.stop();\n    this.overlay.destroy();\n    this.tooltip.destroy();\n    this.suggestionPanel?.destroy();\n\n    this.log(\"Destroyed\");\n  }\n\n  // --- Internal Handlers ---\n\n  private handleHover(\n    element: HTMLElement | null,\n    context: ElementContext | null\n  ): void {\n    this.state.hoveredElement = element;\n\n    if (element && context) {\n      this.overlay.update(context.rect);\n      this.tooltip.show(element, context);\n    } else {\n      this.overlay.clear();\n      this.tooltip.hide();\n    }\n  }\n\n  private async handleSelect(\n    element: HTMLElement,\n    context: ElementContext\n  ): Promise<void> {\n    this.state.selectedElement = element;\n    this.updateState();\n\n    // Copy to clipboard\n    const clipboardText = buildClipboardText(context);\n    await copyToClipboard(clipboardText);\n\n    // Trigger callbacks\n    this.config.onSelect(context);\n    this.config.onCopy(context, clipboardText);\n\n    // Show notification\n    showNotification(\"✓ Copied! Paste into Claude Code / Cursor\");\n\n    // Fetch and show gICM suggestions\n    if (this.config.gicmApiUrl && this.suggestionPanel) {\n      try {\n        const suggestions = await fetchGICMSuggestions(\n          clipboardText,\n          this.config.gicmApiUrl\n        );\n        if (suggestions.length > 0) {\n          this.suggestionPanel.show(suggestions);\n        }\n      } catch (error) {\n        this.log(\"Failed to fetch suggestions:\", error);\n      }\n    }\n\n    // Deactivate after selection\n    this.deactivate();\n  }\n\n  private handleKeyRelease(): void {\n    // Only deactivate if no element was selected\n    if (!this.state.selectedElement) {\n      this.deactivate();\n    }\n  }\n\n  private updateState(): void {\n    this.config.onStateChange(this.getState());\n  }\n\n  private log(...args: any[]): void {\n    console.log(\"[gICM Grab]\", ...args);\n  }\n}\n"],"mappings":"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","names":[]}