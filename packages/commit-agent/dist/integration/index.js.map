{"version":3,"sources":["../../../../node_modules/eventemitter3/index.js","../../../../node_modules/eventemitter3/index.mjs","../../src/core/constants.ts","../../src/integration/commit-adapter.ts"],"sourcesContent":["'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","import EventEmitter from './index.js'\n\nexport { EventEmitter }\nexport default EventEmitter\n","/**\n * Constants for Commit Agent\n *\n * Risk weights, thresholds, and conventional commit mappings\n */\n\n// ============================================================================\n// RISK WEIGHTS\n// ============================================================================\n\nexport const RISK_WEIGHTS = {\n  linesChanged: 0.3, // 30% weight\n  filesChanged: 0.2, // 20% weight\n  criticalPaths: 0.25, // 25% weight\n  breakingChange: 0.2, // 20% weight\n  forcePush: 0.05, // 5% weight (always escalate if present)\n} as const;\n\n// ============================================================================\n// RISK THRESHOLDS\n// ============================================================================\n\nexport const RISK_THRESHOLDS = {\n  // Lines changed\n  linesLow: 50, // <50 lines = safe\n  linesMedium: 150, // 50-150 = low risk\n  linesHigh: 300, // 150-300 = medium risk\n  linesCritical: 500, // >500 = high risk\n\n  // Files changed\n  filesLow: 3, // <3 files = safe\n  filesMedium: 7, // 3-7 = low risk\n  filesHigh: 15, // 7-15 = medium risk\n  filesCritical: 25, // >25 = high risk\n\n  // Decision score thresholds\n  autoExecuteMax: 40, // 0-40 = auto execute\n  queueApprovalMax: 60, // 41-60 = queue approval\n  escalateMax: 80, // 61-80 = escalate\n  // >80 = reject (or escalate with urgency)\n} as const;\n\n// ============================================================================\n// CONVENTIONAL COMMIT TYPE DESCRIPTIONS\n// ============================================================================\n\nexport const COMMIT_TYPE_DESCRIPTIONS: Record<string, string> = {\n  feat: \"A new feature for the user\",\n  fix: \"A bug fix\",\n  docs: \"Documentation only changes\",\n  style: \"Changes that do not affect the meaning of the code (formatting, semicolons)\",\n  refactor: \"A code change that neither fixes a bug nor adds a feature\",\n  perf: \"A code change that improves performance\",\n  test: \"Adding missing tests or correcting existing tests\",\n  build: \"Changes that affect the build system or external dependencies\",\n  ci: \"Changes to CI configuration files and scripts\",\n  chore: \"Other changes that don't modify src or test files\",\n  revert: \"Reverts a previous commit\",\n} as const;\n\n// ============================================================================\n// FILE PATTERNS FOR RISK DETECTION\n// ============================================================================\n\nexport const CRITICAL_PATH_PATTERNS = [\n  // Core infrastructure\n  /^src\\/core\\//,\n  /^packages\\/agent-core\\//,\n  /^packages\\/autonomy\\//,\n\n  // Configuration\n  /\\.env/,\n  /^\\.github\\/workflows\\//,\n  /package\\.json$/,\n  /pnpm-workspace\\.yaml$/,\n  /tsconfig\\.json$/,\n\n  // Security-sensitive\n  /secret/i,\n  /credential/i,\n  /password/i,\n  /api[_-]?key/i,\n  /private[_-]?key/i,\n\n  // Database\n  /migration/i,\n  /schema\\.(sql|prisma|ts)$/,\n] as const;\n\nexport const BREAKING_CHANGE_INDICATORS = [\n  /^feat!/,\n  /^fix!/,\n  /BREAKING CHANGE:/i,\n  /\\bremove\\b.*\\bapi\\b/i,\n  /\\bdelete\\b.*\\bendpoint\\b/i,\n  /\\bdeprecate\\b/i,\n] as const;\n\n// ============================================================================\n// DEFAULT MESSAGES\n// ============================================================================\n\nexport const DEFAULT_CO_AUTHOR = \"Claude <noreply@anthropic.com>\";\n\nexport const COMMIT_FOOTER_TEMPLATE = `\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: ${DEFAULT_CO_AUTHOR}\n`.trim();\n","/**\n * Commit Engine Adapter for Autonomy Integration\n *\n * Routes git operations through the autonomy system for risk assessment\n */\n\nimport { EventEmitter } from \"eventemitter3\";\nimport type { DiffSummary, CommitRiskAssessment } from \"../core/types.js\";\nimport { RISK_THRESHOLDS } from \"../core/constants.js\";\n\n// Re-define minimal types to avoid circular dependency with @gicm/autonomy\ntype ActionCategory = \"trading\" | \"content\" | \"build\" | \"deployment\" | \"configuration\";\ntype EngineType = \"money\" | \"growth\" | \"product\" | \"orchestrator\";\ntype Urgency = \"low\" | \"normal\" | \"high\" | \"critical\";\ntype DecisionOutcome = \"auto_execute\" | \"queue_approval\" | \"escalate\" | \"reject\";\n\ninterface ActionMetadata {\n  estimatedValue?: number;\n  reversible: boolean;\n  urgency: Urgency;\n  dependencies?: string[];\n  linesChanged?: number;\n  filesChanged?: number;\n}\n\ninterface Action {\n  id: string;\n  engine: EngineType;\n  category: ActionCategory;\n  type: string;\n  description: string;\n  params: Record<string, unknown>;\n  metadata: ActionMetadata;\n  timestamp: number;\n}\n\nexport interface CommitActionParams {\n  message: string;\n  diff: DiffSummary;\n  risk: CommitRiskAssessment;\n  amend?: boolean;\n}\n\nexport interface PushActionParams {\n  remote: string;\n  branch: string;\n  force?: boolean;\n  commitCount?: number;\n}\n\nexport interface PRActionParams {\n  title: string;\n  body: string;\n  base: string;\n  draft?: boolean;\n}\n\nexport interface CommitAdapterEvents {\n  \"action:submitted\": (action: Action) => void;\n  \"decision:received\": (decision: { action: Action; outcome: DecisionOutcome; reason: string }) => void;\n}\n\nexport interface CommitAdapterConfig {\n  engineName?: string;\n  autoExecuteMaxScore?: number;\n  queueApprovalMaxScore?: number;\n  escalateMaxScore?: number;\n}\n\n/**\n * Adapter for integrating commit operations with autonomy system\n */\nexport class CommitEngineAdapter extends EventEmitter<CommitAdapterEvents> {\n  private config: Required<CommitAdapterConfig>;\n  private actionCount = 0;\n\n  constructor(config: CommitAdapterConfig = {}) {\n    super();\n    this.config = {\n      engineName: config.engineName ?? \"commit-agent\",\n      autoExecuteMaxScore: config.autoExecuteMaxScore ?? RISK_THRESHOLDS.autoExecuteMax,\n      queueApprovalMaxScore: config.queueApprovalMaxScore ?? RISK_THRESHOLDS.queueApprovalMax,\n      escalateMaxScore: config.escalateMaxScore ?? RISK_THRESHOLDS.escalateMax,\n    };\n  }\n\n  /**\n   * Create an action for committing changes\n   */\n  createCommitAction(params: CommitActionParams): Action {\n    const totalLines = params.diff.totalLinesAdded + params.diff.totalLinesRemoved;\n\n    return this.createAction({\n      type: params.amend ? \"git_commit_amend\" : \"git_commit\",\n      description: `Commit: ${params.message.substring(0, 50)}${params.message.length > 50 ? \"...\" : \"\"}`,\n      payload: {\n        message: params.message,\n        files: params.diff.files.map((f) => f.path),\n        linesAdded: params.diff.totalLinesAdded,\n        linesRemoved: params.diff.totalLinesRemoved,\n        isBreaking: params.risk.isBreakingChange,\n        criticalPaths: params.risk.criticalPaths,\n      },\n      linesChanged: totalLines,\n      filesChanged: params.diff.totalFilesChanged,\n      reversible: !params.amend, // Regular commits can be reverted\n      urgency: params.risk.isBreakingChange ? \"high\" : \"normal\",\n    });\n  }\n\n  /**\n   * Create an action for pushing changes\n   */\n  createPushAction(params: PushActionParams): Action {\n    return this.createAction({\n      type: params.force ? \"git_push_force\" : \"git_push\",\n      description: `Push to ${params.remote}/${params.branch}${params.force ? \" (force)\" : \"\"}`,\n      payload: {\n        remote: params.remote,\n        branch: params.branch,\n        force: params.force ?? false,\n        commitCount: params.commitCount ?? 1,\n      },\n      reversible: false, // Push cannot be easily undone\n      urgency: params.force ? \"critical\" : \"normal\",\n    });\n  }\n\n  /**\n   * Create an action for creating a PR\n   */\n  createPRAction(params: PRActionParams): Action {\n    return this.createAction({\n      type: params.draft ? \"git_pr_draft\" : \"git_pr_create\",\n      description: `Create PR: ${params.title.substring(0, 50)}${params.title.length > 50 ? \"...\" : \"\"}`,\n      payload: {\n        title: params.title,\n        body: params.body,\n        base: params.base,\n        draft: params.draft ?? false,\n      },\n      reversible: true, // PRs can be closed\n      urgency: \"normal\",\n    });\n  }\n\n  /**\n   * Determine decision outcome based on risk score\n   */\n  getDecisionOutcome(riskScore: number): DecisionOutcome {\n    if (riskScore <= this.config.autoExecuteMaxScore) {\n      return \"auto_execute\";\n    }\n    if (riskScore <= this.config.queueApprovalMaxScore) {\n      return \"queue_approval\";\n    }\n    if (riskScore <= this.config.escalateMaxScore) {\n      return \"escalate\";\n    }\n    return \"reject\";\n  }\n\n  /**\n   * Check if an action should auto-execute\n   */\n  shouldAutoExecute(action: Action): boolean {\n    // Force push always requires approval\n    if (action.type === \"git_push_force\") {\n      return false;\n    }\n\n    // Commits with many lines/files need approval\n    const meta = action.metadata;\n    if (meta.linesChanged && meta.linesChanged > 300) {\n      return false;\n    }\n    if (meta.filesChanged && meta.filesChanged > 10) {\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Create a generic action\n   */\n  private createAction(params: {\n    type: string;\n    description: string;\n    payload: Record<string, unknown>;\n    estimatedValue?: number;\n    reversible?: boolean;\n    urgency?: Urgency;\n    linesChanged?: number;\n    filesChanged?: number;\n  }): Action {\n    this.actionCount++;\n\n    const action: Action = {\n      id: `commit_${Date.now()}_${this.actionCount}`,\n      engine: \"orchestrator\" as EngineType, // Commit agent is orchestrator type\n      category: this.getCategoryForType(params.type),\n      type: params.type,\n      description: params.description,\n      params: params.payload,\n      metadata: {\n        estimatedValue: params.estimatedValue,\n        reversible: params.reversible ?? true,\n        urgency: params.urgency ?? \"normal\",\n        linesChanged: params.linesChanged,\n        filesChanged: params.filesChanged,\n      },\n      timestamp: Date.now(),\n    };\n\n    this.emit(\"action:submitted\", action);\n    return action;\n  }\n\n  /**\n   * Map action type to category\n   */\n  private getCategoryForType(actionType: string): ActionCategory {\n    if (actionType === \"git_push_force\" || actionType.includes(\"pr\")) {\n      return \"deployment\";\n    }\n    if (actionType.includes(\"commit\")) {\n      return \"build\";\n    }\n    return \"build\";\n  }\n\n  /**\n   * Get engine name\n   */\n  getEngineName(): string {\n    return this.config.engineName;\n  }\n\n  /**\n   * Get action count\n   */\n  getActionCount(): number {\n    return this.actionCount;\n  }\n}\n"],"mappings":"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","names":["EventEmitter","EventEmitter"]}