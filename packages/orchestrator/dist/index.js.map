{"version":3,"sources":["../src/orchestrator.ts","../src/types.ts","../src/coordination/router.ts","../src/coordination/memory.ts","../src/workflows/trading.ts","../src/workflows/research.ts","../src/workflows/portfolio.ts"],"sourcesContent":["import {\n  BaseAgent,\n  type AgentConfig,\n  type AgentContext,\n  type AgentResult,\n  type LLMClient,\n  createLLMClient,\n} from \"@gicm/agent-core\";\nimport type {\n  OrchestratorConfig,\n  RegisteredAgent,\n  Workflow,\n  WorkflowStep,\n  WorkflowContext,\n  WorkflowResult,\n  StepResult,\n  RoutingDecision,\n  AgentType,\n} from \"./types.js\";\nimport { OrchestratorConfigSchema } from \"./types.js\";\nimport { Router } from \"./coordination/router.js\";\nimport { SharedMemory } from \"./coordination/memory.js\";\nimport { tradingWorkflows } from \"./workflows/trading.js\";\nimport { researchWorkflows } from \"./workflows/research.js\";\nimport { portfolioWorkflows } from \"./workflows/portfolio.js\";\n\nexport class Orchestrator extends BaseAgent {\n  private router: Router;\n  private memory: SharedMemory;\n  private agents: Map<string, RegisteredAgent> = new Map();\n  private workflows: Map<string, Workflow> = new Map();\n  private runningWorkflows: Map<string, WorkflowContext> = new Map();\n  private orchestratorConfig: OrchestratorConfig;\n  private llmClient?: LLMClient;\n\n  constructor(config: OrchestratorConfig & AgentConfig) {\n    const validatedConfig = OrchestratorConfigSchema.parse(config);\n    super(\"orchestrator\", config);\n\n    this.orchestratorConfig = validatedConfig;\n\n    // Initialize LLM client if API key provided\n    if (config.apiKey) {\n      this.llmClient = createLLMClient({\n        provider: config.llmProvider ?? \"openai\",\n        model: config.llmModel,\n        apiKey: config.apiKey,\n        temperature: config.temperature ?? 0.7,\n        maxTokens: config.maxTokens ?? 4096,\n      });\n    }\n\n    this.router = new Router(this.llmClient);\n    this.memory = new SharedMemory();\n\n    // Register built-in workflows\n    this.registerBuiltInWorkflows();\n  }\n\n  private registerBuiltInWorkflows(): void {\n    // Trading workflows\n    for (const [id, workflow] of Object.entries(tradingWorkflows)) {\n      this.workflows.set(id, workflow);\n    }\n\n    // Research workflows\n    for (const [id, workflow] of Object.entries(researchWorkflows)) {\n      this.workflows.set(id, workflow);\n    }\n\n    // Portfolio workflows\n    for (const [id, workflow] of Object.entries(portfolioWorkflows)) {\n      this.workflows.set(id, workflow);\n    }\n  }\n\n  getSystemPrompt(): string {\n    const agents = Array.from(this.agents.values())\n      .map((a) => `- ${a.name} (${a.type}): ${a.description}`)\n      .join(\"\\n\");\n\n    const workflows = Array.from(this.workflows.values())\n      .map((w) => `- ${w.name}: ${w.description}`)\n      .join(\"\\n\");\n\n    return `You are an orchestrator for a multi-agent Web3 platform.\n\nAvailable Agents:\n${agents || \"No agents registered\"}\n\nAvailable Workflows:\n${workflows}\n\nYou can:\n1. Route requests to appropriate agents\n2. Execute multi-step workflows\n3. Coordinate parallel agent execution\n4. Maintain shared context between agents\n\nWhen given a request:\n1. Determine if it's a simple single-agent task or requires a workflow\n2. For simple tasks, route to the appropriate agent\n3. For complex tasks, select or create an appropriate workflow\n4. Provide clear status updates and results`;\n  }\n\n  async analyze(context: AgentContext): Promise<AgentResult> {\n    const input = context.userQuery ?? \"\";\n\n    // Try to match a workflow first\n    const workflowMatch = this.matchWorkflow(input);\n    if (workflowMatch) {\n      const result = await this.executeWorkflow(workflowMatch.workflow, workflowMatch.params);\n      return this.createResult(\n        result.success,\n        { workflow: result },\n        result.errors.length > 0 ? result.errors[0]?.error : undefined,\n        result.success ? 0.9 : 0.3,\n        `Workflow ${result.workflowId} completed`\n      );\n    }\n\n    // Route to single agent\n    const routing = await this.router.route(input);\n    if (!routing) {\n      return this.createResult(\n        false,\n        null,\n        \"Unable to determine how to handle this request\",\n        0.2,\n        \"No suitable routing found\"\n      );\n    }\n\n    const agent = this.agents.get(routing.agentId);\n    if (!agent) {\n      return this.createResult(\n        false,\n        { routing },\n        `Agent ${routing.agentId} not found`,\n        0.3,\n        \"Agent not registered\"\n      );\n    }\n\n    try {\n      const result = await agent.agent.analyze(context);\n      return this.createResult(\n        result.success,\n        { agentResult: result, routing },\n        result.error,\n        result.confidence ?? 0.8,\n        `Routed to ${agent.name}`\n      );\n    } catch (error) {\n      return this.createResult(\n        false,\n        { routing },\n        `Error executing agent: ${error}`,\n        0,\n        \"Agent execution failed\"\n      );\n    }\n  }\n\n  private matchWorkflow(input: string): { workflow: Workflow; params: Record<string, unknown> } | null {\n    const lowerInput = input.toLowerCase();\n\n    // Keyword matching for workflows\n    const workflowKeywords: Record<string, string[]> = {\n      \"research-token\": [\"research\", \"analyze token\", \"due diligence\", \"investigate\"],\n      \"swap-token\": [\"swap\", \"trade\", \"exchange\"],\n      \"bridge-tokens\": [\"bridge\", \"cross-chain\", \"transfer to\"],\n      \"analyze-portfolio\": [\"portfolio\", \"holdings\", \"my tokens\"],\n      \"nft-collection-analysis\": [\"nft collection\", \"analyze nft\", \"floor price\"],\n      \"dao-governance-analysis\": [\"dao\", \"proposal\", \"governance\"],\n      \"risk-assessment\": [\"risk\", \"security assessment\", \"audit portfolio\"],\n    };\n\n    for (const [workflowId, keywords] of Object.entries(workflowKeywords)) {\n      for (const keyword of keywords) {\n        if (lowerInput.includes(keyword)) {\n          const workflow = this.workflows.get(workflowId);\n          if (workflow) {\n            const params = this.extractWorkflowParams(input);\n            return { workflow, params };\n          }\n        }\n      }\n    }\n\n    return null;\n  }\n\n  private extractWorkflowParams(input: string): Record<string, unknown> {\n    const params: Record<string, unknown> = {};\n\n    // Extract addresses\n    const ethAddress = input.match(/0x[a-fA-F0-9]{40}/);\n    if (ethAddress) {\n      params.contractAddress = ethAddress[0];\n      params.wallet = ethAddress[0];\n    }\n\n    // Extract token symbols\n    const token = input.match(/\\$([A-Z]{2,10})/);\n    if (token) {\n      params.token = token[1];\n    }\n\n    // Extract project/collection names (quoted text)\n    const quoted = input.match(/\"([^\"]+)\"/);\n    if (quoted) {\n      params.projectName = quoted[1];\n      params.collectionName = quoted[1];\n    }\n\n    return params;\n  }\n\n  registerAgent(\n    id: string,\n    type: AgentType,\n    name: string,\n    description: string,\n    capabilities: string[],\n    agent: BaseAgent\n  ): void {\n    const registered: RegisteredAgent = {\n      id,\n      type,\n      name,\n      description,\n      capabilities,\n      agent,\n    };\n    this.agents.set(id, registered);\n    this.router.registerAgent(registered);\n  }\n\n  unregisterAgent(id: string): void {\n    this.agents.delete(id);\n    this.router.unregisterAgent(id);\n  }\n\n  registerWorkflow(workflow: Workflow): void {\n    this.workflows.set(workflow.id, workflow);\n  }\n\n  async executeWorkflow(\n    workflow: Workflow,\n    params: Record<string, unknown>\n  ): Promise<WorkflowResult> {\n    const context: WorkflowContext = {\n      workflowId: workflow.id,\n      startTime: new Date(),\n      results: new Map(),\n      memory: new Map(Object.entries(params)),\n      errors: [],\n    };\n\n    this.runningWorkflows.set(workflow.id, context);\n\n    const startTime = Date.now();\n    const stepResults: StepResult[] = [];\n\n    try {\n      // Build dependency graph and execute in order\n      const executionOrder = this.buildExecutionOrder(workflow.steps);\n\n      for (const batch of executionOrder) {\n        // Execute steps in parallel within each batch\n        const batchResults = await Promise.all(\n          batch.map((step) => this.executeStep(step, context, params))\n        );\n\n        stepResults.push(...batchResults);\n\n        // Check for failures\n        const failures = batchResults.filter((r) => !r.success);\n        if (failures.length > 0 && workflow.onError === \"stop\") {\n          break;\n        }\n      }\n\n      const success = context.errors.length === 0 ||\n        stepResults.every((r) => r.success);\n\n      return {\n        workflowId: workflow.id,\n        success,\n        duration: Date.now() - startTime,\n        steps: stepResults,\n        errors: context.errors,\n        output: this.aggregateResults(context),\n      };\n    } finally {\n      this.runningWorkflows.delete(workflow.id);\n    }\n  }\n\n  private buildExecutionOrder(steps: WorkflowStep[]): WorkflowStep[][] {\n    const batches: WorkflowStep[][] = [];\n    const completed = new Set<string>();\n    const remaining = [...steps];\n\n    while (remaining.length > 0) {\n      const batch: WorkflowStep[] = [];\n\n      for (let i = remaining.length - 1; i >= 0; i--) {\n        const step = remaining[i]!;\n        const deps = step.dependsOn ?? [];\n        const depsCompleted = deps.every((d) => completed.has(d));\n\n        if (depsCompleted) {\n          batch.push(step);\n          remaining.splice(i, 1);\n        }\n      }\n\n      if (batch.length === 0 && remaining.length > 0) {\n        // Circular dependency or missing dependency\n        this.log(\"Workflow has unresolvable dependencies\");\n        break;\n      }\n\n      if (batch.length > 0) {\n        batches.push(batch);\n        batch.forEach((s) => completed.add(s.id));\n      }\n    }\n\n    return batches;\n  }\n\n  private async executeStep(\n    step: WorkflowStep,\n    context: WorkflowContext,\n    params: Record<string, unknown>\n  ): Promise<StepResult> {\n    const startTime = Date.now();\n\n    // Check condition\n    if (step.condition && !step.condition(context)) {\n      return {\n        stepId: step.id,\n        agentId: step.agentId,\n        success: true,\n        data: { skipped: true },\n        duration: 0,\n        timestamp: new Date(),\n      };\n    }\n\n    const agent = this.agents.get(step.agentId);\n    if (!agent) {\n      const result: StepResult = {\n        stepId: step.id,\n        agentId: step.agentId,\n        success: false,\n        error: `Agent ${step.agentId} not found`,\n        duration: Date.now() - startTime,\n        timestamp: new Date(),\n      };\n      context.errors.push({\n        stepId: step.id,\n        error: result.error!,\n        timestamp: new Date(),\n        recovered: false,\n      });\n      return result;\n    }\n\n    try {\n      // Interpolate params with context values\n      const resolvedParams = this.resolveParams(step.params, params, context);\n\n      // Create agent context\n      const agentContext: AgentContext = {\n        chain: \"evm\",\n        network: \"mainnet\",\n        userQuery: `${step.action}: ${JSON.stringify(resolvedParams)}`,\n      };\n\n      // Execute the step\n      const data = await agent.agent.analyze(agentContext);\n\n      const result: StepResult = {\n        stepId: step.id,\n        agentId: step.agentId,\n        success: data.success,\n        data: data.data,\n        duration: Date.now() - startTime,\n        timestamp: new Date(),\n      };\n\n      context.results.set(step.id, result);\n      return result;\n    } catch (error) {\n      const result: StepResult = {\n        stepId: step.id,\n        agentId: step.agentId,\n        success: false,\n        error: String(error),\n        duration: Date.now() - startTime,\n        timestamp: new Date(),\n      };\n\n      context.results.set(step.id, result);\n      context.errors.push({\n        stepId: step.id,\n        error: result.error!,\n        timestamp: new Date(),\n        recovered: false,\n      });\n\n      return result;\n    }\n  }\n\n  private resolveParams(\n    stepParams: Record<string, unknown>,\n    workflowParams: Record<string, unknown>,\n    context: WorkflowContext\n  ): Record<string, unknown> {\n    const resolved: Record<string, unknown> = {};\n\n    for (const [key, value] of Object.entries(stepParams)) {\n      if (typeof value === \"string\" && value.startsWith(\"{{\") && value.endsWith(\"}}\")) {\n        const paramKey = value.slice(2, -2);\n        resolved[key] = workflowParams[paramKey] ?? context.memory.get(paramKey);\n      } else {\n        resolved[key] = value;\n      }\n    }\n\n    return resolved;\n  }\n\n  private aggregateResults(context: WorkflowContext): unknown {\n    const output: Record<string, unknown> = {};\n\n    for (const [stepId, result] of context.results) {\n      if (result.success && result.data) {\n        output[stepId] = result.data;\n      }\n    }\n\n    return output;\n  }\n\n  getMemory(): SharedMemory {\n    return this.memory;\n  }\n\n  getRegisteredAgents(): RegisteredAgent[] {\n    return Array.from(this.agents.values());\n  }\n\n  getWorkflows(): Workflow[] {\n    return Array.from(this.workflows.values());\n  }\n\n  getRunningWorkflows(): string[] {\n    return Array.from(this.runningWorkflows.keys());\n  }\n}\n","import { z } from \"zod\";\nimport type { BaseAgent, LLMClient } from \"@gicm/agent-core\";\n\nexport const OrchestratorConfigSchema = z.object({\n  maxConcurrentAgents: z.number().default(5),\n  defaultTimeout: z.number().default(30000), // 30 seconds\n  enableMemory: z.boolean().default(true),\n});\n\nexport type OrchestratorConfig = z.infer<typeof OrchestratorConfigSchema>;\n\nexport type AgentType =\n  | \"wallet\"\n  | \"defi\"\n  | \"nft\"\n  | \"dao\"\n  | \"social\"\n  | \"bridge\"\n  | \"audit\"\n  | \"custom\";\n\nexport interface RegisteredAgent {\n  id: string;\n  type: AgentType;\n  name: string;\n  description: string;\n  capabilities: string[];\n  agent: BaseAgent;\n}\n\nexport interface WorkflowStep {\n  id: string;\n  agentId: string;\n  action: string;\n  params: Record<string, unknown>;\n  dependsOn?: string[];\n  condition?: (context: WorkflowContext) => boolean;\n}\n\nexport interface Workflow {\n  id: string;\n  name: string;\n  description: string;\n  steps: WorkflowStep[];\n  onError?: \"stop\" | \"continue\" | \"retry\";\n  maxRetries?: number;\n}\n\nexport interface WorkflowContext {\n  workflowId: string;\n  startTime: Date;\n  results: Map<string, StepResult>;\n  memory: Map<string, unknown>;\n  errors: WorkflowError[];\n}\n\nexport interface StepResult {\n  stepId: string;\n  agentId: string;\n  success: boolean;\n  data?: unknown;\n  error?: string;\n  duration: number;\n  timestamp: Date;\n}\n\nexport interface WorkflowError {\n  stepId: string;\n  error: string;\n  timestamp: Date;\n  recovered: boolean;\n}\n\nexport interface WorkflowResult {\n  workflowId: string;\n  success: boolean;\n  duration: number;\n  steps: StepResult[];\n  errors: WorkflowError[];\n  output?: unknown;\n}\n\nexport interface Intent {\n  action: string;\n  entities: Record<string, string>;\n  confidence: number;\n  rawInput: string;\n}\n\nexport interface RoutingDecision {\n  agentId: string;\n  action: string;\n  params: Record<string, unknown>;\n  confidence: number;\n  reasoning: string;\n}\n\nexport interface MemoryEntry {\n  key: string;\n  value: unknown;\n  timestamp: Date;\n  ttl?: number;\n  tags: string[];\n}\n","import type { RegisteredAgent, Intent, RoutingDecision, AgentType } from \"../types.js\";\nimport type { LLMClient } from \"@gicm/agent-core\";\n\n// Keywords for each agent type\nconst AGENT_KEYWORDS: Record<AgentType, string[]> = {\n  wallet: [\n    \"balance\", \"send\", \"transfer\", \"wallet\", \"address\", \"transaction\",\n    \"sign\", \"approve\", \"spend\", \"holdings\", \"portfolio\",\n  ],\n  defi: [\n    \"price\", \"swap\", \"dex\", \"liquidity\", \"pool\", \"tvl\", \"volume\",\n    \"trending\", \"market\", \"token\", \"coin\", \"yield\", \"apy\", \"farm\",\n  ],\n  nft: [\n    \"nft\", \"collection\", \"mint\", \"rarity\", \"floor\", \"opensea\",\n    \"metaplex\", \"magic eden\", \"pfp\", \"trait\", \"art\",\n  ],\n  dao: [\n    \"dao\", \"governance\", \"proposal\", \"vote\", \"voting\", \"snapshot\",\n    \"tally\", \"realms\", \"treasury\", \"delegate\",\n  ],\n  social: [\n    \"twitter\", \"telegram\", \"discord\", \"farcaster\", \"sentiment\",\n    \"influencer\", \"post\", \"tweet\", \"social\", \"community\", \"hype\",\n  ],\n  bridge: [\n    \"bridge\", \"cross-chain\", \"wormhole\", \"layerzero\", \"debridge\",\n    \"transfer between\", \"move to\", \"from ethereum to\", \"to solana\",\n  ],\n  audit: [\n    \"audit\", \"security\", \"vulnerability\", \"reentrancy\", \"contract\",\n    \"scan\", \"safe\", \"risk\", \"exploit\", \"hack\", \"rug\",\n  ],\n  custom: [],\n};\n\n// Action mapping for common intents\nconst ACTION_MAPPING: Record<string, { agentType: AgentType; action: string }> = {\n  \"check balance\": { agentType: \"wallet\", action: \"get_balance\" },\n  \"get price\": { agentType: \"defi\", action: \"get_token_price\" },\n  \"analyze sentiment\": { agentType: \"social\", action: \"analyze_sentiment\" },\n  \"audit contract\": { agentType: \"audit\", action: \"analyze_contract\" },\n  \"bridge tokens\": { agentType: \"bridge\", action: \"find_best_route\" },\n  \"get nft info\": { agentType: \"nft\", action: \"get_collection\" },\n  \"check proposals\": { agentType: \"dao\", action: \"get_proposals\" },\n};\n\nexport class Router {\n  private agents: Map<string, RegisteredAgent> = new Map();\n  private llmClient?: LLMClient;\n\n  constructor(llmClient?: LLMClient) {\n    this.llmClient = llmClient;\n  }\n\n  registerAgent(agent: RegisteredAgent): void {\n    this.agents.set(agent.id, agent);\n  }\n\n  unregisterAgent(agentId: string): void {\n    this.agents.delete(agentId);\n  }\n\n  async route(input: string): Promise<RoutingDecision | null> {\n    // Try LLM-based routing first\n    if (this.llmClient) {\n      const llmDecision = await this.llmRoute(input);\n      if (llmDecision && llmDecision.confidence > 0.7) {\n        return llmDecision;\n      }\n    }\n\n    // Fall back to keyword-based routing\n    return this.keywordRoute(input);\n  }\n\n  private async llmRoute(input: string): Promise<RoutingDecision | null> {\n    if (!this.llmClient) return null;\n\n    const agentDescriptions = Array.from(this.agents.values())\n      .map((a) => `- ${a.id} (${a.type}): ${a.description}. Capabilities: ${a.capabilities.join(\", \")}`)\n      .join(\"\\n\");\n\n    try {\n      const response = await this.llmClient.chat([\n        {\n          role: \"system\",\n          content: `You are a routing system for a multi-agent platform.\nGiven a user request, determine which agent should handle it and what action to take.\n\nAvailable agents:\n${agentDescriptions}\n\nReturn JSON with this exact structure:\n{\n  \"agentId\": \"string - ID of the agent to use\",\n  \"action\": \"string - specific action/tool to call\",\n  \"params\": { \"key\": \"value\" },\n  \"confidence\": 0.0-1.0,\n  \"reasoning\": \"brief explanation\"\n}`,\n        },\n        {\n          role: \"user\",\n          content: input,\n        },\n      ]);\n\n      return JSON.parse(response.content) as RoutingDecision;\n    } catch {\n      return null;\n    }\n  }\n\n  private keywordRoute(input: string): RoutingDecision | null {\n    const lowerInput = input.toLowerCase();\n    const scores = new Map<AgentType, number>();\n\n    // Score each agent type based on keyword matches\n    for (const [agentType, keywords] of Object.entries(AGENT_KEYWORDS)) {\n      let score = 0;\n      for (const keyword of keywords) {\n        if (lowerInput.includes(keyword)) {\n          score += keyword.length; // Weight by keyword length\n        }\n      }\n      if (score > 0) {\n        scores.set(agentType as AgentType, score);\n      }\n    }\n\n    if (scores.size === 0) return null;\n\n    // Find best matching agent type\n    const bestType = Array.from(scores.entries()).reduce((best, current) =>\n      current[1] > best[1] ? current : best\n    )[0];\n\n    // Find an agent of this type\n    const agent = Array.from(this.agents.values()).find((a) => a.type === bestType);\n    if (!agent) return null;\n\n    // Try to determine action from input\n    const action = this.inferAction(lowerInput, bestType);\n\n    const maxScore = Math.max(...scores.values());\n    const confidence = Math.min(maxScore / 50, 0.9); // Normalize confidence\n\n    return {\n      agentId: agent.id,\n      action,\n      params: this.extractParams(input),\n      confidence,\n      reasoning: `Keyword match for ${bestType} agent`,\n    };\n  }\n\n  private inferAction(input: string, agentType: AgentType): string {\n    // Check common action mappings\n    for (const [phrase, mapping] of Object.entries(ACTION_MAPPING)) {\n      if (input.includes(phrase) && mapping.agentType === agentType) {\n        return mapping.action;\n      }\n    }\n\n    // Default actions by agent type\n    const defaultActions: Record<AgentType, string> = {\n      wallet: \"get_balance\",\n      defi: \"get_token_price\",\n      nft: \"get_collection\",\n      dao: \"get_proposals\",\n      social: \"analyze_sentiment\",\n      bridge: \"find_best_route\",\n      audit: \"analyze_contract\",\n      custom: \"execute\",\n    };\n\n    return defaultActions[agentType] ?? \"analyze\";\n  }\n\n  private extractParams(input: string): Record<string, unknown> {\n    const params: Record<string, unknown> = {};\n\n    // Extract Ethereum addresses\n    const ethAddressMatch = input.match(/0x[a-fA-F0-9]{40}/);\n    if (ethAddressMatch) {\n      params.address = ethAddressMatch[0];\n    }\n\n    // Extract Solana addresses (base58, ~32-44 chars)\n    const solAddressMatch = input.match(/[1-9A-HJ-NP-Za-km-z]{32,44}/);\n    if (solAddressMatch && !ethAddressMatch) {\n      params.address = solAddressMatch[0];\n    }\n\n    // Extract token symbols (uppercase 2-10 chars)\n    const tokenMatch = input.match(/\\$([A-Z]{2,10})/);\n    if (tokenMatch) {\n      params.token = tokenMatch[1];\n    }\n\n    // Extract amounts\n    const amountMatch = input.match(/(\\d+(?:\\.\\d+)?)\\s*(eth|sol|usdc|usdt)?/i);\n    if (amountMatch) {\n      params.amount = amountMatch[1];\n    }\n\n    return params;\n  }\n\n  parseIntent(input: string): Intent {\n    const lowerInput = input.toLowerCase();\n    const entities = this.extractParams(input);\n\n    // Determine action from common patterns\n    let action = \"unknown\";\n    let confidence = 0.5;\n\n    const actionPatterns: Array<{ pattern: RegExp; action: string; conf: number }> = [\n      { pattern: /what('s| is) (the )?(price|value)/, action: \"get_price\", conf: 0.9 },\n      { pattern: /check (my )?(balance|holdings)/, action: \"get_balance\", conf: 0.9 },\n      { pattern: /send|transfer/, action: \"send\", conf: 0.85 },\n      { pattern: /bridge|move .* to/, action: \"bridge\", conf: 0.85 },\n      { pattern: /audit|scan|check (contract|security)/, action: \"audit\", conf: 0.9 },\n      { pattern: /sentiment|what .* think/, action: \"analyze_sentiment\", conf: 0.8 },\n      { pattern: /vote|proposal/, action: \"governance\", conf: 0.85 },\n      { pattern: /nft|collection|floor/, action: \"nft_info\", conf: 0.85 },\n    ];\n\n    for (const { pattern, action: a, conf } of actionPatterns) {\n      if (pattern.test(lowerInput)) {\n        action = a;\n        confidence = conf;\n        break;\n      }\n    }\n\n    return {\n      action,\n      entities: entities as Record<string, string>,\n      confidence,\n      rawInput: input,\n    };\n  }\n\n  getAvailableAgents(): RegisteredAgent[] {\n    return Array.from(this.agents.values());\n  }\n}\n","import type { MemoryEntry } from \"../types.js\";\n\nexport class SharedMemory {\n  private store: Map<string, MemoryEntry> = new Map();\n  private maxEntries: number;\n  private defaultTTL: number;\n\n  constructor(config: { maxEntries?: number; defaultTTL?: number } = {}) {\n    this.maxEntries = config.maxEntries ?? 1000;\n    this.defaultTTL = config.defaultTTL ?? 3600000; // 1 hour default\n  }\n\n  set(\n    key: string,\n    value: unknown,\n    options: { ttl?: number; tags?: string[] } = {}\n  ): void {\n    // Evict if at capacity\n    if (this.store.size >= this.maxEntries) {\n      this.evictOldest();\n    }\n\n    this.store.set(key, {\n      key,\n      value,\n      timestamp: new Date(),\n      ttl: options.ttl ?? this.defaultTTL,\n      tags: options.tags ?? [],\n    });\n  }\n\n  get<T>(key: string): T | null {\n    const entry = this.store.get(key);\n    if (!entry) return null;\n\n    // Check TTL\n    if (this.isExpired(entry)) {\n      this.store.delete(key);\n      return null;\n    }\n\n    return entry.value as T;\n  }\n\n  has(key: string): boolean {\n    const entry = this.store.get(key);\n    if (!entry) return false;\n\n    if (this.isExpired(entry)) {\n      this.store.delete(key);\n      return false;\n    }\n\n    return true;\n  }\n\n  delete(key: string): boolean {\n    return this.store.delete(key);\n  }\n\n  getByTag(tag: string): MemoryEntry[] {\n    const results: MemoryEntry[] = [];\n\n    for (const entry of this.store.values()) {\n      if (this.isExpired(entry)) {\n        this.store.delete(entry.key);\n        continue;\n      }\n\n      if (entry.tags.includes(tag)) {\n        results.push(entry);\n      }\n    }\n\n    return results;\n  }\n\n  deleteByTag(tag: string): number {\n    let deleted = 0;\n\n    for (const entry of this.store.values()) {\n      if (entry.tags.includes(tag)) {\n        this.store.delete(entry.key);\n        deleted++;\n      }\n    }\n\n    return deleted;\n  }\n\n  private isExpired(entry: MemoryEntry): boolean {\n    if (!entry.ttl) return false;\n    const age = Date.now() - entry.timestamp.getTime();\n    return age > entry.ttl;\n  }\n\n  private evictOldest(): void {\n    let oldest: MemoryEntry | null = null;\n\n    for (const entry of this.store.values()) {\n      if (!oldest || entry.timestamp < oldest.timestamp) {\n        oldest = entry;\n      }\n    }\n\n    if (oldest) {\n      this.store.delete(oldest.key);\n    }\n  }\n\n  clear(): void {\n    this.store.clear();\n  }\n\n  size(): number {\n    // Clean up expired entries first\n    for (const entry of this.store.values()) {\n      if (this.isExpired(entry)) {\n        this.store.delete(entry.key);\n      }\n    }\n    return this.store.size;\n  }\n\n  // Get all keys matching a pattern\n  keys(pattern?: string): string[] {\n    const allKeys = Array.from(this.store.keys());\n\n    if (!pattern) return allKeys;\n\n    const regex = new RegExp(pattern.replace(/\\*/g, \".*\"));\n    return allKeys.filter((key) => regex.test(key));\n  }\n\n  // Context helpers for workflows\n  setWorkflowContext(\n    workflowId: string,\n    stepId: string,\n    data: unknown\n  ): void {\n    this.set(`workflow:${workflowId}:${stepId}`, data, {\n      tags: [\"workflow\", workflowId],\n      ttl: 3600000, // 1 hour\n    });\n  }\n\n  getWorkflowContext<T>(workflowId: string, stepId: string): T | null {\n    return this.get<T>(`workflow:${workflowId}:${stepId}`);\n  }\n\n  clearWorkflowContext(workflowId: string): number {\n    return this.deleteByTag(workflowId);\n  }\n\n  // Agent state helpers\n  setAgentState(agentId: string, state: unknown): void {\n    this.set(`agent:${agentId}:state`, state, {\n      tags: [\"agent\", agentId],\n    });\n  }\n\n  getAgentState<T>(agentId: string): T | null {\n    return this.get<T>(`agent:${agentId}:state`);\n  }\n\n  // Conversation/session context\n  setSessionContext(sessionId: string, key: string, value: unknown): void {\n    this.set(`session:${sessionId}:${key}`, value, {\n      tags: [\"session\", sessionId],\n      ttl: 7200000, // 2 hours\n    });\n  }\n\n  getSessionContext<T>(sessionId: string, key: string): T | null {\n    return this.get<T>(`session:${sessionId}:${key}`);\n  }\n\n  // Cache helpers\n  cached<T>(\n    key: string,\n    factory: () => Promise<T>,\n    ttl?: number\n  ): Promise<T> {\n    const existing = this.get<T>(key);\n    if (existing !== null) {\n      return Promise.resolve(existing);\n    }\n\n    return factory().then((value) => {\n      this.set(key, value, { ttl });\n      return value;\n    });\n  }\n}\n","import type { Workflow } from \"../types.js\";\n\nexport const researchTokenWorkflow: Workflow = {\n  id: \"research-token\",\n  name: \"Token Research\",\n  description: \"Comprehensive token research including price, sentiment, and security\",\n  steps: [\n    {\n      id: \"get-price\",\n      agentId: \"defi\",\n      action: \"get_token_price\",\n      params: { token: \"{{token}}\" },\n    },\n    {\n      id: \"analyze-sentiment\",\n      agentId: \"social\",\n      action: \"analyze_sentiment\",\n      params: { query: \"{{token}}\" },\n      dependsOn: [\"get-price\"],\n    },\n    {\n      id: \"check-contract\",\n      agentId: \"audit\",\n      action: \"analyze_contract\",\n      params: { address: \"{{contractAddress}}\" },\n      dependsOn: [\"get-price\"],\n    },\n    {\n      id: \"get-whale-activity\",\n      agentId: \"defi\",\n      action: \"get_boosted_tokens\",\n      params: {},\n      dependsOn: [\"get-price\"],\n    },\n  ],\n  onError: \"continue\",\n};\n\nexport const swapWorkflow: Workflow = {\n  id: \"swap-token\",\n  name: \"Token Swap\",\n  description: \"Execute a token swap with safety checks\",\n  steps: [\n    {\n      id: \"check-balance\",\n      agentId: \"wallet\",\n      action: \"get_balance\",\n      params: { address: \"{{wallet}}\", token: \"{{fromToken}}\" },\n    },\n    {\n      id: \"get-quote\",\n      agentId: \"defi\",\n      action: \"get_token_price\",\n      params: { token: \"{{toToken}}\" },\n      dependsOn: [\"check-balance\"],\n    },\n    {\n      id: \"check-contract-safety\",\n      agentId: \"audit\",\n      action: \"quick_scan\",\n      params: { address: \"{{toToken}}\" },\n      dependsOn: [\"get-quote\"],\n    },\n    {\n      id: \"execute-swap\",\n      agentId: \"wallet\",\n      action: \"send_transaction\",\n      params: {\n        type: \"swap\",\n        from: \"{{fromToken}}\",\n        to: \"{{toToken}}\",\n        amount: \"{{amount}}\",\n      },\n      dependsOn: [\"check-contract-safety\"],\n      condition: (ctx): boolean => {\n        const safety = ctx.results.get(\"check-contract-safety\");\n        return Boolean(safety?.success && !((safety.data as { hasHighRisk?: boolean })?.hasHighRisk));\n      },\n    },\n  ],\n  onError: \"stop\",\n};\n\nexport const bridgeWorkflow: Workflow = {\n  id: \"bridge-tokens\",\n  name: \"Cross-Chain Bridge\",\n  description: \"Bridge tokens between chains with best route selection\",\n  steps: [\n    {\n      id: \"check-source-balance\",\n      agentId: \"wallet\",\n      action: \"get_balance\",\n      params: {\n        address: \"{{wallet}}\",\n        token: \"{{sourceToken}}\",\n        chain: \"{{sourceChain}}\",\n      },\n    },\n    {\n      id: \"find-best-route\",\n      agentId: \"bridge\",\n      action: \"find_best_route\",\n      params: {\n        sourceChain: \"{{sourceChain}}\",\n        destChain: \"{{destChain}}\",\n        sourceToken: \"{{sourceToken}}\",\n        destToken: \"{{destToken}}\",\n        amount: \"{{amount}}\",\n      },\n      dependsOn: [\"check-source-balance\"],\n    },\n    {\n      id: \"estimate-fees\",\n      agentId: \"bridge\",\n      action: \"estimate_fees\",\n      params: {},\n      dependsOn: [\"find-best-route\"],\n    },\n  ],\n  onError: \"stop\",\n};\n\nexport const portfolioAnalysisWorkflow: Workflow = {\n  id: \"analyze-portfolio\",\n  name: \"Portfolio Analysis\",\n  description: \"Analyze wallet portfolio across chains\",\n  steps: [\n    {\n      id: \"get-evm-balance\",\n      agentId: \"wallet\",\n      action: \"get_all_balances\",\n      params: { address: \"{{wallet}}\", chain: \"evm\" },\n    },\n    {\n      id: \"get-solana-balance\",\n      agentId: \"wallet\",\n      action: \"get_all_balances\",\n      params: { address: \"{{solanaWallet}}\", chain: \"solana\" },\n    },\n    {\n      id: \"get-nft-holdings\",\n      agentId: \"nft\",\n      action: \"get_user_nfts\",\n      params: { address: \"{{wallet}}\" },\n    },\n    {\n      id: \"calculate-total-value\",\n      agentId: \"defi\",\n      action: \"calculate_portfolio_value\",\n      params: {},\n      dependsOn: [\"get-evm-balance\", \"get-solana-balance\", \"get-nft-holdings\"],\n    },\n  ],\n  onError: \"continue\",\n};\n\nexport const tradingWorkflows = {\n  \"research-token\": researchTokenWorkflow,\n  \"swap-token\": swapWorkflow,\n  \"bridge-tokens\": bridgeWorkflow,\n  \"analyze-portfolio\": portfolioAnalysisWorkflow,\n};\n","import type { Workflow } from \"../types.js\";\n\nexport const projectDueDiligenceWorkflow: Workflow = {\n  id: \"project-due-diligence\",\n  name: \"Project Due Diligence\",\n  description: \"Comprehensive project research and security analysis\",\n  steps: [\n    {\n      id: \"analyze-contract\",\n      agentId: \"audit\",\n      action: \"analyze_contract\",\n      params: { address: \"{{contractAddress}}\" },\n    },\n    {\n      id: \"check-social-sentiment\",\n      agentId: \"social\",\n      action: \"analyze_sentiment\",\n      params: { query: \"{{projectName}}\" },\n    },\n    {\n      id: \"get-token-metrics\",\n      agentId: \"defi\",\n      action: \"get_token_overview\",\n      params: { token: \"{{token}}\" },\n    },\n    {\n      id: \"check-dao-activity\",\n      agentId: \"dao\",\n      action: \"get_proposals\",\n      params: { daoId: \"{{daoId}}\" },\n      condition: (ctx) => !!ctx.memory.get(\"daoId\"),\n    },\n    {\n      id: \"generate-report\",\n      agentId: \"custom\",\n      action: \"summarize_research\",\n      params: {},\n      dependsOn: [\"analyze-contract\", \"check-social-sentiment\", \"get-token-metrics\"],\n    },\n  ],\n  onError: \"continue\",\n};\n\nexport const nftCollectionAnalysisWorkflow: Workflow = {\n  id: \"nft-collection-analysis\",\n  name: \"NFT Collection Analysis\",\n  description: \"Analyze NFT collection with rarity, pricing, and whale tracking\",\n  steps: [\n    {\n      id: \"get-collection-info\",\n      agentId: \"nft\",\n      action: \"get_collection\",\n      params: { address: \"{{collectionAddress}}\" },\n    },\n    {\n      id: \"analyze-rarity\",\n      agentId: \"nft\",\n      action: \"analyze_rarity\",\n      params: {\n        collectionAddress: \"{{collectionAddress}}\",\n        tokenId: \"{{tokenId}}\",\n      },\n      dependsOn: [\"get-collection-info\"],\n    },\n    {\n      id: \"estimate-price\",\n      agentId: \"nft\",\n      action: \"estimate_price\",\n      params: {\n        collectionAddress: \"{{collectionAddress}}\",\n        tokenId: \"{{tokenId}}\",\n      },\n      dependsOn: [\"analyze-rarity\"],\n    },\n    {\n      id: \"track-whales\",\n      agentId: \"nft\",\n      action: \"get_whale_holders\",\n      params: { collectionAddress: \"{{collectionAddress}}\" },\n      dependsOn: [\"get-collection-info\"],\n    },\n    {\n      id: \"check-social-buzz\",\n      agentId: \"social\",\n      action: \"analyze_sentiment\",\n      params: { query: \"{{collectionName}}\" },\n      dependsOn: [\"get-collection-info\"],\n    },\n  ],\n  onError: \"continue\",\n};\n\nexport const daoGovernanceWorkflow: Workflow = {\n  id: \"dao-governance-analysis\",\n  name: \"DAO Governance Analysis\",\n  description: \"Analyze DAO proposals and voting patterns\",\n  steps: [\n    {\n      id: \"get-dao-info\",\n      agentId: \"dao\",\n      action: \"get_dao\",\n      params: { id: \"{{daoId}}\" },\n    },\n    {\n      id: \"get-active-proposals\",\n      agentId: \"dao\",\n      action: \"get_proposals\",\n      params: { daoId: \"{{daoId}}\", state: \"active\" },\n      dependsOn: [\"get-dao-info\"],\n    },\n    {\n      id: \"summarize-proposals\",\n      agentId: \"dao\",\n      action: \"summarize_proposal\",\n      params: { proposalId: \"{{proposalId}}\" },\n      dependsOn: [\"get-active-proposals\"],\n    },\n    {\n      id: \"analyze-voting-power\",\n      agentId: \"dao\",\n      action: \"analyze_voting_power\",\n      params: { daoId: \"{{daoId}}\" },\n      dependsOn: [\"get-dao-info\"],\n    },\n  ],\n  onError: \"continue\",\n};\n\nexport const influencerTrackingWorkflow: Workflow = {\n  id: \"influencer-tracking\",\n  name: \"Influencer Tracking\",\n  description: \"Track and analyze crypto influencers\",\n  steps: [\n    {\n      id: \"get-twitter-profile\",\n      agentId: \"social\",\n      action: \"get_user\",\n      params: { username: \"{{twitterHandle}}\", platform: \"twitter\" },\n    },\n    {\n      id: \"analyze-influencer\",\n      agentId: \"social\",\n      action: \"analyze_influencer\",\n      params: { username: \"{{twitterHandle}}\" },\n      dependsOn: [\"get-twitter-profile\"],\n    },\n    {\n      id: \"get-recent-calls\",\n      agentId: \"social\",\n      action: \"search_posts\",\n      params: {\n        query: \"from:{{twitterHandle}} $\",\n        platform: \"twitter\",\n      },\n      dependsOn: [\"get-twitter-profile\"],\n    },\n    {\n      id: \"check-farcaster\",\n      agentId: \"social\",\n      action: \"get_user\",\n      params: { username: \"{{farcasterHandle}}\", platform: \"farcaster\" },\n      condition: (ctx) => !!ctx.memory.get(\"farcasterHandle\"),\n    },\n  ],\n  onError: \"continue\",\n};\n\nexport const researchWorkflows = {\n  \"project-due-diligence\": projectDueDiligenceWorkflow,\n  \"nft-collection-analysis\": nftCollectionAnalysisWorkflow,\n  \"dao-governance-analysis\": daoGovernanceWorkflow,\n  \"influencer-tracking\": influencerTrackingWorkflow,\n};\n","import type { Workflow } from \"../types.js\";\n\nexport const rebalancePortfolioWorkflow: Workflow = {\n  id: \"rebalance-portfolio\",\n  name: \"Portfolio Rebalance\",\n  description: \"Analyze and suggest portfolio rebalancing\",\n  steps: [\n    {\n      id: \"get-current-holdings\",\n      agentId: \"wallet\",\n      action: \"get_all_balances\",\n      params: { address: \"{{wallet}}\" },\n    },\n    {\n      id: \"get-token-prices\",\n      agentId: \"defi\",\n      action: \"get_multiple_prices\",\n      params: { tokens: \"{{tokens}}\" },\n      dependsOn: [\"get-current-holdings\"],\n    },\n    {\n      id: \"calculate-allocations\",\n      agentId: \"custom\",\n      action: \"calculate_allocations\",\n      params: { targetAllocation: \"{{targetAllocation}}\" },\n      dependsOn: [\"get-current-holdings\", \"get-token-prices\"],\n    },\n    {\n      id: \"find-best-routes\",\n      agentId: \"bridge\",\n      action: \"compare_bridges\",\n      params: {},\n      dependsOn: [\"calculate-allocations\"],\n      condition: (ctx) => {\n        const allocations = ctx.results.get(\"calculate-allocations\");\n        return (allocations?.data as { needsCrossChain?: boolean })?.needsCrossChain ?? false;\n      },\n    },\n  ],\n  onError: \"stop\",\n};\n\nexport const yieldFarmingWorkflow: Workflow = {\n  id: \"yield-farming-analysis\",\n  name: \"Yield Farming Analysis\",\n  description: \"Find and analyze yield farming opportunities\",\n  steps: [\n    {\n      id: \"get-trending-tokens\",\n      agentId: \"defi\",\n      action: \"get_boosted_tokens\",\n      params: {},\n    },\n    {\n      id: \"analyze-each-token\",\n      agentId: \"defi\",\n      action: \"get_token_overview\",\n      params: { token: \"{{token}}\" },\n      dependsOn: [\"get-trending-tokens\"],\n    },\n    {\n      id: \"check-contract-safety\",\n      agentId: \"audit\",\n      action: \"analyze_contract\",\n      params: { address: \"{{contractAddress}}\" },\n      dependsOn: [\"analyze-each-token\"],\n    },\n    {\n      id: \"calculate-apy\",\n      agentId: \"custom\",\n      action: \"calculate_yield\",\n      params: {},\n      dependsOn: [\"analyze-each-token\"],\n    },\n  ],\n  onError: \"continue\",\n};\n\nexport const riskAssessmentWorkflow: Workflow = {\n  id: \"risk-assessment\",\n  name: \"Portfolio Risk Assessment\",\n  description: \"Comprehensive risk analysis of portfolio\",\n  steps: [\n    {\n      id: \"get-holdings\",\n      agentId: \"wallet\",\n      action: \"get_all_balances\",\n      params: { address: \"{{wallet}}\" },\n    },\n    {\n      id: \"audit-contracts\",\n      agentId: \"audit\",\n      action: \"batch_analyze\",\n      params: { addresses: \"{{tokenAddresses}}\" },\n      dependsOn: [\"get-holdings\"],\n    },\n    {\n      id: \"check-liquidity\",\n      agentId: \"defi\",\n      action: \"check_liquidity\",\n      params: { tokens: \"{{tokens}}\" },\n      dependsOn: [\"get-holdings\"],\n    },\n    {\n      id: \"analyze-concentration\",\n      agentId: \"custom\",\n      action: \"concentration_analysis\",\n      params: {},\n      dependsOn: [\"get-holdings\"],\n    },\n    {\n      id: \"generate-risk-report\",\n      agentId: \"custom\",\n      action: \"generate_risk_report\",\n      params: {},\n      dependsOn: [\"audit-contracts\", \"check-liquidity\", \"analyze-concentration\"],\n    },\n  ],\n  onError: \"continue\",\n};\n\nexport const dailyPortfolioUpdateWorkflow: Workflow = {\n  id: \"daily-portfolio-update\",\n  name: \"Daily Portfolio Update\",\n  description: \"Daily summary of portfolio changes and market conditions\",\n  steps: [\n    {\n      id: \"get-portfolio-value\",\n      agentId: \"wallet\",\n      action: \"get_portfolio_value\",\n      params: { address: \"{{wallet}}\" },\n    },\n    {\n      id: \"get-market-sentiment\",\n      agentId: \"social\",\n      action: \"analyze_sentiment\",\n      params: { query: \"crypto market\" },\n    },\n    {\n      id: \"get-active-proposals\",\n      agentId: \"dao\",\n      action: \"get_proposals\",\n      params: { daoId: \"{{daoIds}}\", state: \"active\" },\n    },\n    {\n      id: \"check-whale-activity\",\n      agentId: \"defi\",\n      action: \"get_boosted_tokens\",\n      params: {},\n    },\n    {\n      id: \"generate-daily-summary\",\n      agentId: \"custom\",\n      action: \"generate_summary\",\n      params: {},\n      dependsOn: [\n        \"get-portfolio-value\",\n        \"get-market-sentiment\",\n        \"get-active-proposals\",\n        \"check-whale-activity\",\n      ],\n    },\n  ],\n  onError: \"continue\",\n};\n\nexport const portfolioWorkflows = {\n  \"rebalance-portfolio\": rebalancePortfolioWorkflow,\n  \"yield-farming-analysis\": yieldFarmingWorkflow,\n  \"risk-assessment\": riskAssessmentWorkflow,\n  \"daily-portfolio-update\": dailyPortfolioUpdateWorkflow,\n};\n"],"mappings":"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","names":[]}